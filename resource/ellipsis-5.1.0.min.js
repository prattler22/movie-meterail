!function(t){!function(t,e){"object"==typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(function(){return e()}):window.ellipsis=e()}(0,function(){var e=0,i=function(i,n){var s,r=n||{};this.ellipsisSign=r.ellipsisSign||"...",this.handleRotateEvent=void 0===r.handleRotateEvent||r.handleRotateEvent,s=t(i),s.get(0)&&(s.attr("data-ellipsis-managed",e++),this._el=s.get(0),this._$el=s,this._text=s.find("._text").text(),this._style=s.attr("style")),this.work(),s.on("click","._unomit",t.proxy(this,"_onUnomitClick"))};i.prototype={constructor:i,isOmitted:function(){return"true"===t(this._el).attr("data-ellipsis-omitted")},destroy:function(){t(this._el).off("click","._unomit",this._onUnomitClick),this._el=this._text=null},row:function(){return Math.floor(this._el.clientHeight/this._oneLineHeight)},revert:function(){return t(this._el).attr("style",this._style).attr("data-ellipsis-row",this.row()).attr("data-ellipsis-omitted","false").find("._text").text(this._text),this},work:function(){if(this._el){var e=t(this._el).attr("style",this._style),i=e.find("._text").text(this._text),n=e.find("._tail"),s=e.get(0).getBoundingClientRect().width||parseInt(e.css("width"),10),r=parseFloat(e.css("padding-left"))+parseFloat(e.css("padding-right")),o=e.height(),a=t(this._el.cloneNode(!0)),l=t(a.find("._text")),h=l.text(),u=t(a.find("._tail")),c=o<1,d="hidden"!==e.css("overflow")&&"visible"!==e.css("overflow"),f=!l.get(0),p=o<e.css("max-height","99999px").height();e.attr("style",this._style);var g=!1;if(!(c||d||f)){if(a.css({position:"absolute",overflow:"visible"}).css({height:"auto","max-height":"99999px",width:s-r+"px"}),e.after(a).attr("data-ellipsis-omitted",g),p&&this._reduce(o,a,l,l.text()))for(h=l.text();h.length&&a.height()>o;)h=h.substr(0,h.length-1),l.text(h+this.ellipsisSign),u.get(0)&&(u.css("display",""),n.css("display","")),!g&&e.attr("data-ellipsis-omitted","true"),g=!0;return i.text(l.text()),l.text("A"),this._oneLineHeight=a.height(),e.attr("data-ellipsis-row",this.row()),a.remove(),this}}},unomit:function(){return this.revert(),t(this._el).css("max-height","99999px").attr("data-ellipsis-omitted","false"),t(this._el).find("._tail").hide(),this},_reduce:function(t,e,i,n){var s=Math.ceil(n.length/2),r=n.substr(0,s),o=n.substr(s);return i.text(r),e.height()>t?this._reduce(t,e,i,r):this._grow(t,e,i,r,o)},_grow:function(t,e,i,n,s){var r=Math.ceil(s.length/2),o=s.substr(0,r),a=s.substr(r);return i.text(n+o),!(e.height()<=t)||this._grow(t,e,i,n+o,a)},_onUnomitClick:function(t){t.preventDefault(),this.unomit()}};var n="orientationchange";try{jQuery.event.special.rotate&&(n="rotate")}catch(t){}var s=[],r=function(t){t.handleRotateEvent&&t.revert().work()};return t(window).on(n,function(t){"orientationchange"===t.type?setTimeout(function(){s.forEach(r)},100):s.forEach(r)}),t(window).on("pageshow",function(t){(t.originalEvent?t.originalEvent.persisted:t.persisted)&&s.forEach(function(t){t.revert().work()})}),{work:function(e,n){var r=t(e),o=r.length>2?r:r.hasClass("_ellipsis")?r:r.find("._ellipsis");return Array.prototype.push.apply(s,t.grep(o.map(function(e,r){var o=s[parseInt(t(r).attr("data-ellipsis-managed"),10)];return o?(o.revert().work(),null):new i(r,n)}),function(t){return!!t})),this},unomit:function(){return t.map(s,function(t){t.unomit()}),this},get:function(e){return arguments.length?(e=t.isNumeric(e)?e:t(e).attr("data-ellipsis-managed"),s[parseInt(e,10)]):s.concat()},rows:function(){return t.map(s,function(t){return t.row()})},revert:function(){return t.map(s,function(t){t.revert()}),this},destroy:function(){return t.map(s,function(t){t.destroy()}),this.reset(),this},reset:function(){return s.length=e=0,this},VERSION:"5.1.0"}})}(jQuery);