!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.WebPlayerCore=t():(e.audiop4=e.audiop4||{},e.audiop4.WebPlayerCore=t())}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/static/",r(r.s=154)}([function(e,t,r){(function(t){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,r(100))},function(e,t,r){e.exports=r(199)},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){var n=r(213);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),n(e,i.key,i)}}e.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}},function(e,t,r){"use strict";var n=r(0),i=r(36),o=r(5),a=r(9),s=r(59).f,u=r(105),l=r(11),c=r(38),d=r(33),f=r(14),h=function(e){var t=function(r,n,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,n)}return new e(r,n,o)}return i(e,this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var r,i,p,g,v,m,y,b,_=e.target,E=e.global,T=e.stat,S=e.proto,w=E?n:T?n[_]:(n[_]||{}).prototype,A=E?l:l[_]||d(l,_,{})[_],x=A.prototype;for(p in t)r=!u(E?p:_+(T?".":"#")+p,e.forced)&&w&&f(w,p),v=A[p],r&&(m=e.noTargetGet?(b=s(w,p))&&b.value:w[p]),g=r&&m?m:t[p],r&&typeof v==typeof g||(y=e.bind&&r?c(g,n):e.wrap&&r?h(g):S&&a(g)?o(g):g,(e.sham||g&&g.sham||v&&v.sham)&&d(y,"sham",!0),d(A,p,y),S&&(f(l,i=_+"Prototype")||d(l,i,{}),d(l[i],p,g),e.real&&x&&!x[p]&&d(x,p,g)))}},function(e,t,r){var n=r(50),i=Function.prototype,o=i.bind,a=i.call,s=n&&o.bind(a,a);e.exports=n?function(e){return e&&s(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},function(e,t,r){var n=r(0),i=r(79),o=r(14),a=r(81),s=r(77),u=r(103),l=i("wks"),c=n.Symbol,d=c&&c.for,f=u?c:c&&c.withoutSetter||a;e.exports=function(e){if(!o(l,e)||!s&&"string"!=typeof l[e]){var t="Symbol."+e;s&&o(c,e)?l[e]=c[e]:l[e]=u&&d?d(t):f(t)}return l[e]}},function(e,t,r){var n=r(245),i=r(130);function o(t){return e.exports=o=i?n:function(e){return e.__proto__||n(e)},o(t)}e.exports=o},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t,r){var n=r(11),i=r(14),o=r(91),a=r(27).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},function(e,t){e.exports={}},function(e,t,r){e.exports=r(255)},function(e,t,r){var n=r(9);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},function(e,t,r){var n=r(5),i=r(37),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},function(e,t,r){var n=r(219),i=r(224);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=n(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t,r){var n=r(96),i=r(244);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}},function(e,t,r){e.exports=r(209)},function(e,t,r){var n=r(0),i=r(13),o=n.String,a=n.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not an object")}},function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise(function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}v(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&v(e,"error",t,r)}(e,i,{once:!0})})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,r,n){var i,o,a;if(l(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,function(e){console&&console.warn&&console.warn(e)}(s)}return e}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):g(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function v(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var l=u.length,c=g(u,l);for(r=0;r<l;++r)o(c[r],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,f(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,o,a;if(l(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){var n=r(50),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},function(e,t,r){var n=r(11),i=r(0),o=r(9),a=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?a(n[e])||a(i[e]):n[e]&&n[e][t]||i[e]&&i[e][t]}},function(e,t,r){var n=r(5);e.exports=n({}.isPrototypeOf)},function(e,t,r){var n=r(8);e.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t,r){e.exports=r(206)},function(e,t,r){e.exports=r(292)},function(e,t,r){e.exports=r(296)},function(e,t,r){var n=r(0),i=r(23),o=r(104),a=r(106),s=r(18),u=r(60),l=n.TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor;t.f=i?a?function(e,t,r){if(s(e),t=u(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&"writable"in r&&!r.writable){var n=d(e,t);n&&n.writable&&(e[t]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return c(e,t,r)}:c:function(e,t,r){if(s(e),t=u(t),s(r),o)try{return c(e,t,r)}catch(e){}if("get"in r||"set"in r)throw l("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(11);e.exports=function(e){return n[e+"Prototype"]}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(102),i=r(51);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(0),i=r(9),o=r(62),a=n.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a function")}},function(e,t){e.exports=!0},function(e,t,r){var n=r(23),i=r(27),o=r(29);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(0),i=r(88),o=r(9),a=r(45),s=r(6)("toStringTag"),u=n.Object,l="Arguments"==a(function(){return arguments}());e.exports=i?a:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=u(e),s))?r:l?a(t):"Object"==(n=a(t))&&o(t.callee)?"Arguments":n}},function(e,t,r){e.exports=r(301)},function(e,t,r){var n=r(50),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(o):function(){return a.apply(o,arguments)})},function(e,t,r){var n=r(0),i=r(51),o=n.Object;e.exports=function(e){return o(i(e))}},function(e,t,r){var n=r(5),i=r(31),o=r(50),a=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},function(e,t,r){var n,i=r(18),o=r(112),a=r(87),s=r(64),u=r(115),l=r(82),c=r(63)("IE_PROTO"),d=function(){},f=function(e){return"<script>"+e+"<\/script>"},h=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},p=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}p="undefined"!=typeof document?document.domain&&n?h(n):function(){var e,t=l("iframe");return t.style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F}():h(n);for(var e=a.length;e--;)delete p.prototype[a[e]];return p()};s[c]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(d.prototype=i(e),r=new d,d.prototype=null,r[c]=e):r=p(),void 0===t?r:o.f(r,t)}},function(e,t,r){var n=r(166);e.exports=function(e){return n(e.length)}},function(e,t,r){var n=r(33);e.exports=function(e,t,r,i){i&&i.enumerable?e[t]=r:n(e,t,r)}},function(e,t,r){var n=r(0),i=r(34),o=n.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},function(e,t,r){r(46);var n=r(170),i=r(0),o=r(34),a=r(33),s=r(47),u=r(6)("toStringTag");for(var l in n){var c=i[l],d=c&&c.prototype;d&&o(d)!==u&&a(d,u,l),s[l]=s.Array}},function(e){e.exports=JSON.parse('{"BUILD_PROFILE":"","HTTPS__AUDIOC_OPEN_GW_PD_URL":"https://apis.naver.com/audiocweb/audiocplayogwweb/play/audio/{audioId}/audio/token?quality={quality}&acceptCodecs={acceptCodecs}","HTTPS__AUDIOC_OPEN_GW_HLS_URL":"https://apis.naver.com/audiocweb/audiocplayogwweb/play/audio/{audioId}/hls/token?quality={quality}&acceptCodecs={acceptCodecs}","HTTPS__AUDIOP_PLAY_LOG_URL":"https://apis.naver.com/audiopweb/audioplogapiweb/pc","HTTPS__AUDIOP_QUALITY_LOG_URL":"https://apis.naver.com/audiopweb/audioplogapiweb/quality.html","HTTPS__AUDIOP_NELO_URL":"https://nelo2-col.navercorp.com/_store","HTTPS__AUDIOP_PLAY_EVENT_LOG_URL":"https://apis.naver.com/audiopweb/audioplogapiweb/playlog?cpContentIds={cpContentIds}&audioIds={audioIds}"}')},function(e,t,r){var n=r(5),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},function(e,t,r){"use strict";var n=r(30),i=r(107),o=r(47),a=r(54),s=r(27).f,u=r(108),l=r(32),c=r(23),d=a.set,f=a.getterFor("Array Iterator");e.exports=u(Array,"Array",function(e,t){d(this,{type:"Array Iterator",target:n(e),index:0,kind:t})},function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values");var h=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&c&&"values"!==h.name)try{s(h,"name",{value:"values"})}catch(e){}},function(e,t){e.exports={}},function(e,t,r){var n=r(88),i=r(27).f,o=r(33),a=r(14),s=r(167),u=r(6)("toStringTag");e.exports=function(e,t,r,l){if(e){var c=r?e:e.prototype;a(c,u)||i(c,u,{configurable:!0,value:t}),l&&!n&&o(c,"toString",s)}}},function(e,t,r){e.exports=r(195)},function(e,t,r){var n=r(8);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},function(e,t,r){var n=r(0).TypeError;e.exports=function(e){if(void 0==e)throw n("Can't call method on "+e);return e}},function(e,t,r){var n=r(21);e.exports=n("navigator","userAgent")||""},function(e,t,r){var n=r(45);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n,i,o,a=r(165),s=r(0),u=r(5),l=r(13),c=r(33),d=r(14),f=r(80),h=r(63),p=r(64),g=s.TypeError,v=s.WeakMap;if(a||f.state){var m=f.state||(f.state=new v),y=u(m.get),b=u(m.has),_=u(m.set);n=function(e,t){if(b(m,e))throw new g("Object already initialized");return t.facade=e,_(m,e,t),t},i=function(e){return y(m,e)||{}},o=function(e){return b(m,e)}}else{var E=h("state");p[E]=!0,n=function(e,t){if(d(e,E))throw new g("Object already initialized");return t.facade=e,c(e,E,t),t},i=function(e){return d(e,E)?e[E]:{}},o=function(e){return d(e,E)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!l(t)||(r=i(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return r}}}},function(e,t,r){var n=r(34),i=r(78),o=r(47),a=r(6)("iterator");e.exports=function(e){if(void 0!=e)return i(e,a)||i(e,"@@iterator")||o[n(e)]}},function(e,t,r){var n=r(5);e.exports=n([].slice)},function(e,t,r){e.exports=r(203)},function(e,t){"undefined"!=typeof window&&function(r,n){"object"==typeof t&&"object"==typeof e?e.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof t?t.Hls=n():r.Hls=n()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new function(e,t,r){this.fn=e,this.context=t,this.once=r||!1}(r,n||e,o),s=i?i+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},u.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,o),!0;case 6:return c.fn.call(c.context,t,r,n,o,a),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,n);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},u.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||n&&!a.once||r&&a.context!==r||s(this,o);else{for(var u=0,l=[],c=a.length;u<c;u++)(a[u].fn!==t||n&&!a[u].once||r&&a[u].context!==r)&&l.push(a[u]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&s(this,t)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},"./node_modules/node-libs-browser/node_modules/events/events.js":function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,a,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(o(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),a=(l=r.slice()).length,u=0;u<a;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(e,t){var a;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){var r,o,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(r=this._events[e]).length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){o=s;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=a.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var o=a.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return r.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var s=a.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=n.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(l.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+o.path;l.path=a.normalizePath(d)}else l.path=s.path,o.params||(l.params=s.params,o.query||(l.query=s.query));return null===l.path&&(l.path=r.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a}()},"./node_modules/webworkify-webpack/index.js":function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}var i="[\\.|\\-|\\+|\\w|/|@]+",o="\\((/\\*.*?\\*/)?s?.*?("+i+").*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e){return!isNaN(1*e)}function u(e,t,n){var u={};u[n]=[];var l=t.toString(),c=l.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return u;for(var d,f=c[1],h=new RegExp("(\\\\n|\\W)"+a(f)+o,"g");d=h.exec(l);)"dll-reference"!==d[3]&&u[n].push(d[3]);for(h=new RegExp("\\("+a(f)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+o,"g");d=h.exec(l);)e[d[2]]||(u[n].push(d[1]),e[d[2]]=r(d[1]).m),u[d[2]]=u[d[2]]||[],u[d[2]].push(d[4]);for(var p=Object.keys(u),g=0;g<p.length;g++)for(var v=0;v<u[p[g]].length;v++)s(u[p[g]][v])&&(u[p[g]][v]=1*u[p[g]][v]);return u}function l(e){return Object.keys(e).reduce(function(t,r){return t||e[r].length>0},!1)}e.exports=function(e,t){t=t||{};var i={main:r.m},o=t.all?{main:Object.keys(i.main)}:function(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};l(r);)for(var o=Object.keys(r),a=0;a<o.length;a++){var s=o[a],c=r[s].pop();if(i[s]=i[s]||{},!i[s][c]&&e[s][c]){i[s][c]=!0,n[s]=n[s]||[],n[s].push(c);for(var d=u(e,e[s][c],s),f=Object.keys(d),h=0;h<f.length;h++)r[f[h]]=r[f[h]]||[],r[f[h]]=r[f[h]].concat(d[f[h]])}}return n}(i,e),a="";Object.keys(o).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;o[e][t];)t++;o[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o[e].map(function(t){return JSON.stringify(t)+": "+i[e][t].toString()}).join(",")+"});\n"}),a=a+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);";var s=new window.Blob([a],{type:"text/javascript"});if(t.bare)return s;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),d=new window.Worker(c);return d.objectURL=c,d}},"./src/config.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/controller/abr-controller.js"),i=r("./src/controller/buffer-controller.js"),o=r("./src/controller/cap-level-controller.js"),a=r("./src/controller/fps-controller.js"),s=r("./src/utils/xhr-loader.js"),u=r("./src/controller/audio-track-controller.js"),l=r("./src/controller/audio-stream-controller.js"),c=r("./src/utils/cues.js"),d=r("./src/controller/timeline-controller.js"),f=r("./src/controller/subtitle-track-controller.js"),h=r("./src/controller/subtitle-stream-controller.js"),p=r("./src/controller/eme-controller.js"),g=r("./src/utils/mediakeys-helper.js");t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:n.default,bufferController:i.default,capLevelController:o.default,fpsController:a.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:g.requestMediaKeySystemAccess},t.hlsDefaultConfig.subtitleStreamController=h.SubtitleStreamController,t.hlsDefaultConfig.subtitleTrackController=f.default,t.hlsDefaultConfig.timelineController=d.default,t.hlsDefaultConfig.cueHandler=c,t.hlsDefaultConfig.enableCEA708Captions=!0,t.hlsDefaultConfig.enableWebVTT=!0,t.hlsDefaultConfig.captionsTextTrack1Label="English",t.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",t.hlsDefaultConfig.captionsTextTrack2Label="Spanish",t.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",t.hlsDefaultConfig.audioStreamController=l.default,t.hlsDefaultConfig.audioTrackController=u.default,t.hlsDefaultConfig.emeController=p.default},"./src/controller/abr-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/buffer-helper.js"),s=r("./src/errors.js"),u=r("./src/utils/logger.js"),l=r("./src/utils/ewma-bandwidth-estimator.js"),c=window.performance,d=function(t){function r(e){var r=t.call(this,e,i.default.FRAG_LOADING,i.default.FRAG_LOADED,i.default.FRAG_BUFFERED,i.default.ERROR)||this;return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return n(r,t),r.prototype.destroy=function(){this.clearTimer(),o.default.prototype.destroy.call(this)},r.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,n=r.config,i=t.level,o=void 0,a=void 0;r.levels[i].details.live?(o=n.abrEwmaFastLive,a=n.abrEwmaSlowLive):(o=n.abrEwmaFastVoD,a=n.abrEwmaSlowVoD),this._bwEstimator=new l.default(r,a,o,n.abrEwmaDefaultEstimate)}},r.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader,o=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return u.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var s=n.stats;if(t&&s&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var l=c.now()-s.trequest,d=Math.abs(t.playbackRate);if(l>500*r.duration/d){var f=e.levels,h=Math.max(1,s.bw?s.bw/8:1e3*s.loaded/l),p=f[r.level],g=p.realBitrate?Math.max(p.realBitrate,p.bitrate):p.bitrate,v=s.total?s.total:Math.max(s.loaded,Math.round(r.duration*g/8)),m=t.currentTime,y=(v-s.loaded)/h,b=(a.BufferHelper.bufferInfo(t,m,e.config.maxBufferHole).end-m)/d;if(b<2*r.duration/d&&y>b){var _=void 0,E=void 0;for(E=r.level-1;E>o;E--){var T=f[E].realBitrate?Math.max(f[E].realBitrate,f[E].bitrate):f[E].bitrate;if((_=r.duration*T/(6.4*h))<b)break}_<y&&(u.logger.warn("loading too slow, abort fragment loading and switch to level "+E+":fragLoadedDelay["+E+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+_.toFixed(1)+"<"+y.toFixed(1)+":"+b.toFixed(1)),e.nextLoadLevel=E,this._bwEstimator.sample(l,s.loaded),n.abort(),this.clearTimer(),e.trigger(i.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:s}))}}}}},r.prototype.onFragLoaded=function(t){var r=t.frag;if("main"===r.type&&e.isFinite(r.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[r.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,o=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:o},n.realBitrate=Math.round(8*i/o)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},r.prototype.onFragBuffered=function(t){var r=t.stats,n=t.frag;if(!0!==r.aborted&&"main"===n.type&&e.isFinite(n.sn)&&(!n.bitrateTest||r.tload===r.tbuffered)){var i=r.tparsed-r.trequest;u.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(i,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},r.prototype.onError=function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(r.prototype,"nextAutoLevel",{get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_nextABRAutoLevel",{get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,o=e.media,s=this.lastLoadedFragLevel,l=this.fragCurrent?this.fragCurrent.duration:0,c=o?o.currentTime:0,d=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(a.BufferHelper.bufferInfo(o,c,n.maxBufferHole).end-c)/d,p=this._findBestLevel(s,l,f,i,t,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(p>=0)return p;u.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var g=l?Math.min(l,n.maxStarvationDelay):n.maxStarvationDelay,v=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===h){var y=this.bitrateTestDelay;if(y)g=(l?Math.min(l,n.maxLoadingDelay):n.maxLoadingDelay)-y,u.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),v=m=1}return p=this._findBestLevel(s,l,f,i,t,h+g,v,m,r),Math.max(p,0)},enumerable:!0,configurable:!0}),r.prototype._findBestLevel=function(e,t,r,n,i,o,a,s,l){for(var c=i;c>=n;c--){var d=l[c];if(d){var f=d.details,h=f?f.totalduration/f.fragments.length:t,p=!!f&&f.live,g=void 0;g=c<=e?a*r:s*r;var v=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,m=v*h/g;if(u.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(g)+"/"+v+"/"+h+"/"+o+"/"+m),g>v&&(!m||p&&!this.bitrateTestDelay||m<o))return c}}return-1},r}(o.default);t.default=d}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/utils/binary-search.js"),o=r("./src/utils/buffer-helper.js"),a=r("./src/demux/demuxer.js"),s=r("./src/events.js"),u=r("./src/controller/level-helper.js"),l=r("./src/utils/time-ranges.js"),c=r("./src/errors.js"),d=r("./src/utils/logger.js"),f=r("./src/utils/discontinuities.js"),h=r("./src/controller/fragment-tracker.js"),p=r("./src/loader/fragment.js"),g=r("./src/controller/base-stream-controller.js"),v=window.performance,m=function(t){function r(e,r){var n=t.call(this,e,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.AUDIO_TRACKS_UPDATED,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.BUFFER_RESET,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED,s.default.INIT_PTS_FOUND)||this;return n.fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state=g.State.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return n(r,t),r.prototype.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,this.videoTrackCC=r,d.logger.log("InitPTS for cc: "+r+" found from video track: "+n),this.state===g.State.WAITING_INIT_PTS&&this.tick())},r.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(d.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=g.State.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=g.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=g.State.STOPPED},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,d.logger.log("audio stream:"+t+"->"+e)}},enumerable:!0,configurable:!0}),r.prototype.doTick=function(){var t,r,n,a=this.hls,u=a.config;switch(this.state){case g.State.ERROR:case g.State.PAUSED:case g.State.BUFFER_FLUSHING:break;case g.State.STARTING:this.state=g.State.WAITING_TRACK,this.loadedmetadata=!1;break;case g.State.IDLE:var l=this.tracks;if(!l)break;if(!this.media&&(this.startFragRequested||!u.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var c=this.mediaBuffer?this.mediaBuffer:this.media,p=this.videoBuffer?this.videoBuffer:this.media,m=o.BufferHelper.bufferInfo(c,t,u.maxBufferHole),y=o.BufferHelper.bufferInfo(p,t,u.maxBufferHole),b=m.len,_=m.end,E=this.fragPrevious,T=Math.min(u.maxBufferLength,u.maxMaxBufferLength),S=Math.max(T,y.len),w=this.audioSwitch,A=this.trackId;if((b<S||w)&&A<l.length){if(void 0===(n=l[A].details)){this.state=g.State.WAITING_TRACK;break}if(!w&&this._streamEnded(m,n))return this.hls.trigger(s.default.BUFFER_EOS,{type:"audio"}),void(this.state=g.State.ENDED);var x=n.fragments,L=x.length,k=x[0].start,R=x[L-1].start+x[L-1].duration,O=void 0;if(w)if(n.live&&!n.PTSKnown)d.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),_=0;else if(_=t,n.PTSKnown&&t<k){if(!(m.end>k||m.nextStart))return;d.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=k+.05}if(n.initSegment&&!n.initSegment.data)O=n.initSegment;else if(_<=k){if(O=x[0],null!==this.videoTrackCC&&O.cc!==this.videoTrackCC&&(O=f.findFragWithCC(x,this.videoTrackCC)),n.live&&O.loadIdx&&O.loadIdx===this.fragLoadIdx){var D=m.nextStart?m.nextStart:k;return d.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(D+.05)),void(this.media.currentTime=D+.05)}}else{var P=void 0,C=u.maxFragLookUpTolerance,I=E?x[E.sn-x[0].sn+1]:void 0,M=function(e){var t=Math.min(C,e.duration);return e.start+e.duration-t<=_?1:e.start-t>_&&e.start?-1:0};_<R?(_>R-C&&(C=0),P=I&&!M(I)?I:i.default.search(x,M)):P=x[L-1],P&&(O=P,k=P.start,E&&O.level===E.level&&O.sn===E.sn&&(O.sn<n.endSN?(O=x[O.sn+1-n.startSN],d.logger.log("SN just loaded, load next one: "+O.sn)):O=null))}O&&(O.encrypted?(d.logger.log("Loading key for "+O.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+A),this.state=g.State.KEY_LOADING,a.trigger(s.default.KEY_LOADING,{frag:O})):(d.logger.log("Loading "+O.sn+", cc: "+O.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+A+", currentTime:"+t+",bufferEnd:"+_.toFixed(3)),this.fragCurrent=O,(w||this.fragmentTracker.getState(O)===h.FragmentState.NOT_LOADED)&&(this.startFragRequested=!0,e.isFinite(O.sn)&&(this.nextLoadPosition=O.start+O.duration),a.trigger(s.default.FRAG_LOADING,{frag:O}),this.state=g.State.FRAG_LOADING)))}break;case g.State.WAITING_TRACK:(r=this.tracks[this.trackId])&&r.details&&(this.state=g.State.IDLE);break;case g.State.FRAG_LOADING_WAITING_RETRY:var j=v.now(),N=this.retryDate,F=(c=this.media)&&c.seeking;(!N||j>=N||F)&&(d.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=g.State.IDLE);break;case g.State.WAITING_INIT_PTS:var U=this.videoTrackCC;if(void 0===this.initPTS[U])break;var B=this.waitingFragment;if(B){var G=B.frag.cc;U!==G?(r=this.tracks[this.trackId]).details&&r.details.live&&(d.logger.warn("Waiting fragment CC ("+G+") does not match video track CC ("+U+")"),this.waitingFragment=null,this.state=g.State.IDLE):(this.state=g.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=g.State.IDLE;break;case g.State.STOPPED:case g.State.FRAG_LOADING:case g.State.PARSING:case g.State.PARSED:case g.State.ENDED:}},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(d.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onAudioTracksUpdated=function(e){d.logger.log("audio tracks updated"),this.tracks=e.audioTracks},r.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=g.State.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=g.State.IDLE),this.tick()},r.prototype.onAudioTrackLoaded=function(t){var r=t.details,n=t.id,i=this.tracks[n],o=r.totalduration,a=0;if(d.logger.log("track "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+o),r.live){var s=i.details;s&&r.fragments.length>0?(u.mergeDetails(s,r),a=r.fragments[0].start,r.PTSKnown?d.logger.log("live audio playlist sliding:"+a.toFixed(3)):d.logger.log("live audio playlist - outdated PTS, unknown sliding")):(r.PTSKnown=!1,d.logger.log("live audio playlist - first load, unknown sliding"))}else r.PTSKnown=!1;if(i.details=r,!this.startFragRequested){if(-1===this.startPosition){var l=r.startTimeOffset;e.isFinite(l)?(d.logger.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===g.State.WAITING_TRACK&&(this.state=g.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===g.State.KEY_LOADING&&(this.state=g.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===g.State.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,o=i.totalduration,u=t.level,l=t.sn,c=t.cc,f=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===l)this.state=g.State.IDLE,h.tparsed=h.tbuffered=v.now(),i.initSegment.data=e.payload,this.hls.trigger(s.default.FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=g.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new a.default(this.hls,"audio"));var p=this.initPTS[c],m=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==p){this.pendingBuffering=!0,d.logger.log("Demuxing "+l+" of ["+i.startSN+" ,"+i.endSN+"],track "+u);this.demuxer.push(e.payload,m,f,null,t,o,!1,p)}else d.logger.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+l+" of ["+i.startSN+" ,"+i.endSN+"],track "+u),this.waitingFragment=e,this.state=g.State.WAITING_INIT_PTS}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===g.State.PARSING){var n=e.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(s.default.BUFFER_CODECS,n),d.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,a))}this.tick()}}},r.prototype.onFragParsingData=function(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&i.sn===n.sn&&i.level===n.level&&this.state===g.State.PARSING){var o=this.trackId,a=this.tracks[o],l=this.hls;e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(p.default.ElementaryStreamTypes.AUDIO),d.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),u.updateFragPTSDTS(a.details,n,t.startPTS,t.endPTS);var f=this.audioSwitch,h=this.media,v=!1;if(f&&h)if(h.readyState){var m=h.currentTime;d.logger.log("switching audio track : currentTime:"+m),m>=t.startPTS&&(d.logger.log("switching audio track : flushing all audio"),this.state=g.State.BUFFER_FLUSHING,l.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),v=!0,this.audioSwitch=!1,l.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:o}))}else this.audioSwitch=!1,l.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:o});var y=this.pendingData;if(!y)return d.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void l.trigger(s.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&y.push({type:t.type,data:e,parent:"audio",content:"data"})}),!v&&y.length&&(y.forEach(function(e){r.state===g.State.PARSING&&(r.pendingBuffering=!0,r.hls.trigger(s.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===g.State.PARSING&&(this.stats.tparsed=v.now(),this.state=g.State.PARSED,this._checkAppendedParsed())},r.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},r.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==g.State.PARSING&&t!==g.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==g.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=v.now(),r.trigger(s.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;d.logger.log("audio buffered : "+l.default.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=g.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag;if(!r||"audio"===r.type)switch(t.details){case c.ErrorDetails.FRAG_LOAD_ERROR:case c.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var i=this.fragLoadError;if(i?i++:i=1,i<=(u=this.config).fragLoadingMaxRetry){this.fragLoadError=i;var a=Math.min(Math.pow(2,i-1)*u.fragLoadingRetryDelay,u.fragLoadingMaxRetryTimeout);d.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=v.now()+a,this.state=g.State.FRAG_LOADING_WAITING_RETRY}else d.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=g.State.ERROR}break;case c.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case c.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case c.ErrorDetails.KEY_LOAD_ERROR:case c.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==g.State.ERROR&&(this.state=t.fatal?g.State.ERROR:g.State.IDLE,d.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case c.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===g.State.PARSING||this.state===g.State.PARSED)){var u,l=this.mediaBuffer,f=this.media.currentTime;if(l&&o.BufferHelper.isBuffered(l,f)&&o.BufferHelper.isBuffered(l,f+.5))(u=this.config).maxMaxBufferLength>=u.maxBufferLength&&(u.maxMaxBufferLength/=2,d.logger.warn("AudioStreamController: reduce max buffer length to "+u.maxMaxBufferLength+"s")),this.state=g.State.IDLE;else d.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=g.State.BUFFER_FLUSHING,this.hls.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"})}}},r.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(d.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach(function(t){e.hls.trigger(s.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=g.State.PARSED):(this.state=g.State.IDLE,this.fragPrevious=null,this.tick())},r}(g.default);t.default=m}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/task-loop.js"),a=r("./src/utils/logger.js"),s=r("./src/errors.js"),u=function(e){function t(t){var r=e.call(this,t,i.default.MANIFEST_LOADING,i.default.MANIFEST_PARSED,i.default.AUDIO_TRACK_LOADED,i.default.AUDIO_TRACK_SWITCHED,i.default.LEVEL_LOADED,i.default.ERROR)||this;return r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}return n(t,e),t.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},t.prototype.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(i.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},t.prototype.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)a.logger.warn("Invalid audio track id:",e.id);else{if(a.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},t.prototype.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},t.prototype.onError=function(e){e.type===s.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(a.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},Object.defineProperty(t.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),t.prototype._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)a.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)a.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];a.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,o=t.id;this.hls.trigger(i.default.AUDIO_TRACK_SWITCHING,{id:o,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)}},t.prototype.doTick=function(){this._updateTrack(this._trackId)},t.prototype._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var o=t.filter(function(e){return e.default});o.length?t=o:a.logger.warn("No default audio tracks defined")}var u=!1,l=function(){t.forEach(function(t){u||e.audioGroupId&&t.groupId!==e.audioGroupId||n&&n!==t.name||(e._setAudioTrack(t.id),u=!0)})};l(),u||(n=null,l()),u||(a.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},t.prototype._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live)&&!!r},t.prototype._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;a.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(i.default.AUDIO_TRACK_LOADING,{url:t,id:r})}},t.prototype._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,a.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},t.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,i=t.groupId;a.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+r+'" / "'+n+'"');for(var o=e,s=0;s<this.tracks.length;s++){if(!this.trackIdBlacklist[s])if(this.tracks[s].name===r){o=s;break}}o!==e?(a.logger.log("Attempting audio-track fallback id:",o,"group-id:",this.tracks[o].groupId),this._setAudioTrack(o)):a.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"')},t}(o.default);t.default=u},"./src/controller/base-stream-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/task-loop.js"),o=r("./src/controller/fragment-tracker.js"),a=r("./src/utils/buffer-helper.js"),s=r("./src/utils/logger.js");t.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var u=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return n(i,r),i.prototype.doTick=function(){},i.prototype.startLoad=function(){},i.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=t.State.STOPPED},i.prototype._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var i=n.getState(r);return i===o.FragmentState.PARTIAL||i===o.FragmentState.OK}return!1},i.prototype.onMediaSeeking=function(){var r=this.config,n=this.media,i=this.mediaBuffer,o=this.state,u=n?n.currentTime:null,l=a.BufferHelper.bufferInfo(i||n,u,this.config.maxBufferHole);if(e.isFinite(u)&&s.logger.log("media seeking to "+u.toFixed(3)),o===t.State.FRAG_LOADING){var c=this.fragCurrent;if(0===l.len&&c){var d=r.maxFragLookUpTolerance,f=c.start-d,h=c.start+c.duration+d;u<f||u>h?(c.loader&&(s.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),c.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=t.State.IDLE):s.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else o===t.State.ENDED&&(0===l.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=t.State.IDLE);n&&(this.lastCurrentTime=u),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=u),this.tick()},i.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.prototype.onHandlerDestroying=function(){this.stopLoad(),r.prototype.onHandlerDestroying.call(this)},i.prototype.onHandlerDestroyed=function(){this.state=t.State.STOPPED,this.fragmentTracker=null},i}(i.default);t.default=u}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/logger.js"),s=r("./src/errors.js"),u=r("./src/utils/mediasource-helper.js").getMediaSource(),l=function(t){function r(e){var r=t.call(this,e,i.default.MEDIA_ATTACHING,i.default.MEDIA_DETACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_RESET,i.default.BUFFER_APPENDING,i.default.BUFFER_CODECS,i.default.BUFFER_EOS,i.default.BUFFER_FLUSHING,i.default.LEVEL_PTS_UPDATED,i.default.LEVEL_UPDATED)||this;return r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r.bufferCodecEventsExpected=0,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return n(r,t),r.prototype.destroy=function(){o.default.prototype.destroy.call(this)},r.prototype.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-e.start)>.1){var i=n.updating;try{n.abort()}catch(e){a.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(a.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},r.prototype.onManifestParsed=function(e){this.bufferCodecEventsExpected=e.altAudio?2:1,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new u;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},r.prototype.onMediaDetaching=function(){a.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){a.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):a.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(i.default.MEDIA_DETACHED)},r.prototype.onMediaSourceOpen=function(){a.logger.log("media source opened"),this.hls.trigger(i.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},r.prototype.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.prototype.onMediaSourceClose=function(){a.logger.log("media source closed")},r.prototype.onMediaSourceEnded=function(){a.logger.log("media source ended")},r.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;a.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce(function(e,r){return r.parent===t?e+1:e},0),n={},o=this.sourceBuffer;for(var s in o)n[s]=o[s].buffered;this.hls.trigger(i.default.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===r&&this.flushLiveBackBuffer()},r.prototype.onSBUpdateError=function(e){a.logger.error("sourceBuffer error:",e),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.prototype.onBufferCodecs=function(e){var t=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(e).forEach(function(r){t.pendingTracks[r]=e[r]});var r=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),r&&"open"===r.readyState&&this.checkPendingTracks()}},r.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var n in e)if(!t[n]){var o=e[n],u=o.levelCodec||o.codec,l=o.container+";codecs="+u;a.logger.log("creating sourceBuffer("+l+")");try{var c=t[n]=r.addSourceBuffer(l);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[n]={codec:u,container:o.container},o.buffer=c}catch(e){a.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:l})}}this.hls.trigger(i.default.BUFFER_CREATED,{tracks:e})},r.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.prototype.onBufferAppendFail=function(e){a.logger.error("sourceBuffer error:",e.event),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferEos=function(e){var t=this.sourceBuffer,r=e.type;for(var n in t)r&&n!==r||t[n].ended||(t[n].ended=!0,a.logger.log(n+" sourceBuffer now EOS"));this.checkEos()},r.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var n=e[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}a.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){a.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},r.prototype.flushLiveBackBuffer=function(){if(this._live){var e=this.hls.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=t-Math.max(e,this._levelTargetDuration),o=n.length-1;o>=0;o--){var a=n[o],s=r[a].buffered;s.length>0&&i>s.start(0)&&this.removeBufferRange(a,r[a],0,i)}}},r.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.prototype.updateMediaElementDuration=function(){var t,r=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===r.liveDurationInfinity?(a.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!e.isFinite(t))&&(a.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r)t+=r[n].buffered.length}catch(e){a.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(i.default.BUFFER_FLUSHED)}},r.prototype.doAppending=function(){var e=this.hls,t=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(this.media.error)return this.segments=[],void a.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(t&&t.length){var n=t.shift();try{var o=r[n.type];o?o.updating?t.unshift(n):(o.ended=!1,this.parent=n.parent,o.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(r){a.logger.error("error while trying to append buffer:"+r.message),t.unshift(n);var u={type:s.ErrorTypes.MEDIA_ERROR,parent:n.parent};22!==r.code?(this.appendError?this.appendError++:this.appendError=1,u.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(a.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],u.fatal=!0,e.trigger(i.default.ERROR,u)):(u.fatal=!1,e.trigger(i.default.ERROR,u))):(this.segments=[],u.details=s.ErrorDetails.BUFFER_FULL_ERROR,u.fatal=!1,e.trigger(i.default.ERROR,u))}}}},r.prototype.flushBuffer=function(e,t,r){var n,i=this.sourceBuffer;if(Object.keys(i).length){if(a.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var o in i)if(!r||o===r){if((n=i[o]).ended=!1,n.updating)return a.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(o,n,e,t))return this.flushBufferCounter++,!1}}else a.logger.warn("abort flushing too many retries");a.logger.log("buffer flushed")}return!0},r.prototype.removeBufferRange=function(e,t,r,n){try{for(var i=0;i<t.buffered.length;i++){var o=t.buffered.start(i),s=t.buffered.end(i),u=Math.max(o,r),l=Math.min(s,n);if(Math.min(l,s)-u>.5)return a.logger.log("sb remove "+e+" ["+u+","+l+"], of ["+o+","+s+"], pos:"+this.media.currentTime),t.remove(u,l),!0}}catch(e){a.logger.warn("removeBufferRange failed",e)}return!1},r}(o.default);t.default=l}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=function(t){function r(r){var n=t.call(this,r,i.default.FPS_DROP_LEVEL_CAPPING,i.default.MEDIA_ATTACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_CODECS,i.default.MEDIA_DETACHING)||this;return n.autoLevelCapping=e.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}return n(r,t),r.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},r.prototype.onFpsDropLevelCapping=function(e){r.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},r.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},r.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onLevelsUpdated=function(e){this.levels=e.levels},r.prototype.onMediaDetaching=function(){this._stopCapping()},r.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.prototype.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,i){return r.isLevelAllowed(i,t.restrictedLevels)&&i<=e});return r.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=e.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=e.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(r.prototype,"mediaWidth",{get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaHeight",{get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r,"contentScaleFactor",{get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e},enumerable:!0,configurable:!0}),r.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},r.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n=function(e,t){return!t||(e.width!==t.width||e.height!==t.height)},i=e.length-1,o=0;o<e.length;o+=1){var a=e[o];if((a.width>=t||a.height>=r)&&n(a,e[o+1])){i=o;break}}return i},r}(r("./src/event-handler.js").default);t.default=o}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/event-handler.js"),o=r("./src/events.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),u=window.XMLHttpRequest,l="com.widevine.alpha",c="com.microsoft.playready",d=function(e){function t(t){var r=e.call(this,t,o.default.MEDIA_ATTACHED,o.default.MANIFEST_PARSED)||this;return r._widevineLicenseUrl=t.config.widevineLicenseUrl,r._licenseXhrSetup=t.config.licenseXhrSetup,r._emeEnabled=t.config.emeEnabled,r._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._isMediaEncrypted=!1,r._requestLicenseFailureCount=0,r}return n(t,e),t.prototype.getLicenseServerUrl=function(e){var t;switch(e){case l:t=this._widevineLicenseUrl;break;default:t=null}return t||(s.logger.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},t.prototype._attemptKeySystemAccess=function(e,t,r){var n=this,i=function(e,t,r){switch(e){case l:return function(e,t,r){var n={videoCapabilities:[]};return t.forEach(function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[n]}(0,r);default:throw Error("Unknown key-system: "+e)}}(e,0,r);i?(s.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,i).then(function(t){n._onMediaKeySystemAccessObtained(e,t)}).catch(function(t){s.logger.error('Failed to obtain key-system "'+e+'" access:',t)})):s.logger.warn("Can not create config for key-system (maybe because platform is not supported):",e)},Object.defineProperty(t.prototype,"requestMediaKeySystemAccess",{get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),t.prototype._onMediaKeySystemAccessObtained=function(e,t){var r=this;s.logger.log('Access for key-system "'+e+'" obtained');var n={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n),t.createMediaKeys().then(function(t){n.mediaKeys=t,s.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated()}).catch(function(e){s.logger.error("Failed to create media-keys:",e)})},t.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},t.prototype._onNewMediaKeySession=function(e){var t=this;s.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",function(r){t._onKeySessionMessage(e,r.message)},!1)},t.prototype._onKeySessionMessage=function(e,t){s.logger.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){s.logger.log("Received license data, updating key-session"),e.update(t)})},t.prototype._onMediaEncrypted=function(e,t){s.logger.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return s.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});s.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return s.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)s.logger.warn("Key-Session already initialized but requested again");else{var r=t.mediaKeysSession;r||(s.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var n=this._mediaEncryptionInitDataType,i=this._mediaEncryptionInitData;s.logger.log('Generating key-session request for "'+n+'" init data type'),t.mediaKeysSessionInitialized=!0,r.generateRequest(n,i).then(function(){s.logger.debug("Key-session generation succeeded")}).catch(function(t){s.logger.error("Error generating key-session request:",t),e.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},t.prototype._createLicenseXhr=function(e,t,r){var n=new u,i=this._licenseXhrSetup;try{if(i)try{i(n,e)}catch(t){n.open("POST",e,!0),i(n,e)}n.readyState||n.open("POST",e,!0)}catch(e){return s.logger.error("Error setting up key-system license XHR",e),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},t.prototype._onLicenseRequestReadyStageChange=function(e,t,r,n){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,s.logger.log("License request succeeded"),n(e.response);else{if(s.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3){var i=3-this._requestLicenseFailureCount+1;return s.logger.warn("Retrying license request, "+i+" attempts left"),void this._requestLicense(r,n)}this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(e,t){var r;return e.mediaKeySystemDomain===c?s.logger.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===l?r=t:s.logger.error("Unsupported key-system:",e.mediaKeySystemDomain),r},t.prototype._requestLicense=function(e,t){s.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return s.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,e,t);s.logger.log("Sending license request to URL: "+n),i.send(this._generateLicenseRequestChallenge(r,e))},t.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var r=e.media;this._media=r,r.addEventListener("encrypted",function(e){t._onMediaEncrypted(e.initDataType,e.initData)})}},t.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),r=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(l,t,r)}},t}(i.default);t.default=d},"./src/controller/fps-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/logger.js"),s=window.performance,u=function(e){function t(t){return e.call(this,t,i.default.MEDIA_ATTACHING)||this}return n(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,r){var n=s.now();if(t){if(this.lastTime){var o=n-this.lastTime,u=r-this.lastDroppedFrames,l=t-this.lastDecodedFrames,c=1e3*u/o,d=this.hls;if(d.trigger(i.default.FPS_DROP,{currentDropped:u,currentDecoded:l,totalDroppedFrames:r}),c>0&&u>d.config.fpsDroppedMonitoringThreshold*l){var f=d.currentLevel;a.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===d.autoLevelCapping||d.autoLevelCapping>=f)&&(f-=1,d.trigger(i.default.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:d.currentLevel}),d.autoLevelCapping=f,d.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(o.default);t.default=u},"./src/controller/fragment-finders.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/binary-search.js");function i(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function o(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.endProgramDateTime-n>e}t.findFragmentByPDT=function(t,r,n){if(!Array.isArray(t)||!t.length||!e.isFinite(r))return null;if(r<t[0].programDateTime)return null;if(r>=t[t.length-1].endProgramDateTime)return null;n=n||0;for(var i=0;i<t.length;++i){var a=t[i];if(o(r,n,a))return a}return null},t.findFragmentByPTS=function(e,t,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a=e?t[e.sn-t[0].sn+1]:null;return a&&!i(r,o,a)?a:n.default.search(t,i.bind(null,r,o))},t.fragmentWithinToleranceTest=i,t.pdtWithinToleranceTest=o}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/event-handler.js"),o=r("./src/events.js");t.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var a=function(r){function a(e){var t=r.call(this,e,o.default.BUFFER_APPENDED,o.default.FRAG_BUFFERED,o.default.FRAG_LOADED)||this;return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}return n(a,r),a.prototype.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,i.default.prototype.destroy.call(this),r.prototype.destroy.call(this)},a.prototype.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter(function(n){var i=r[n];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var o=i.body;return o.startPTS<=e&&e<=o.endPTS});if(0===n.length)return null;var i=n.pop();return r[i].body},a.prototype.detectEvictedFragments=function(e,t){var r,n,i=this;Object.keys(this.fragments).forEach(function(o){var a=i.fragments[o];if(!0===a.buffered){var s=a.range[e];if(s){r=s.time;for(var u=0;u<r.length;u++)if(n=r[u],!1===i.isTimeBuffered(n.startPTS,n.endPTS,t)){i.removeFragment(a.body);break}}}})},a.prototype.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(e.hasElementaryStream(r)){var i=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}}))},a.prototype.getBufferedTimes=function(e,t,r){for(var n,i,o=[],a=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e>=n&&t<=i){o.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<i&&t>n)o.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),a=!0;else if(t<=n)break}return{time:o,partial:a}},a.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},a.prototype.getPartialFragment=function(e){var t,r,n,i=this,o=null,a=0;return Object.keys(this.fragments).forEach(function(s){var u=i.fragments[s];i.isPartial(u)&&(r=u.body.startPTS-i.bufferPadding,n=u.body.endPTS+i.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),a<=t&&(o=u.body,a=t)))}),o},a.prototype.getState=function(e){var r=this.getFragmentKey(e),n=this.fragments[r],i=t.FragmentState.NOT_LOADED;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?t.FragmentState.PARTIAL:t.FragmentState.OK:t.FragmentState.APPENDING),i},a.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},a.prototype.isTimeBuffered=function(e,t,r){for(var n,i,o=0;o<r.length;o++){if(n=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},a.prototype.onFragLoaded=function(t){var r=t.frag;e.isFinite(r.sn)&&!r.bitrateTest&&(this.fragments[this.getFragmentKey(r)]={body:r,range:Object.create(null),buffered:!1})},a.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)})},a.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},a.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},a.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},a.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},a}(i.default);t.FragmentTracker=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/buffer-helper.js"),i=r("./src/errors.js"),o=r("./src/events.js"),a=r("./src/utils/logger.js"),s=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.stallReported=!1}return e.prototype.poll=function(e,t){var r=this.config,i=this.media,o=i.currentTime,s=window.performance.now();if(o!==e)return this.stallReported&&(a.logger.warn("playback not stuck anymore @"+o+", after "+Math.round(s-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(i.ended||!i.buffered.length||i.readyState>2||i.seeking&&n.BufferHelper.isBuffered(i,o))){var u=s-this.stalled,l=n.BufferHelper.bufferInfo(i,o,r.maxBufferHole);this.stalled?(u>=1e3&&this._reportStall(l.len),this._tryFixBufferStall(l,u)):this.stalled=s}},e.prototype._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,i=this.media.currentTime,o=n.getPartialFragment(i);o&&this._trySkipBufferHole(o),e.len>.5&&t>1e3*r.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,a.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e.prototype._trySkipBufferHole=function(e){for(var t=this.hls,r=this.media,n=r.currentTime,s=0,u=0;u<r.buffered.length;u++){var l=r.buffered.start(u);if(n>=s&&n<l)return r.currentTime=Math.max(l,r.currentTime+.1),a.logger.warn("skipping hole, adjusting currentTime from "+n+" to "+r.currentTime),this.stalled=null,void t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+r.currentTime,frag:e});s=r.buffered.end(u)}},e.prototype._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,s=(this.nudgeRetry||0)+1;if(this.nudgeRetry=s,s<e.nudgeMaxRetry){var u=n+s*e.nudgeOffset;a.logger.log("adjust currentTime from "+n+" to "+u),r.currentTime=u,t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else a.logger.error("still stuck in high buffer @"+n+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();t.default=s},"./src/controller/id3-track-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/demux/id3.js"),s=r("./src/utils/texttrack-utils.js"),u=function(e){function t(t){var r=e.call(this,t,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_METADATA)||this;return r.id3Track=void 0,r.media=void 0,r}return n(t,e),t.prototype.destroy=function(){o.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){s.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return s.sendAddTrackEvent(r,this.media),r}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var o=a.default.getID3Frames(r[i].data);if(o){var s=r[i].pts,u=i<r.length-1?r[i+1].pts:t.endPTS;s===u&&(u+=1e-4);for(var l=0;l<o.length;l++){var c=o[l];if(!a.default.isTimeStampFrame(c)){var d=new n(s,u,"");d.value=c,this.id3Track.addCue(d)}}}}},t}(o.default);t.default=u},"./src/controller/level-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i,o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/logger.js"),u=r("./src/errors.js"),l=r("./src/utils/codecs.js"),c=r("./src/controller/level-helper.js"),d=(window.performance,function(e){function t(t){var r=e.call(this,t,o.default.MANIFEST_LOADED,o.default.LEVEL_LOADED,o.default.AUDIO_TRACK_SWITCHED,o.default.FRAG_LOADED,o.default.ERROR)||this;return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,i=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}return n(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t,r=[],n=[],a={},d=null,f=!1,h=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,f=f||!!e.videoCodec,h=h||!!e.audioCodec,i&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(d=a[e.bitrate])?d.url.push(e.url):(e.url=[e.url],e.urlId=0,a[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&(h=!0,c.addGroupId(d||e,"audio",t.AUDIO)),t.SUBTITLES&&c.addGroupId(d||e,"text",t.SUBTITLES))}),f&&h&&(r=r.filter(function(e){return!!e.videoCodec})),r=r.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||l.isCodecSupportedInMp4(t,"audio"))&&(!r||l.isCodecSupportedInMp4(r,"video"))}),e.audioTracks&&(n=e.audioTracks.filter(function(e){return!e.audioCodec||l.isCodecSupportedInMp4(e.audioCodec,"audio")})).forEach(function(e,t){e.id=t}),r.length>0){t=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var p=0;p<r.length;p++)if(r[p].bitrate===t){this._firstLevel=p,s.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(o.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:h,video:f,altAudio:n.some(function(e){return!!e.url})})}else this.hls.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){s.logger.log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(o.default.LEVEL_SWITCHING,n)}var i=t[e],a=i.details;if(!a||a.live){var l=i.urlId;r.trigger(o.default.LEVEL_LOADING,{url:i.url[l],level:e,id:l})}}else r.trigger(o.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(e){this._firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e},enumerable:!0,configurable:!0}),t.prototype.onError=function(e){if(e.fatal)e.type===u.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,n=!1;switch(e.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case u.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,n)}},t.prototype.recoverLevel=function(e,t,r,n){var i,o,a,u=this,l=this.hls.config,c=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=n,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return s.logger.error("level controller, cannot recover from "+c+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);o=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return u.loadLevel()},o),e.levelRetry=!0,this.levelRetryCount++,s.logger.warn("level controller, "+c+", retry in "+o+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&((i=d.url.length)>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,s.logger.warn("level controller, "+c+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(a=0===t?this._levels.length-1:t-1,s.logger.warn("level controller, "+c+": switch to "+a),this.hls.nextAutoLevel=this.currentLevelIndex=a):n&&(s.logger.warn("level controller, "+c+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,r=e.level,n=e.details;if(r===this.currentLevelIndex){var i=this._levels[r];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live){var o=c.computeReloadInterval(i.details,n,e.stats.trequest);s.logger.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},o)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===t){n=i;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},t.prototype.loadLevel=function(){if(s.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];s.logger.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(o.default.LEVEL_LOADING,{url:n,level:t,id:r})}}},Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)},enumerable:!0,configurable:!0}),t}(a.default));t.default=d},"./src/controller/level-helper.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js");function i(t,r,i){var o=t[r],a=t[i],s=a.startPTS;e.isFinite(s)?i>r?(o.duration=s-o.start,o.duration<0&&n.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!")):(a.duration=o.start-s,a.duration<0&&n.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):a.start=i>r?o.start+o.duration:Math.max(o.start-a.duration,0)}function o(t,r,n,o,a,s){var u=n;if(e.isFinite(r.startPTS)){var l=Math.abs(r.startPTS-n);e.isFinite(r.deltaPTS)?r.deltaPTS=Math.max(l,r.deltaPTS):r.deltaPTS=l,u=Math.max(n,r.startPTS),n=Math.min(n,r.startPTS),o=Math.max(o,r.endPTS),a=Math.min(a,r.startDTS),s=Math.max(s,r.endDTS)}var c=n-r.start;r.start=r.startPTS=n,r.maxStartPTS=u,r.endPTS=o,r.startDTS=a,r.endDTS=s,r.duration=o-n;var d,f,h,p=r.sn;if(!t||p<t.startSN||p>t.endSN)return 0;for(d=p-t.startSN,(f=t.fragments)[d]=r,h=d;h>0;h--)i(f,h,h-1);for(h=d;h<f.length-1;h++)i(f,h,h+1);return t.PTSKnown=!0,c}function a(e,t,r){if(e&&t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,o=t.startSN-e.startSN,a=n;a<=i;a++){var s=e.fragments[o+a],u=t.fragments[a];if(!s||!u)break;r(s,u,a)}}function s(e,t){var r=t.startSN-e.startSN,n=e.fragments,i=t.fragments;if(!(r<0||r>n.length))for(var o=0;o<i.length;o++)i[o].start+=n[r].start}t.addGroupId=function(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}},t.updatePTS=i,t.updateFragPTSDTS=o,t.mergeDetails=function(t,r){r.initSegment&&t.initSegment&&(r.initSegment=t.initSegment);var i,u=0;if(a(t,r,function(t,n){u=t.cc-n.cc,e.isFinite(t.startPTS)&&(n.start=n.startPTS=t.startPTS,n.endPTS=t.endPTS,n.duration=t.duration,n.backtracked=t.backtracked,n.dropped=t.dropped,i=n),r.PTSKnown=!0}),r.PTSKnown){if(u){n.logger.log("discontinuity sliding from playlist, take drift into account");for(var l=r.fragments,c=0;c<l.length;c++)l[c].cc+=u}i?o(r,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):s(t,r),r.PTSKnown=t.PTSKnown}},t.mergeSubtitlePlaylists=function(e,t,r){void 0===r&&(r=0);var n=-1;a(e,t,function(e,t,r){t.start=e.start,n=r});var i=t.fragments;if(n<0)i.forEach(function(e){e.start+=r});else for(var o=n+1;o<i.length;o++)i[o].start=i[o-1].start+i[o-1].duration},t.mapFragmentIntersection=a,t.adjustSliding=s,t.computeReloadInterval=function(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=n/2;return e&&t.endSN===e.endSN&&(n=i),r&&(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/utils/binary-search.js"),o=r("./src/utils/buffer-helper.js"),a=r("./src/demux/demuxer.js"),s=r("./src/events.js"),u=r("./src/controller/fragment-tracker.js"),l=r("./src/loader/fragment.js"),c=r("./src/loader/playlist-loader.js"),d=r("./src/controller/level-helper.js"),f=r("./src/utils/time-ranges.js"),h=r("./src/errors.js"),p=r("./src/utils/logger.js"),g=r("./src/utils/discontinuities.js"),v=r("./src/controller/fragment-finders.js"),m=r("./src/controller/gap-controller.js"),y=r("./src/controller/base-stream-controller.js"),b=function(t){function r(e,r){var n=t.call(this,e,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.MANIFEST_LOADING,s.default.MANIFEST_PARSED,s.default.LEVEL_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_LOAD_EMERGENCY_ABORTED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_SWITCHED,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED)||this;return n.fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state=y.State.STOPPED,n.stallReported=!1,n.gapController=null,n}return n(r,t),r.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(p.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=y.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=y.State.STOPPED},r.prototype.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},r.prototype.doTick=function(){switch(this.state){case y.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case y.State.IDLE:this._doTickIdle();break;case y.State.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=y.State.IDLE);break;case y.State.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(p.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=y.State.IDLE);break;case y.State.ERROR:case y.State.STOPPED:case y.State.FRAG_LOADING:case y.State.PARSING:case y.State.PARSED:case y.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},r.prototype._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var u,l=a.bitrate;u=l?Math.max(8*t.maxBufferSize/l,t.maxBufferLength):t.maxBufferLength,u=Math.min(u,t.maxMaxBufferLength);var c=o.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),d=c.len;if(!(d>=u)){p.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+u.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var f=a.details;if(!f||f.live&&this.levelLastLoaded!==i)this.state=y.State.WAITING_LEVEL;else{if(this._streamEnded(c,f)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(s.default.BUFFER_EOS,h),void(this.state=y.State.ENDED)}this._fetchPayloadOrEos(n,c,f)}}}}},r.prototype._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious,i=this.level,o=r.fragments,a=o.length;if(0!==a){var s,u=o[0].start,l=o[a-1].start+o[a-1].duration,c=t.end;if(r.initSegment&&!r.initSegment.data)s=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(a<d)return void p.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(s=this._ensureFragmentAtLivePoint(r,c,u,l,n,o,a)))return}else c<u&&(s=o[0]);s||(s=this._findFragment(u,n,a,o,c,l,r)),s&&(s.encrypted?(p.logger.log("Loading key for "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i),this._loadKey(s)):(p.logger.log("Loading "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(s)))}},r.prototype._ensureFragmentAtLivePoint=function(e,t,r,n,o,a,s){var u,l=this.hls.config,c=this.media,d=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-l.maxFragLookUpTolerance,n-d)){var f=this.liveSyncPosition=this.computeLivePosition(r,e);p.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,c&&c.readyState&&c.duration>f&&(c.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>n&&c&&c.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(o)if(e.hasProgramDateTime)p.logger.log("live playlist, switching playlist, load frag with same PDT: "+o.programDateTime),u=v.findFragmentByPDT(a,o.endProgramDateTime,l.maxFragLookUpTolerance);else{var h=o.sn+1;if(h>=e.startSN&&h<=e.endSN){var g=a[h-e.startSN];o.cc===g.cc&&(u=g,p.logger.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=i.default.search(a,function(e){return o.cc-e.cc}))&&p.logger.log("live playlist, switching playlist, load frag with same CC: "+u.sn)}u||(u=a[Math.min(s-1,Math.round(s/2))],p.logger.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u},r.prototype._findFragment=function(e,t,r,n,i,o,a){var s,u=this.hls.config;if(i<o){var l=i>o-u.maxFragLookUpTolerance?0:u.maxFragLookUpTolerance;s=v.findFragmentByPTS(t,n,i,l)}else s=n[r-1];if(s){var c=s.sn-a.startSN,d=t&&s.level===t.level,f=n[c-1],h=n[c+1];if(t&&s.sn===t.sn)if(d&&!s.backtracked)if(s.sn<a.endSN){var g=t.deltaPTS;g&&g>u.maxBufferHole&&t.dropped&&c?(s=f,p.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=h,p.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(h&&h.backtracked?(p.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+h.sn),s=h):(p.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f).backtracked=!0:c&&(s=null)))}return s},r.prototype._loadKey=function(e){this.state=y.State.KEY_LOADING,this.hls.trigger(s.default.KEY_LOADING,{frag:e})},r.prototype._loadFragment=function(t){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,e.isFinite(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||r===u.FragmentState.NOT_LOADED||r===u.FragmentState.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(s.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new a.default(this.hls,"main")),this.state=y.State.FRAG_LOADING):r===u.FragmentState.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,p.logger.log("main stream:"+t+"->"+e),this.hls.trigger(s.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},enumerable:!0,configurable:!0}),r.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,c.default.LevelType.MAIN)},Object.defineProperty(r.prototype,"currentLevel",{get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nextBufferedFrag",{get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null},enumerable:!0,configurable:!0}),r.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},Object.defineProperty(r.prototype,"nextLevel",{get:function(){var e=this.nextBufferedFrag;return e?e.level:-1},enumerable:!0,configurable:!0}),r.prototype._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),o.BufferHelper.isBuffered(r,t)?e=this.getBufferedFrag(t):o.BufferHelper.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(s.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(s.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},r.prototype.immediateLevelSwitch=function(){if(p.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,r=void 0;t?(r=t.paused,t.pause()):r=!0,this.previouslyPaused=r}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)},r.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,o.BufferHelper.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},r.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var r,n=void 0,i=void 0;if((r=this.getBufferedFrag(t.currentTime))&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),t.paused)n=0;else{var o=this.hls.nextLoadLevel,a=this.levels[o],s=this.fragLastKbps;n=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(t.currentTime+n))&&(i=this.followingBufferedFrag(i))){var u=this.fragCurrent;u&&u.loader&&u.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,e.POSITIVE_INFINITY)}}},r.prototype.flushMainBuffer=function(e,t){this.state=y.State.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(s.default.BUFFER_FLUSHING,r)},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new m.default(r,t,this.fragmentTracker,this.hls)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(p.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeked=function(){var t=this.media,r=t?t.currentTime:void 0;e.isFinite(r)&&p.logger.log("media seeked to "+r.toFixed(3)),this.tick()},r.prototype.onManifestLoading=function(){p.logger.log("trigger BUFFER_RESET"),this.hls.trigger(s.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&p.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},r.prototype.onLevelLoaded=function(t){var r=t.details,n=t.level,i=this.levels[this.levelLastLoaded],o=this.levels[n],a=r.totalduration,u=0;if(p.logger.log("level "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+a),r.live){var l=o.details;l&&r.fragments.length>0?(d.mergeDetails(l,r),u=r.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(u,l),r.PTSKnown&&e.isFinite(u)?p.logger.log("live playlist sliding:"+u.toFixed(3)):(p.logger.log("live playlist - outdated PTS, unknown sliding"),g.alignStream(this.fragPrevious,i,r))):(p.logger.log("live playlist - first load, unknown sliding"),r.PTSKnown=!1,g.alignStream(this.fragPrevious,i,r))}else r.PTSKnown=!1;if(o.details=r,this.levelLastLoaded=n,this.hls.trigger(s.default.LEVEL_UPDATED,{details:r,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=r.startTimeOffset;e.isFinite(c)?(c<0&&(p.logger.log("negative start time offset "+c+", count from end of last fragment"),c=u+a+c),p.logger.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c):r.live?(this.startPosition=this.computeLivePosition(u,r),p.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===y.State.WAITING_LEVEL&&(this.state=y.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===y.State.KEY_LOADING&&(this.state=y.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,n=this.levels,i=this.media,o=e.frag;if(this.state===y.State.FRAG_LOADING&&t&&"main"===o.type&&o.level===t.level&&o.sn===t.sn){var u=e.stats,l=n[t.level],c=l.details;if(this.bitrateTest=!1,this.stats=u,p.logger.log("Loaded "+t.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+t.level),o.bitrateTest&&r.nextLoadLevel)this.state=y.State.IDLE,this.startFragRequested=!1,u.tparsed=u.tbuffered=window.performance.now(),r.trigger(s.default.FRAG_BUFFERED,{stats:u,frag:t,id:"main"}),this.tick();else if("initSegment"===o.sn)this.state=y.State.IDLE,u.tparsed=u.tbuffered=window.performance.now(),c.initSegment.data=e.payload,r.trigger(s.default.FRAG_BUFFERED,{stats:u,frag:t,id:"main"}),this.tick();else{p.logger.log("Parsing "+t.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+t.level+", cc "+t.cc),this.state=y.State.PARSING,this.pendingBuffering=!0,this.appended=!1,o.bitrateTest&&(o.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:o}));var d=!(i&&i.seeking)&&(c.PTSKnown||!c.live),f=c.initSegment?c.initSegment.data:[],h=this._getAudioCodec(l);(this.demuxer=this.demuxer||new a.default(this.hls,"main")).push(e.payload,f,h,l.videoCodec,t,c.totalduration,d)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===y.State.PARSING){var n=e.tracks,i=void 0,o=void 0;if(n.audio&&this.altAudio&&delete n.audio,o=n.audio){var a=this.levels[this.level].audioCodec,u=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===u.indexOf("firefox")&&(a="mp4a.40.5"),-1!==u.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",p.logger.log("Android: force audio codec to "+a)),o.levelCodec=a,o.id=e.id}for(i in(o=n.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=e.id),this.hls.trigger(s.default.BUFFER_CODECS,n),n){o=n[i],p.logger.log("main track:"+i+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var l=o.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},r.prototype.onFragParsingData=function(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"main"===t.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===y.State.PARSING){var o=this.levels[this.level],a=n;if(e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&a.addElementaryStream(l.default.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&a.addElementaryStream(l.default.ElementaryStreamTypes.VIDEO),p.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)p.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var u=o.details;if(!u||a.sn!==u.startSN)return p.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=y.State.IDLE,this.fragPrevious=a,void this.tick();p.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var c=d.updateFragPTSDTS(o.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),f=this.hls;f.trigger(s.default.LEVEL_PTS_UPDATED,{details:o.details,level:this.level,drift:c,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&r.state===y.State.PARSING&&(r.appended=!0,r.pendingBuffering=!0,f.trigger(s.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===y.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=y.State.PARSED,this._checkAppendedParsed())},r.prototype.onAudioTrackSwitching=function(t){var r=!!t.url,n=t.id;if(!r){if(this.mediaBuffer!==this.media){p.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(p.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=y.State.IDLE}var o=this.hls;o.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),o.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},r.prototype.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(p.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},r.prototype.onBufferCreated=function(e){var t,r,n=e.tracks,i=!1;for(var o in n){var a=n[o];"main"===a.id?(r=o,t=a,"video"===o&&(this.videoBuffer=n[o].buffer)):i=!0}i&&t?(p.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},r.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==y.State.PARSING&&t!==y.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==y.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;p.logger.log("main buffered : "+f.default.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(s.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=y.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag||this.fragCurrent;if(!r||"main"===r.type){var n=!!this.media&&o.BufferHelper.isBuffered(this.media,this.media.currentTime)&&o.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);p.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=y.State.FRAG_LOADING_WAITING_RETRY}else p.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=y.State.ERROR;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==y.State.ERROR&&(t.fatal?(this.state=y.State.ERROR,p.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==y.State.WAITING_LEVEL||(this.state=y.State.IDLE));break;case h.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==y.State.PARSING&&this.state!==y.State.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=y.State.IDLE):(p.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)))}}},r.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,p.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},r.prototype._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},r.prototype.onFragLoadEmergencyAborted=function(){this.state=y.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(l.default.ElementaryStreamTypes.VIDEO,e.buffered),this.state=y.State.IDLE,this.fragPrevious=null},r.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.prototype.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},r.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&&(p.logger.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+t+" "),e.currentTime=r)},r.prototype._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},Object.defineProperty(r.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e},enumerable:!0,configurable:!0}),r}(y.default);t.default=b}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/utils/logger.js"),a=r("./src/crypt/decrypter.js"),s=r("./src/utils/buffer-helper.js"),u=r("./src/controller/fragment-finders.js"),l=r("./src/controller/fragment-tracker.js"),c=r("./src/controller/base-stream-controller.js"),d=r("./src/controller/level-helper.js"),f=window.performance,h=function(e){function t(t,r){var n=e.call(this,t,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.ERROR,i.default.KEY_LOADED,i.default.FRAG_LOADED,i.default.SUBTITLE_TRACKS_UPDATED,i.default.SUBTITLE_TRACK_SWITCH,i.default.SUBTITLE_TRACK_LOADED,i.default.SUBTITLE_FRAG_PROCESSED,i.default.LEVEL_UPDATED)||this;return n.fragmentTracker=r,n.config=t.config,n.state=c.State.STOPPED,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new a.default(t,t.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(n),n}return n(t,e),t.prototype.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=c.State.IDLE,r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,o=t.start,a=0;a<n.length;a++)if(o>=n[a].start&&o<=n[a].end){i=n[a];break}var s=t.start+t.duration;i?i.end=s:(i={start:o,end:s},n.push(i))}}},t.prototype.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=c.State.IDLE},t.prototype.onMediaDetaching=function(){this.media.removeEventListener("seeking",this._onMediaSeeking),this.media=null,this.state=c.State.STOPPED},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=c.State.IDLE)},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;o.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},t.prototype.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,n=this.currentTrackId,i=this.tracks,o=i[n];t>=i.length||t!==n||!o||(r.live&&d.mergeSubtitlePlaylists(o.details,r,this.lastAVStart),o.details=r,this.setInterval(500))},t.prototype.onKeyLoaded=function(){this.state===c.State.KEY_LOADING&&(this.state=c.State.IDLE)},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,o=this.hls;if(this.state===c.State.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var a=f.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,function(e){var t=f.now();o.trigger(i.default.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:a,tdecrypt:t}})})}},t.prototype.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},t.prototype.doTick=function(){if(this.media)switch(this.state){case c.State.IDLE:var e=this,t=e.config,r=e.currentTrackId,n=e.fragmentTracker,a=e.media,d=e.tracks;if(!d||!d[r]||!d[r].details)break;var f=t.maxBufferHole,h=t.maxFragLookUpTolerance,p=Math.min(t.maxBufferLength,t.maxMaxBufferLength),g=s.BufferHelper.bufferedInfo(this._getBuffered(),a.currentTime,f),v=g.end,m=g.len,y=d[r].details,b=y.fragments,_=b.length,E=b[_-1].start+b[_-1].duration;if(m>p)return;var T=void 0,S=this.fragPrevious;v<E?(S&&y.hasProgramDateTime&&(T=u.findFragmentByPDT(b,S.endProgramDateTime,h)),T||(T=u.findFragmentByPTS(S,b,v,h))):T=b[_-1],T&&T.encrypted?(o.logger.log("Loading key for "+T.sn),this.state=c.State.KEY_LOADING,this.hls.trigger(i.default.KEY_LOADING,{frag:T})):T&&n.getState(T)===l.FragmentState.NOT_LOADED&&(this.fragCurrent=T,this.state=c.State.FRAG_LOADING,this.hls.trigger(i.default.FRAG_LOADING,{frag:T}))}else this.state=c.State.IDLE},t.prototype.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},t.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},t.prototype.onMediaSeeking=function(){this.fragPrevious=null},t}(c.default);t.SubtitleStreamController=h},"./src/controller/subtitle-track-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/logger.js"),s=r("./src/controller/level-helper.js"),u=function(t){function r(e){var r=t.call(this,e,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.MANIFEST_LOADED,i.default.SUBTITLE_TRACK_LOADED)||this;return r.tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r}return n(r,t),r.prototype.destroy=function(){o.default.prototype.destroy.call(this)},r.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},r.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},r.prototype.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(i.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},r.prototype.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,n=e.details,i=this.trackId,o=this.tracks,u=o[i];if(r>=o.length||r!==i||!u||this.stopped)this._clearReloadTimer();else if(a.logger.log("subtitle track "+r+" loaded"),n.live){var l=s.computeReloadInterval(u.details,n,e.stats.trequest);a.logger.log("Reloading live subtitle playlist in "+l+"ms"),this.timer=setTimeout(function(){t._loadCurrentTrack()},l)}else this._clearReloadTimer()},r.prototype.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},r.prototype.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},Object.defineProperty(r.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))},enumerable:!0,configurable:!0}),r.prototype._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r.prototype._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,n=t[e];e<0||!n||n.details&&!n.details.live||(a.logger.log("Loading subtitle track "+e),r.trigger(i.default.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))},r.prototype._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,n=this.trackId;if(t){var i=l(t.textTracks);if(-1===e)[].slice.call(i).forEach(function(e){e.mode="disabled"});else{var o=i[n];o&&(o.mode="disabled")}var a=i[e];a&&(a.mode=r?"showing":"hidden")}},r.prototype._setSubtitleTrackInternal=function(t){var r=this.hls,n=this.tracks;!e.isFinite(t)||t<-1||t>=n.length||(this.trackId=t,a.logger.log("Switching to subtitle track "+t),r.trigger(i.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},r.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=l(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},r}(o.default);function l(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"===n.kind&&n.label&&t.push(e[r])}return t}t.default=u}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/timeline-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/cea-608-parser.js"),s=r("./src/utils/output-filter.js"),u=r("./src/utils/webvtt-parser.js"),l=r("./src/utils/logger.js"),c=r("./src/utils/texttrack-utils.js");function d(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function f(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}var h=function(t){function r(e){var r=t.call(this,e,i.default.MEDIA_ATTACHING,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_USERDATA,i.default.FRAG_DECRYPTED,i.default.MANIFEST_LOADING,i.default.MANIFEST_LOADED,i.default.FRAG_LOADED,i.default.LEVEL_SWITCHING,i.default.INIT_PTS_FOUND)||this;if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var n=new s.default(r,"textTrack1"),o=new s.default(r,"textTrack2");r.cea608Parser=new a.default(0,n,o)}return r}return n(r,t),r.prototype.addCues=function(e,t,r,n){for(var i=this.cueRanges,o=!1,a=i.length;a--;){var s=i[a],u=f(s[0],s[1],t,r);if(u>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],r),o=!0,u/(r-t)>.5))return}o||i.push([t,r]),this.Cues.newCue(this.captionsTracks[e],t,r,n)},r.prototype.onInitPtsFound=function(e){var t=this;if("main"===e.id&&(this.initPTS[e.frag.cc]=e.initPTS),this.unparsedVttFrags.length){var r=this.unparsedVttFrags;this.unparsedVttFrags=[],r.forEach(function(e){t.onFragLoaded(e)})}},r.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},r.prototype.createCaptionsTrack=function(e){var t=this.captionsProperties[e],r=t.label,n=t.languageCode,i=this.captionsTracks;if(!i[e]){var o=this.getExistingTrack(e);if(o)i[e]=o,c.clearCurrentCues(i[e]),c.sendAddTrackEvent(i[e],this.media);else{var a=this.createTextTrack("captions",r,n);a&&(a[e]=!0,i[e]=a)}}},r.prototype.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},r.prototype.destroy=function(){o.default.prototype.destroy.call(this)},r.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){c.clearCurrentCues(e[t]),delete e[t]})},r.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},r.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)c.clearCurrentCues(t[r])}},r.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,n){var i;if(n<r.length){for(var o=null,a=0;a<r.length;a++)if(d(r[a],e)){o=r[a];break}o&&(i=o)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",t.textTracks.push(i)})}},r.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},r.prototype.onFragLoaded=function(t){var r=t.frag,n=t.payload;if("main"===r.type){var o=r.sn;if(o!==this.lastSn+1){var a=this.cea608Parser;a&&a.reset()}this.lastSn=o}else if("subtitle"===r.type)if(n.byteLength){if(!e.isFinite(this.initPTS[r.cc]))return this.unparsedVttFrags.push(t),void(this.initPTS.length&&this.hls.trigger(i.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r}));var s=r.decryptdata;null!=s&&null!=s.key&&"AES-128"===s.method||this._parseVTTs(r,n)}else this.hls.trigger(i.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})},r.prototype._parseVTTs=function(e,t){var r=this.vttCCs;r[e.cc]||(r[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var n=this.textTracks,o=this.hls;u.default.parse(t,this.initPTS[e.cc],r,e.cc,function(t){var r=n[e.level];"disabled"!==r.mode?(t.forEach(function(e){if(!r.cues.getCueById(e.id))try{r.addCue(e)}catch(n){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,r.addCue(t)}}),o.trigger(i.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):o.trigger(i.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},function(t){l.logger.log("Failed to parse VTT cue: "+t),o.trigger(i.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},r.prototype.onFragDecrypted=function(t){var r=t.payload,n=t.frag;if("subtitle"===n.type){if(!e.isFinite(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(n,r)}},r.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}},r.prototype.extractCea608Data=function(e){for(var t,r,n,i=31&e[0],o=2,a=[],s=0;s<i;s++)t=e[o++],r=127&e[o++],n=127&e[o++],0===r&&0===n||0!=(4&t)&&0===(3&t)&&(a.push(r),a.push(n));return a},r}(o.default);t.default=h}).call(this,r("./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();t.default=n},"./src/crypt/aes-decryptor.js":function(e,t,r){"use strict";function n(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}Object.defineProperty(t,"__esModule",{value:!0}),t.removePadding=n;var i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],o=r[2],a=r[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,p=0,g=0;for(g=0;g<256;g++)f[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^255&v^99,e[h]=v,t[v]=h;var m=f[h],y=f[m],b=f[y],_=257*f[v]^16843008*v;n[h]=_<<24|_>>>8,i[h]=_<<16|_>>>16,o[h]=_<<8|_>>>24,a[h]=_,_=16843009*b^65537*y^257*m^16843008*h,u[v]=_<<24|_>>>8,l[v]=_<<16|_>>>16,c[v]=_<<8|_>>>24,d[v]=_,h?(h=m^f[f[f[b^m]]],p^=f[f[p]]):h=p=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o,a,s,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),f=this.sBox,h=this.rcon,p=this.invSubMix,g=p[0],v=p[1],m=p[2],y=p[3];for(o=0;o<l;o++)o<i?s=c[o]=t[o]:(u=s,o%i==0?(u=f[(u=u<<8|u>>>24)>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u],u^=h[o/i|0]<<24):i>6&&o%i==4&&(u=f[u>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u]),c[o]=s=(c[o-i]^u)>>>0);for(a=0;a<l;a++)o=l-a,u=3&a?c[o]:c[o-4],d[a]=a<4||o<=4?u:g[f[u>>>24]]^v[f[u>>>16&255]]^m[f[u>>>8&255]]^y[f[255&u]],d[a]=d[a]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,r,i){for(var o,a,s,u,l,c,d,f,h,p,g,v,m,y,b=this.keySize+6,_=this.invKeySchedule,E=this.invSBox,T=this.invSubMix,S=T[0],w=T[1],A=T[2],x=T[3],L=this.uint8ArrayToUint32Array_(r),k=L[0],R=L[1],O=L[2],D=L[3],P=new Int32Array(e),C=new Int32Array(P.length),I=this.networkToHostOrderSwap;t<P.length;){for(h=I(P[t]),p=I(P[t+1]),g=I(P[t+2]),v=I(P[t+3]),l=h^_[0],c=v^_[1],d=g^_[2],f=p^_[3],m=4,y=1;y<b;y++)o=S[l>>>24]^w[c>>16&255]^A[d>>8&255]^x[255&f]^_[m],a=S[c>>>24]^w[d>>16&255]^A[f>>8&255]^x[255&l]^_[m+1],s=S[d>>>24]^w[f>>16&255]^A[l>>8&255]^x[255&c]^_[m+2],u=S[f>>>24]^w[l>>16&255]^A[c>>8&255]^x[255&d]^_[m+3],l=o,c=a,d=s,f=u,m+=4;o=E[l>>>24]<<24^E[c>>16&255]<<16^E[d>>8&255]<<8^E[255&f]^_[m],a=E[c>>>24]<<24^E[d>>16&255]<<16^E[f>>8&255]<<8^E[255&l]^_[m+1],s=E[d>>>24]<<24^E[f>>16&255]<<16^E[l>>8&255]<<8^E[255&c]^_[m+2],u=E[f>>>24]<<24^E[l>>16&255]<<16^E[c>>8&255]<<8^E[255&d]^_[m+3],m+=3,C[t]=I(o^k),C[t+1]=I(u^R),C[t+2]=I(s^O),C[t+3]=I(a^D),k=h,R=p,O=g,D=v,t+=4}return i?n(C.buffer):C.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=i},"./src/crypt/decrypter.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/crypt/aes-crypto.js"),i=r("./src/crypt/fast-aes-key.js"),o=r("./src/crypt/aes-decryptor.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),u=r("./src/events.js"),l=r("./src/utils/get-self-scope.js").getSelfScope(),c=function(){function e(e,t,r){var n=(void 0===r?{}:r).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var o=l.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,r,a){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new o.default),l.expandKey(t),a(l.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i.default(c,t)),this.fastAesKey.expandKey().then(function(i){new n.default(c,r).decrypt(e,i).catch(function(n){u.onWebCryptoError(n,e,t,r,a)}).then(function(e){a(e)})}).catch(function(n){u.onWebCryptoError(n,e,t,r,a)})}},e.prototype.onWebCryptoError=function(e,t,r,n,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(u.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=c},"./src/crypt/fast-aes-key.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();t.default=n},"./src/demux/aacdemuxer.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/adts.js"),i=r("./src/utils/logger.js"),o=r("./src/demux/id3.js"),a=function(){function t(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return t.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(e){if(!e)return!1;for(var t=(o.default.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(n.probe(e,t))return i.logger.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,r,a,s){for(var u=this._audioTrack,l=o.default.getID3Data(t,0)||[],c=o.default.getTimeStamp(l),d=e.isFinite(c)?90*c:9e4*r,f=0,h=d,p=t.length,g=l.length,v=[{pts:h,dts:h,data:l}];g<p-1;)if(n.isHeader(t,g)&&g+5<p){n.initTrackConfig(u,this.observer,t,g,u.manifestCodec);var m=n.appendFrame(u,t,g,d,f);if(!m){i.logger.log("Unable to parse AAC frame");break}g+=m.length,h=m.sample.pts,f++}else o.default.isHeader(t,g)?(l=o.default.getID3Data(t,g),v.push({pts:h,dts:h,data:l}),g+=l.length):g++;this.remuxer.remux(u,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},r,a,s)},t.prototype.destroy=function(){},t}();t.default=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/adts.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/errors.js"),o=r("./src/events.js");function a(e,t,r,a){var s,u,l,c,d,f=navigator.userAgent.toLowerCase(),h=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(s=1+((192&t[r+2])>>>6),!((u=(60&t[r+2])>>>2)>p.length-1))return c=(1&t[r+2])<<2,c|=(192&t[r+3])>>>6,n.logger.log("manifest codec:"+a+",ADTS data:type:"+s+",sampleingIndex:"+u+"["+p[u]+"Hz],channelConfig:"+c),/firefox/i.test(f)?u>=6?(s=5,d=new Array(4),l=u-3):(s=2,d=new Array(2),l=u):-1!==f.indexOf("android")?(s=2,d=new Array(2),l=u):(s=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&u>=6?l=u-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(u>=6&&1===c||/vivaldi/i.test(f))||!a&&1===c)&&(s=2,d=new Array(2)),l=u)),d[0]=s<<3,d[0]|=(14&u)>>1,d[1]|=(1&u)<<7,d[1]|=c<<3,5===s&&(d[1]|=(14&l)>>1,d[2]=(1&l)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[u],channelCount:c,codec:"mp4a.40."+s,manifestCodec:h};e.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u})}function s(e,t){return 255===e[t]&&240==(246&e[t+1])}function u(e,t){return 1&e[t+1]?7:9}function l(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e){return 9216e4/e}function d(e,t,r,n,i){var o,a,s=e.length;if(o=u(e,t),a=l(e,t),(a-=o)>0&&t+o+a<=s)return{headerLength:o,frameLength:a,stamp:r+n*i}}t.getAudioConfig=a,t.isHeaderPattern=s,t.getHeaderLength=u,t.getFullFrameLength=l,t.isHeader=function(e,t){return!!(t+1<e.length&&s(e,t))},t.probe=function(e,t){if(t+1<e.length&&s(e,t)){var r=u(e,t);t+5<e.length&&(r=l(e,t));var n=t+r;if(n===e.length||n+1<e.length&&s(e,n))return!0}return!1},t.initTrackConfig=function(e,t,r,i,o){if(!e.samplerate){var s=a(t,r,i,o);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,n.logger.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}},t.getFrameDuration=c,t.parseFrameHeader=d,t.appendFrame=function(e,t,r,n,i){var o=d(t,r,n,i,c(e.samplerate));if(o){var a=o.stamp,s=o.headerLength,u=o.frameLength,l={unit:t.subarray(r+s,r+s+u),pts:a,dts:a};return e.samples.push(l),e.len+=u,{sample:l,length:u+s}}}},"./src/demux/demuxer-inline.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r("./src/events.js"),o=r("./src/errors.js"),a=r("./src/crypt/decrypter.js"),s=r("./src/demux/aacdemuxer.js"),u=r("./src/demux/mp4demuxer.js"),l=r("./src/demux/tsdemuxer.js"),c=r("./src/demux/mp3demuxer.js"),d=r("./src/remux/mp4-remuxer.js"),f=r("./src/remux/passthrough-remuxer.js"),h=r("./src/utils/get-self-scope.js"),p=r("./src/utils/logger.js"),g=h.getSelfScope();try{n=g.performance.now.bind(g.performance)}catch(e){p.logger.debug("Unable to use Performance API on this environment"),n=g.Date.now}var v=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,r,o,s,u,l,c,d,f,h,p){var g=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var v=this.decrypter;null==v&&(v=this.decrypter=new a.default(this.observer,this.config));var m=n();v.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var a=n();g.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),g.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),o,s,u,l,c,d,f,h,p)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),o,s,u,l,c,d,f,h,p)},e.prototype.pushDecrypted=function(e,t,r,n,a,h,p,g,v,m,y,b){var _=this.demuxer;if(!_||(p||g)&&!this.probe(e)){for(var E=this.observer,T=this.typeSupported,S=this.config,w=[{demux:l.default,remux:d.default},{demux:u.default,remux:f.default},{demux:s.default,remux:d.default},{demux:c.default,remux:d.default}],A=0,x=w.length;A<x;A++){var L=w[A],k=L.demux.probe;if(k(e)){var R=this.remuxer=new L.remux(E,S,T,this.vendor);_=new L.demux(E,R,S,T),this.probe=k;break}}if(!_)return void E.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=_}var O=this.remuxer;(p||g)&&(_.resetInitSegment(r,n,a,m),O.resetInitSegment()),p&&(_.resetTimeStamp(b),O.resetTimeStamp(b)),"function"==typeof _.setDecryptData&&_.setDecryptData(t),_.append(e,h,v,y)},e}();t.default=v},"./src/demux/demuxer-worker.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/demuxer-inline.js"),i=r("./src/events.js"),o=r("./src/utils/logger.js"),a=r("./node_modules/node-libs-browser/node_modules/events/events.js");t.default=function(e){var t=new a.EventEmitter;t.trigger=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.removeListener.apply(t,[e].concat(r))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new n.default(t,a.typeSupported,s,a.vendor),o.enableLogs(s.debug),r("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),t.on(i.default.FRAG_DECRYPTED,r),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(i.default.FRAG_PARSED,r),t.on(i.default.ERROR,r),t.on(i.default.FRAG_PARSING_METADATA,r),t.on(i.default.FRAG_PARSING_USERDATA,r),t.on(i.default.INIT_PTS_FOUND,r),t.on(i.default.FRAG_PARSING_DATA,function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)})}},"./src/demux/demuxer.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/webworkify-webpack/index.js"),i=r("./src/events.js"),o=r("./src/demux/demuxer-inline.js"),a=r("./src/utils/logger.js"),s=r("./src/errors.js"),u=r("./src/utils/mediasource-helper.js"),l=r("./src/utils/get-self-scope.js"),c=r("./src/observer.js"),d=l.getSelfScope(),f=u.getMediaSource(),h=function(){function t(e,t){var r=this;this.hls=e,this.id=t;var u=this.observer=new c.Observer,l=e.config,h=function(t,n){(n=n||{}).frag=r.frag,n.id=r.id,e.trigger(t,n)};u.on(i.default.FRAG_DECRYPTED,h),u.on(i.default.FRAG_PARSING_INIT_SEGMENT,h),u.on(i.default.FRAG_PARSING_DATA,h),u.on(i.default.FRAG_PARSED,h),u.on(i.default.ERROR,h),u.on(i.default.FRAG_PARSING_METADATA,h),u.on(i.default.FRAG_PARSING_USERDATA,h),u.on(i.default.INIT_PTS_FOUND,h);var p={mp4:f.isTypeSupported("video/mp4"),mpeg:f.isTypeSupported("audio/mpeg"),mp3:f.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(l.enableWorker&&"undefined"!=typeof Worker){a.logger.log("demuxing in webworker");var v=void 0;try{v=this.w=n("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerror=function(t){e.trigger(i.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},v.postMessage({cmd:"init",typeSupported:p,vendor:g,id:t,config:JSON.stringify(l)})}catch(e){a.logger.warn("Error in worker:",e),a.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),v&&d.URL.revokeObjectURL(v.objectURL),this.demuxer=new o.default(u,p,l,g),this.w=void 0}}else this.demuxer=new o.default(u,p,l,g)}return t.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,r,n,i,o,s,u,l){var c=this.w,d=e.isFinite(o.startPTS)?o.startPTS:o.start,f=o.decryptdata,h=this.frag,p=!(h&&o.cc===h.cc),g=!(h&&o.level===h.level),v=h&&o.sn===h.sn+1,m=!g&&v;if(p&&a.logger.log(this.id+":discontinuity detected"),g&&a.logger.log(this.id+":switch detected"),this.frag=o,c)c.postMessage({cmd:"demux",data:t,decryptdata:f,initSegment:r,audioCodec:n,videoCodec:i,timeOffset:d,discontinuity:p,trackSwitch:g,contiguous:m,duration:s,accurateTimeOffset:u,defaultInitPTS:l},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,f,r,n,i,d,p,g,m,s,u,l)}},t.prototype.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":d.URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},t}();t.default=h}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,r=8,n=8;for(t=0;t<e;t++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n},e.prototype.readSPS=function(){var e,t,r,n,i,o,a,s=0,u=0,l=0,c=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),v=this.skipEG.bind(this),m=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),f(5),g(3),d(),m(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=h();if(3===b&&g(1),m(),m(),g(1),p())for(o=3!==b?8:12,a=0;a<o;a++)p()&&y(a<6?16:64)}m();var _=h();if(0===_)h();else if(1===_)for(g(1),v(),v(),t=h(),a=0;a<t;a++)v();m(),g(1),r=h(),n=h(),0===(i=f(1))&&g(1),g(1),p()&&(s=h(),u=h(),l=h(),c=h());var E=[1,1];if(p()&&p())switch(d()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(r+1)-2*s-2*u),height:(2-i)*(n+1)*16-(i?2:4)*(l+c),pixelRatio:E}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},"./src/demux/id3.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var n=r,i=0;e.isHeader(t,r);){i+=10,i+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(i+=10),r+=i}if(i>0)return t.subarray(n,n+i)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var i=r[n];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}},e.getID3Frames=function(t){for(var r=0,n=[];e.isHeader(t,r);){for(var i=e._readSize(t,r+6),o=(r+=10)+i;r+8<o;){var a=e._getFrameData(t.subarray(r)),s=e._decodeFrame(a);s&&n.push(s),r+=a.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);for(var r,n,i,o=e.length,a="",s=0;s<o;){if(0===(r=e[s++])&&t)return a;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:n=e[s++],a+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=e[s++],i=e[s++],a+=String.fromCharCode((15&r)<<12|(63&n)<<6|(63&i)<<0)}}return a},e}(),i=n._utf8ArrayToStr;t.utf8ArrayToStr=i,t.default=n},"./src/demux/mp3demuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/id3.js"),i=r("./src/utils/logger.js"),o=r("./src/demux/mpegaudio.js"),a=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return e.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,r,a=n.default.getID3Data(e,0);if(a&&void 0!==n.default.getTimeStamp(a))for(t=a.length,r=Math.min(e.length-1,t+100);t<r;t++)if(o.default.probe(e,t))return i.logger.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,r,i){for(var a=n.default.getID3Data(e,0),s=n.default.getTimeStamp(a),u=s?90*s:9e4*t,l=a.length,c=e.length,d=0,f=0,h=this._audioTrack,p=[{pts:u,dts:u,data:a}];l<c;)if(o.default.isHeader(e,l)){var g=o.default.appendFrame(h,e,l,u,d);if(!g)break;l+=g.length,f=g.sample.pts,d++}else n.default.isHeader(e,l)?(a=n.default.getID3Data(e,l),p.push({pts:f,dts:f,data:a}),l+=a.length):l++;this.remuxer.remux(h,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},t,r,i)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mp4demuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/events.js"),o=Math.pow(2,32)-1,a=function(){function e(e,t){this.observer=e,this.remuxer=t}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,r,n,o){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:o?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:o?t:null}),a.video&&(s.video={container:"video/mp4",codec:n,initSegment:o?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,i,o,a,s,u,l,c=[];if(t.data?(u=t.start,a=t.end,t=t.data):(u=0,a=t.byteLength),!r.length)return null;for(n=u;n<a;)i=e.readUint32(t,n),o=e.bin2str(t.subarray(n+4,n+8)),l=i>1?n+i:a,o===r[0]&&(1===r.length?c.push({data:t,start:n+8,end:l}):(s=e.findBox({data:t,start:n+8,end:l},r.slice(1))).length&&(c=c.concat(s))),n=l;return c},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],i=n?n.end:null,o=0,a=e.findBox(t,["sidx"]);if(!a||!a[0])return null;r=[];var s=(a=a[0]).data[0];o=0===s?8:16;var u=e.readUint32(a,o);o+=4;o+=0===s?8:16,o+=2;var l=a.end+0,c=e.readUint16(a,o);o+=2;for(var d=0;d<c;d++){var f=o,h=e.readUint32(a,f);f+=4;var p=2147483647&h;if(1===(2147483648&h)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=e.readUint32(a,f);f+=4,r.push({referenceSize:p,subsegmentDuration:g,info:{duration:g/u,start:l,end:l+p-1}}),l+=p,o=f+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:c,references:r,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var o=i.data[i.start],a=0===o?12:20,s=e.readUint32(i,a),u=e.findBox(t,["mdia","mdhd"])[0];if(u){a=0===(o=u.data[u.start])?12:20;var l=e.readUint32(u,a),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var h=e.bin2str(f.data.subarray(f.start+12,f.start+16));n.logger.log("MP4Demuxer:"+d+":"+h+" found")}r[s]={timescale:l,type:d},r[d]={timescale:l,id:s}}}}}}),r},e.getStartDTS=function(t,r){var n,i,o;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map(function(r){return e.findBox(r,["tfhd"]).map(function(n){var i,o;return i=e.readUint32(n,4),o=t[i].timescale||9e4,e.findBox(r,["tfdt"]).map(function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n})[0]/o})})),o=Math.min.apply(null,i),isFinite(o)?o:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map(function(r){return e.findBox(r,["tfhd"]).map(function(i){var a=e.readUint32(i,4),s=t[a].timescale||9e4;e.findBox(r,["tfdt"]).map(function(t){var r=t.data[t.start],i=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,i-n*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=n*s,i=Math.max(i,0);var a=Math.floor(i/(o+1)),u=Math.floor(i%(o+1));e.writeUint32(t,4,a),e.writeUint32(t,8,u)}})})})},e.prototype.append=function(t,r,n,o){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,u=this.initPTS;if(void 0===u){var l=e.getStartDTS(a,t);this.initPTS=u=l-r,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:u})}e.offsetStartDTS(a,t,u),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,n,o,t)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mpegaudio.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var o=this.parseHeader(t,r);if(o&&r+o.frameLength<=t.length){var a=n+i*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(r,r+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),e.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,o=e[t+2]>>4&15,a=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==r&&0!==o&&15!==o&&3!==a){var u=3===r?3-i:3===i?3:4,l=1e3*n.BitratesMap[14*u+o-1],c=3===r?0:2===r?1:2,d=n.SamplingRateMap[3*c+a],f=e[t+3]>>6==3?1:2,h=n.SamplesCoefficients[r][i],p=n.BytesInSlot[i],g=8*h*p;return{sampleRate:d,channelCount:f,frameLength:parseInt(h*l/d+s,10)*p,samplesPerFrame:g}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4;r&&r.frameLength&&(n=r.frameLength);var i=t+n;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.default=n},"./src/demux/sample-aes.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/crypt/decrypter.js"),i=function(){function e(e,t,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new n.default(e,t,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,r,n){var i=e[t].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),i.set(o,16),n||s.decryptAacSamples(e,t+1,r)})},e.prototype.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},e.prototype.decryptAvcSample=function(e,t,r,n,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),u=this;this.decryptBuffer(s.buffer,function(s){i.data=u.getAvcDecryptedUnit(a,s),o||u.decryptAvcSamples(e,t,r+1,n)})},e.prototype.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var o=i[r];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,o,a),!a)return}}}},e}();t.default=i},"./src/demux/tsdemuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/adts.js"),i=r("./src/demux/mpegaudio.js"),o=r("./src/events.js"),a=r("./src/demux/exp-golomb.js"),s=r("./src/demux/sample-aes.js"),u=r("./src/utils/logger.js"),l=r("./src/errors.js"),c={video:1,audio:2,id3:3,text:4},d=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new s.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0)&&(r&&u.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:c[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,r,n,i){var a,s,c,d,f,h=t.length,p=!1;this.contiguous=n;var g=this.pmtParsed,v=this._avcTrack,m=this._audioTrack,y=this._id3Track,b=v.pid,_=m.pid,E=y.pid,T=this._pmtId,S=v.pesData,w=m.pesData,A=y.pesData,x=this._parsePAT,L=this._parsePMT,k=this._parsePES,R=this._parseAVCPES.bind(this),O=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),C=e._syncOffset(t);for(h-=(h+C)%188,a=C;a<h;a+=188)if(71===t[a]){if(s=!!(64&t[a+1]),c=((31&t[a+1])<<8)+t[a+2],(48&t[a+3])>>4>1){if((d=a+5+t[a+4])===a+188)continue}else d=a+4;switch(c){case b:s&&(S&&(f=k(S))&&void 0!==f.pts&&R(f,!1),S={data:[],size:0}),S&&(S.data.push(t.subarray(d,a+188)),S.size+=a+188-d);break;case _:s&&(w&&(f=k(w))&&void 0!==f.pts&&(m.isAAC?O(f):D(f)),w={data:[],size:0}),w&&(w.data.push(t.subarray(d,a+188)),w.size+=a+188-d);break;case E:s&&(A&&(f=k(A))&&void 0!==f.pts&&P(f),A={data:[],size:0}),A&&(A.data.push(t.subarray(d,a+188)),A.size+=a+188-d);break;case 0:s&&(d+=t[d]+1),T=this._pmtId=x(t,d);break;case T:s&&(d+=t[d]+1);var I=L(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=I.avc)>0&&(v.pid=b),(_=I.audio)>0&&(m.pid=_,m.isAAC=I.isAAC),(E=I.id3)>0&&(y.pid=E),p&&!g&&(u.logger.log("reparse from beginning"),p=!1,a=C-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(f=k(S))&&void 0!==f.pts?(R(f,!0),v.pesData=null):v.pesData=S,w&&(f=k(w))&&void 0!==f.pts?(m.isAAC?O(f):D(f),m.pesData=null):(w&&w.size&&u.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=w),A&&(f=k(A))&&void 0!==f.pts?(P(f),y.pesData=null):y.pesData=A,null==this.sampleAes?this.remuxer.remux(m,v,y,this._txtTrack,r,n,i):this.decryptAndRemux(m,v,y,this._txtTrack,r,n,i)},e.prototype.decryptAndRemux=function(e,t,r,n,i,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,r,n,i,o,a)})}else this.decryptAndRemuxAvc(e,t,r,n,i,o,a)},e.prototype.decryptAndRemuxAvc=function(e,t,r,n,i,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,r,n,i,o,a)})}else this.remuxer.remux(e,t,r,n,i,o,a)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,r,n){var i,o,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){u.logger.log("unkown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!n){u.logger.log("unkown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:r?-1===a.audio&&(a.audio=o,a.isAAC=!1):u.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:u.logger.warn("HEVC stream type found, not supported for now");break;default:u.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a},e.prototype._parsePES=function(e){var t,r,n,i,o,a,s,l,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;192&(r=t[7])&&((a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(a-=8589934592),64&r?((s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(s-=8589934592),a-s>54e5&&(u.logger.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),l=(i=t[8])+9,e.size-=l,o=new Uint8Array(e.size);for(var h=0,p=d.length;h<p;h++){var g=(t=d[h]).byteLength;if(l){if(l>g){l-=g;continue}t=t.subarray(l),g-=l,l=0}o.set(t,c),c+=g}return n&&(n-=i+3),{data:o,pts:a,dts:s,len:n}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&u.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var r,n,i,o=this,s=this._avcTrack,u=this._parseAVCNALu(e.data),l=this.avcSample,c=!1,d=this.pushAccesUnit.bind(this),f=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,l&&u.length&&!s.audFound&&(d(l,s),l=this.avcSample=f(!1,e.pts,e.dts,"")),u.forEach(function(t){switch(t.type){case 1:n=!0,l||(l=o.avcSample=f(!0,e.pts,e.dts,"")),l.frame=!0;var u=t.data;if(c&&u.length>4){var h=new a.default(u).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=o.avcSample=f(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,(r=new a.default(o.discardEPB(t.data))).readUByte();for(var p=0,g=0,v=!1,m=0;!v&&r.bytesAvailable>1;){p=0;do{p+=m=r.readUByte()}while(255===m);g=0;do{g+=m=r.readUByte()}while(255===m);if(4===p&&0!==r.bytesAvailable){if(v=!0,181===r.readUByte())if(49===r.readUShort())if(1195456820===r.readUInt())if(3===r.readUByte()){var y=r.readUByte(),b=31&y,_=[y,r.readUByte()];for(i=0;i<b;i++)_.push(r.readUByte()),_.push(r.readUByte()),_.push(r.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:_})}}else if(g<r.bytesAvailable)for(i=0;i<g;i++)r.readUByte()}break;case 7:if(n=!0,c=!0,!s.sps){var E=(r=new a.default(t.data)).readSPS();s.width=E.width,s.height=E.height,s.pixelRatio=E.pixelRatio,s.sps=[t.data],s.duration=o._duration;var T=t.data.subarray(1,4),S="avc1.";for(i=0;i<3;i++){var w=T[i].toString(16);w.length<2&&(w="0"+w),S+=w}s.codec=S}break;case 8:n=!0,s.pps||(s.pps=[t.data]);break;case 9:n=!1,s.audFound=!0,l&&d(l,s),l=o.avcSample=f(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&n&&l.units.push(t)}),t&&l&&(d(l,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var n=t.units;e=n[n.length-1]}return e},e.prototype._parseAVCNALu=function(e){var t,r,n,i,o=0,a=e.byteLength,s=this._avcTrack,u=s.naluState||0,l=u,c=[],d=-1;for(-1===u&&(d=0,i=31&e[0],u=0,o=1);o<a;)if(t=e[o++],u)if(1!==u)if(t)if(1===t){var f,h;if(d>=0)n={data:e.subarray(d,o-u-1),type:i},c.push(n);else if(f=this._getLastNalUnit())if(l&&o<=4-l&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-l)),(r=o-u-1)>0)(h=new Uint8Array(f.data.byteLength+r)).set(f.data,0),h.set(e.subarray(0,r),f.data.byteLength),f.data=h;o<a?(d=o,i=31&e[o],u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;(d>=0&&u>=0&&(n={data:e.subarray(d,a),type:i,state:u},c.push(n)),0===c.length)&&((f=this._getLastNalUnit())&&((h=new Uint8Array(f.data.byteLength+e.byteLength)).set(f.data,0),h.set(e,f.data.byteLength),f.data=h));return s.naluState=u,c},e.prototype.discardEPB=function(e){for(var t,r,n=e.byteLength,i=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),r[o]=e[a];return r},e.prototype._parseAACPES=function(e){var t,r,i,a,s,c=this._audioTrack,d=e.data,f=e.pts,h=this.aacOverFlow,p=this.aacLastPTS;if(h){var g=new Uint8Array(h.byteLength+d.byteLength);g.set(h,0),g.set(d,h.byteLength),d=g}for(i=0,s=d.length;i<s-1&&!n.isHeader(d,i);i++);if(i){var v=void 0,m=void 0;if(i<s-1?(v="AAC PES did not start with ADTS header,offset:"+i,m=!1):(v="no ADTS header found in AAC PES",m=!0),u.logger.warn("parsing error:"+v),this.observer.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:m,reason:v}),m)return}if(n.initTrackConfig(c,this.observer,d,i,this.audioCodec),r=0,t=n.getFrameDuration(c.samplerate),h&&p){var y=p+t;Math.abs(y-f)>1&&(u.logger.log("AAC: align PTS for overlapping frames by "+Math.round((y-f)/90)),f=y)}for(;i<s;)if(n.isHeader(d,i)&&i+5<s){var b=n.appendFrame(c,d,i,f,r);if(!b)break;i+=b.length,a=b.sample.pts,r++}else i++;h=i<s?d.subarray(i,s):null,this.aacOverFlow=h,this.aacLastPTS=a},e.prototype._parseMPEGPES=function(e){for(var t=e.data,r=t.length,n=0,o=0,a=e.pts;o<r;)if(i.default.isHeader(t,o)){var s=i.default.appendFrame(this._audioTrack,t,o,a,n);if(!s)break;o+=s.length,n++}else o++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();t.default=d},"./src/errors.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/errors.js"),o=r("./src/events.js"),a={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},s=function(){function e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.hls=e,this.onEvent=this.onEvent.bind(this),this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(a[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){n.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(o.default.ERROR,{type:i.ErrorTypes.OTHER_ERROR,details:i.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();t.default=s},"./src/events.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},"./src/hls.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/url-toolkit/src/url-toolkit.js"),o=r("./src/errors.js"),a=r("./src/loader/playlist-loader.js"),s=r("./src/loader/fragment-loader.js"),u=r("./src/loader/key-loader.js"),l=r("./src/controller/fragment-tracker.js"),c=r("./src/controller/stream-controller.js"),d=r("./src/controller/level-controller.js"),f=r("./src/controller/id3-track-controller.js"),h=r("./src/is-supported.js"),p=r("./src/utils/logger.js"),g=r("./src/config.js"),v=r("./src/events.js"),m=function(e){function t(r){void 0===r&&(r={});var n=e.call(this)||this,i=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in i)o in r||(r[o]=i[o]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');p.enableLogs(r.debug),n.config=r,n._autoLevelCapping=-1;var h=n.abrController=new r.abrController(n),g=new r.bufferController(n),v=new r.capLevelController(n),m=new r.fpsController(n),y=new a.default(n),b=new s.default(n),_=new u.default(n),E=new f.default(n),T=n.levelController=new d.default(n),S=new l.FragmentTracker(n),w=[T,n.streamController=new c.default(n,S)],A=r.audioStreamController;A&&w.push(new A(n,S)),n.networkControllers=w;var x=[y,b,_,h,g,v,m,E,S];if(A=r.audioTrackController){var L=new A(n);n.audioTrackController=L,x.push(L)}if(A=r.subtitleTrackController){var k=new A(n);n.subtitleTrackController=k,w.push(k)}if(A=r.emeController){var R=new A(n);n.emeController=R,x.push(R)}return(A=r.subtitleStreamController)&&w.push(new A(n,S)),(A=r.timelineController)&&x.push(new A(n)),n.coreComponents=x,n}return n(t,e),Object.defineProperty(t,"version",{get:function(){return"0.12.4"},enumerable:!0,configurable:!0}),t.isSupported=function(){return h.isSupported()},Object.defineProperty(t,"Events",{get:function(){return v.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorTypes",{get:function(){return o.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorDetails",{get:function(){return o.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DefaultConfig",{get:function(){return t.defaultConfig?t.defaultConfig:g.hlsDefaultConfig},set:function(e){t.defaultConfig=e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){p.logger.log("destroy"),this.trigger(v.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(e){p.logger.log("attachMedia"),this.media=e,this.trigger(v.default.MEDIA_ATTACHING,{media:e})},t.prototype.detachMedia=function(){p.logger.log("detachMedia"),this.trigger(v.default.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(e){e=i.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),p.logger.log("loadSource:"+e),this.url=e,this.trigger(v.default.MANIFEST_LOADING,{url:e})},t.prototype.startLoad=function(e){void 0===e&&(e=-1),p.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},t.prototype.stopLoad=function(){p.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.prototype.swapAudioCodec=function(){p.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){p.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Object.defineProperty(t.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(e){p.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(e){p.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(e){p.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){p.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(e){p.logger.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(e){p.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minAutoLevel",{get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++){if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)>t)return n}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAutoLevel",{get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextAutoLevel",{get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTracks",{get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleDisplay",{get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)},enumerable:!0,configurable:!0}),t}(r("./src/observer.js").Observer);t.default=m},"./src/is-supported.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/mediasource-helper.js");t.isSupported=function(){var e=n.getMediaSource(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!i}},"./src/loader/fragment-loader.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),u=function(t){function r(e){var r=t.call(this,e,i.default.FRAG_LOADING)||this;return r.loaders={},r}return n(r,t),r.prototype.destroy=function(){var e=this.loaders;for(var r in e){var n=e[r];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},r.prototype.onFragLoading=function(t){var r=t.frag,n=r.type,i=this.loaders,o=this.hls.config,a=o.fLoader,u=o.loader;r.loaded=0;var l,c,d,f=i[n];f&&(s.logger.warn("abort previous fragment loader for type: "+n),f.abort()),f=i[n]=r.loader=o.fLoader?new a(o):new u(o),l={url:r.url,frag:r,responseType:"arraybuffer",progressData:!1};var h=r.byteRangeStartOffset,p=r.byteRangeEndOffset;e.isFinite(h)&&e.isFinite(p)&&(l.rangeStart=h,l.rangeEnd=p),c={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},f.load(l,c,d)},r.prototype.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var o=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(i.default.FRAG_LOADED,{payload:o,frag:a,stats:t,networkDetails:n})},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,o=n.loader;o&&o.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,o=n.loader;o&&o.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.prototype.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var o=t.frag;o.loaded=e.loaded,this.hls.trigger(i.default.FRAG_LOAD_PROGRESS,{frag:o,stats:e,networkDetails:n})},r}(o.default);t.default=u}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/fragment.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=r("./src/loader/level-key.js"),o=function(){function t(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return Object.defineProperty(t,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=n.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endProgramDateTime",{get:function(){if(!e.isFinite(this.programDateTime))return null;var t=e.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),t.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},t.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new i.default).method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r},t}();t.default=o}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),u=function(e){function t(t){var r=e.call(this,t,i.default.KEY_LOADING)||this;return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return n(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},o.default.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r],o=t.decryptdata,a=o.uri;if(a!==this.decrypturl||null===this.decryptkey){var u=this.hls.config;n&&(s.logger.warn("abort previous key loader for type:"+r),n.abort()),t.loader=this.loaders[r]=new u.loader(u),this.decrypturl=a,this.decryptkey=null;var l,c,d;l={url:a,frag:t,responseType:"arraybuffer"},c={timeout:u.fragLoadingTimeOut,maxRetry:0,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(l,c,d)}else this.decryptkey&&(o.key=this.decryptkey,this.hls.trigger(i.default.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(i.default.KEY_LOADED,{frag:n})},t.prototype.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},t.prototype.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(o.default);t.default=u},"./src/loader/level-key.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=function(){function e(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=n.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),e}();t.default=i},"./src/loader/level.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return Object.defineProperty(t.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!e.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),t}();t.default=r}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=r("./src/loader/fragment.js"),o=r("./src/loader/level.js"),a=r("./src/loader/level-key.js"),s=r("./src/utils/attr-list.js"),u=r("./src/utils/logger.js"),l=r("./src/utils/codecs.js"),c=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,d=/#EXT-X-MEDIA:(.*)/g,f=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),h=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,p=/\.(mp4|m4s|m4v|m4a)$/i,g=function(){function t(){}return t.findGroup=function(e,t){if(!e)return null;for(var r=null,n=0;n<e.length;n++){var i=e[n];i.id===t&&(r=i)}return r},t.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},t.resolve=function(e,t){return n.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var n,i=[];function o(e,t){["video","audio"].forEach(function(r){var n=e.filter(function(e){return l.isCodecType(e,r)});if(n.length){var i=n.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[r+"Codec"]=i.length>0?i[0]:n[0],e=e.filter(function(e){return-1===n.indexOf(e)})}}),t.unknownCodecs=e}for(c.lastIndex=0;null!=(n=c.exec(e));){var a={},u=a.attrs=new s.default(n[1]);a.url=t.resolve(n[2],r);var d=u.decimalResolution("RESOLUTION");d&&(a.width=d.width,a.height=d.height),a.bitrate=u.decimalInteger("AVERAGE-BANDWIDTH")||u.decimalInteger("BANDWIDTH"),a.name=u.NAME,o([].concat((u.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=t.convertAVC1ToAVCOTI(a.videoCodec)),i.push(a)}return i},t.parseMasterPlaylistMedia=function(e,r,n,i){var o;void 0===i&&(i=[]);var a=[],u=0;for(d.lastIndex=0;null!==(o=d.exec(e));){var l={},c=new s.default(o[1]);if(c.TYPE===n){if(l.groupId=c["GROUP-ID"],l.name=c.NAME,l.type=n,l.default="YES"===c.DEFAULT,l.autoselect="YES"===c.AUTOSELECT,l.forced="YES"===c.FORCED,c.URI&&(l.url=t.resolve(c.URI,r)),l.lang=c.LANGUAGE,l.name||(l.name=l.lang),i.length){var f=t.findGroup(i,l.groupId);l.audioCodec=f?f.codec:i[0].codec}l.id=u++,a.push(l)}}return a},t.parseLevelPlaylist=function(t,r,n,l,c){var d,g,m=0,y=0,b=new o.default(r),_=new a.default,E=0,T=null,S=new i.default,w=null;for(f.lastIndex=0;null!==(d=f.exec(t));){var A=d[1];if(A){S.duration=parseFloat(A);var x=(" "+d[2]).slice(1);S.title=x||null,S.tagList.push(x?["INF",A,x]:["INF",A])}else if(d[3]){if(e.isFinite(S.duration)){var L=m++;S.type=l,S.start=y,S.levelkey=_,S.sn=L,S.level=n,S.cc=E,S.urlId=c,S.baseurl=r,S.relurl=(" "+d[3]).slice(1),v(S,T),b.fragments.push(S),T=S,y+=S.duration,S=new i.default}}else if(d[4]){if(S.rawByteRange=(" "+d[4]).slice(1),T){var k=T.byteRangeEndOffset;k&&(S.lastByteRangeEndOffset=k)}}else if(d[5])S.rawProgramDateTime=(" "+d[5]).slice(1),S.tagList.push(["PROGRAM-DATE-TIME",S.rawProgramDateTime]),null===w&&(w=b.fragments.length);else{for(d=d[0].match(h),g=1;g<d.length&&void 0===d[g];g++);var R=(" "+d[g+1]).slice(1),O=(" "+d[g+2]).slice(1);switch(d[g]){case"#":S.tagList.push(O?[R,O]:[R]);break;case"PLAYLIST-TYPE":b.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":m=b.startSN=parseInt(R);break;case"TARGETDURATION":b.targetduration=parseFloat(R);break;case"VERSION":b.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":b.live=!1;break;case"DIS":E++,S.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":E=parseInt(R);break;case"KEY":var D=R,P=new s.default(D),C=P.enumeratedString("METHOD"),I=P.URI,M=P.hexadecimalInteger("IV");C&&(_=new a.default,I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(C)>=0&&(_.method=C,_.baseuri=r,_.reluri=I,_.key=null,_.iv=M));break;case"START":var j=R,N=new s.default(j).decimalFloatingPoint("TIME-OFFSET");e.isFinite(N)&&(b.startTimeOffset=N);break;case"MAP":var F=new s.default(R);S.relurl=F.URI,S.rawByteRange=F.BYTERANGE,S.baseurl=r,S.level=n,S.type=l,S.sn="initSegment",b.initSegment=S,(S=new i.default).rawProgramDateTime=b.initSegment.rawProgramDateTime;break;default:u.logger.warn("line parsed but not handled: "+d)}}}return(S=T)&&!S.relurl&&(b.fragments.pop(),y-=S.duration),b.totalduration=y,b.averagetargetduration=y/b.fragments.length,b.endSN=m-1,b.startCC=b.fragments[0]?b.fragments[0].cc:0,b.endCC=E,!b.initSegment&&b.fragments.length&&b.fragments.every(function(e){return p.test(e.relurl)})&&(u.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(S=new i.default).relurl=b.fragments[0].relurl,S.baseurl=r,S.level=n,S.type=l,S.sn="initSegment",b.initSegment=S,b.needSidxRanges=!0),w&&function(e,t){for(var r=e[t],n=t-1;n>=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}(b.fragments,w),b},t}();function v(t,r){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):r&&r.programDateTime&&(t.programDateTime=r.endProgramDateTime),e.isFinite(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}t.default=g}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),u=r("./src/demux/mp4demuxer.js"),l=r("./src/loader/m3u8-parser.js"),c=window.performance,d={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},f={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},h=function(t){function r(e){var r=t.call(this,e,i.default.MANIFEST_LOADING,i.default.LEVEL_LOADING,i.default.AUDIO_TRACK_LOADING,i.default.SUBTITLE_TRACK_LOADING)||this;return r.loaders={},r}return n(r,t),Object.defineProperty(r,"ContextType",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(r,"LevelType",{get:function(){return f},enumerable:!0,configurable:!0}),r.canHaveQualityLevels=function(e){return e!==d.AUDIO_TRACK&&e!==d.SUBTITLE_TRACK},r.mapContextToLevelType=function(e){switch(e.type){case d.AUDIO_TRACK:return f.AUDIO;case d.SUBTITLE_TRACK:return f.SUBTITLE;default:return f.MAIN}},r.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r},r.prototype.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=new(r||n)(t);return e.loader=i,this.loaders[e.type]=i,i},r.prototype.getInternalLoader=function(e){return this.loaders[e.type]},r.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},r.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},r.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},r.prototype.onManifestLoading=function(e){this.load(e.url,{type:d.MANIFEST,level:0,id:null})},r.prototype.onLevelLoading=function(e){this.load(e.url,{type:d.LEVEL,level:e.level,id:e.id})},r.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:d.AUDIO_TRACK,level:null,id:e.id})},r.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:d.SUBTITLE_TRACK,level:null,id:e.id})},r.prototype.load=function(e,t){var r=this.hls.config;s.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n,i,o,a,u=this.getInternalLoader(t);if(u){var l=u.context;if(l&&l.url===e)return s.logger.trace("playlist request ongoing"),!1;s.logger.warn("aborting previous loader for type: "+t.type),u.abort()}switch(t.type){case d.MANIFEST:n=r.manifestLoadingMaxRetry,i=r.manifestLoadingTimeOut,o=r.manifestLoadingRetryDelay,a=r.manifestLoadingMaxRetryTimeout;break;case d.LEVEL:n=0,i=r.levelLoadingTimeOut;break;default:n=r.levelLoadingMaxRetry,i=r.levelLoadingTimeOut,o=r.levelLoadingRetryDelay,a=r.levelLoadingMaxRetryTimeout}u=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var c={timeout:i,maxRetry:n,retryDelay:o,maxRetryDelay:a},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return s.logger.debug("Calling internal loader delegate for URL: "+e),u.load(t,c,f),!0},r.prototype.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);this.resetInternalLoader(r.type);var i=e.data;t.tload=c.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n)},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},r.prototype._handleMasterPlaylist=function(e,t,n,o){var a=this.hls,u=e.data,c=r.getResponseUrl(e,n),d=l.default.parseMasterPlaylist(u,c);if(d.length){var f=d.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),h=l.default.parseMasterPlaylistMedia(u,c,"AUDIO",f),p=l.default.parseMasterPlaylistMedia(u,c,"SUBTITLES");if(h.length){var g=!1;h.forEach(function(e){e.url||(g=!0)}),!1===g&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(s.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}a.trigger(i.default.MANIFEST_LOADED,{levels:d,audioTracks:h,subtitles:p,url:c,stats:t,networkDetails:o})}else this._handleManifestParsingError(e,n,"no level found in manifest",o)},r.prototype._handleTrackOrLevelPlaylist=function(t,n,o,a){var s=this.hls,u=o.id,f=o.level,h=o.type,p=r.getResponseUrl(t,o),g=e.isFinite(u)?u:0,v=e.isFinite(f)?f:g,m=r.mapContextToLevelType(o),y=l.default.parseLevelPlaylist(t.data,p,v,m,g);if(y.tload=n.tload,h===d.MANIFEST){var b={url:p,details:y};s.trigger(i.default.MANIFEST_LOADED,{levels:[b],audioTracks:[],url:p,stats:n,networkDetails:a})}if(n.tparsed=c.now(),y.needSidxRanges){var _=y.initSegment.url;this.load(_,{isSidxRequest:!0,type:h,level:f,levelDetails:y,id:u,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else o.levelDetails=y,this._handlePlaylistLoaded(t,n,o,a)},r.prototype._handleSidxRequest=function(e,t){var r=u.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach(function(e,t){var r=e.info,n=i.fragments[t];0===n.byteRange.length&&(n.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))}),i.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"}},r.prototype._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},r.prototype._handleNetworkError=function(e,t,r,n){var o,u;void 0===r&&(r=!1),void 0===n&&(n=null),s.logger.info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case d.MANIFEST:o=r?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,u=!0;break;case d.LEVEL:o=r?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,u=!1;break;case d.AUDIO_TRACK:o=r?a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,u=!1;break;default:u=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var c={type:a.ErrorTypes.NETWORK_ERROR,details:o,fatal:u,url:l.url,loader:l,context:e,networkDetails:t};n&&(c.response=n),this.hls.trigger(i.default.ERROR,c)},r.prototype._handlePlaylistLoaded=function(e,t,n,o){var a=n.type,s=n.level,u=n.id,l=n.levelDetails;if(l.targetduration)if(r.canHaveQualityLevels(n.type))this.hls.trigger(i.default.LEVEL_LOADED,{details:l,level:s||0,id:u||0,stats:t,networkDetails:o});else switch(a){case d.AUDIO_TRACK:this.hls.trigger(i.default.AUDIO_TRACK_LOADED,{details:l,id:u,stats:t,networkDetails:o});break;case d.SUBTITLE_TRACK:this.hls.trigger(i.default.SUBTITLE_TRACK_LOADED,{details:l,id:u,stats:t,networkDetails:o})}else this._handleManifestParsingError(e,n,"invalid target duration",o)},r}(o.default);t.default=h}).call(this,r("./src/polyfills/number.js").Number)},"./src/observer.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(t))},t}(r("./node_modules/eventemitter3/index.js").EventEmitter);t.Observer=i},"./src/polyfills/number.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/get-self-scope.js").getSelfScope().Number;t.Number=n,n.isFinite=n.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/remux/aac-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=n},"./src/remux/mp4-generator.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,u,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,o=i;i--;)n+=r[i].byteLength;for((t=new Uint8Array(n))[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<o;i++)t.set(r[i],n),n+=r[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,n,i=t.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,o[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,o)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,o=[],a=[];for(r=0;r<t.sps.length;r++)i=(n=t.sps[r]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)i=(n=t.pps[r]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),u=t.width,l=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,o=t.width,a=t.height,s=Math.floor(i/(n+1)),u=Math.floor(i%(n+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),o=t.id,a=Math.floor(r/(n+1)),s=Math.floor(r%(n+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,o,a,s,u,l=t.samples||[],c=l.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)o=(i=l[n]).duration,a=i.size,s=i.flags,u=i.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+n.byteLength)).set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();t.default=i},"./src/remux/mp4-remuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/remux/aac-helper.js"),i=r("./src/remux/mp4-generator.js"),o=r("./src/events.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),u=function(){function e(e,t,r,n){this.observer=e,this.config=t,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,r,n,i,a,u){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var l=e.samples.length,c=t.samples.length,d=i,f=i;if(l&&c){var h=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;d+=Math.max(0,h),f+=Math.max(0,-h)}if(l){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var p=this.remuxAudio(e,d,a,u);if(c){var g=void 0;p&&(g=p.endPTS-p.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,f,a,g,u)}}else if(c){var v=this.remuxVideo(t,f,a,0,u);v&&e.codec&&this.remuxEmptyAudio(e,d,a,v)}}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(o.default.FRAG_PARSED)},e.prototype.generateIS=function(e,t,r){var n,u,l=this.observer,c=e.samples,d=t.samples,f=this.typeSupported,h="audio/mp4",p={},g={tracks:p},v=void 0===this._initPTS;if(v&&(n=u=1/0),e.config&&c.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(f.mpeg?(h="audio/mpeg",e.codec=""):f.mp3&&(e.codec="mp3")),p.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new Uint8Array:i.default.initSegment([e]),metadata:{channelCount:e.channelCount}},v&&(n=u=c[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&d.length){var m=t.inputTimeScale;t.timescale=m,p.video={container:"video/mp4",codec:t.codec,initSegment:i.default.initSegment([t]),metadata:{width:t.width,height:t.height}},v&&(n=Math.min(n,d[0].pts-m*r),u=Math.min(u,d[0].dts-m*r),this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(p).length?(l.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,v&&(this._initPTS=n,this._initDTS=u)):l.trigger(o.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,r,n,u){var l,c,d,f,h,p,g,v=8,m=e.timescale,y=e.samples,b=[],_=y.length,E=this._PTSNormalize,T=this._initPTS,S=this.nextAvcDts,w=this.isSafari;if(0!==_){w&&(r|=y.length&&S&&(u&&Math.abs(t-S/m)<.1||Math.abs(y[0].pts-S-T)<m/5)),r||(S=t*m),y.forEach(function(e){e.pts=E(e.pts-T,S),e.dts=E(e.dts-T,S)}),y.sort(function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id});var A=y.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(A<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(A/90)+" ms to overcome this issue");for(var x=0;x<y.length;x++)y[x].dts+=A}var L=y[0];h=Math.max(L.dts,0),f=Math.max(L.pts,0);var k=Math.round((h-S)/90);r&&k&&(k>1?s.logger.log("AVC:"+k+" ms hole between fragments detected,filling it"):k<-1&&s.logger.log("AVC:"+-k+" ms overlapping between fragments detected"),h=S,y[0].dts=h,f=Math.max(f-k,S),y[0].pts=f,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(h/90)+",delta:"+k+" ms")),L=y[y.length-1],g=Math.max(L.dts,0),p=Math.max(L.pts,0,g),w&&(l=Math.round((g-h)/(y.length-1)));var R=0,O=0;for(x=0;x<_;x++){for(var D=y[x],P=D.units,C=P.length,I=0,M=0;M<C;M++)I+=P[M].data.length;O+=I,R+=C,D.length=I,D.dts=w?h+x*l:Math.max(D.dts,h),D.pts=Math.max(D.pts,D.dts)}var j=O+4*R+8;try{c=new Uint8Array(j)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating video mdat "+j})}var N=new DataView(c.buffer);N.setUint32(0,j),c.set(i.default.types.mdat,4);for(x=0;x<_;x++){var F=y[x],U=F.units,B=0,G=void 0;for(M=0,C=U.length;M<C;M++){var H=U[M],q=H.data,K=H.data.byteLength;N.setUint32(v,K),v+=4,c.set(q,v),v+=K,B+=4+K}if(w)G=Math.max(0,l*Math.round((F.pts-F.dts)/l));else{if(x<_-1)l=y[x+1].dts-F.dts;else{var W=this.config,V=F.dts-y[x>0?x-1:x].dts;if(W.stretchShortVideoTrack){var z=W.maxBufferHole,Y=Math.floor(z*m),X=(n?f+n*m:this.nextAudioPts)-F.pts;X>Y?((l=X-V)<0&&(l=V),s.logger.log("It is approximately "+X/90+" ms to the next segment; using duration "+l/90+" ms for the last video frame.")):l=V}else l=V}G=Math.round(F.pts-F.dts)}b.push({size:B,duration:l,cts:G,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:F.key?2:1,isNonSync:F.key?0:1}})}this.nextAvcDts=g+l;var $=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var J=b[0].flags;J.dependsOn=2,J.isNonSync=0}e.samples=b,d=i.default.moof(e.sequenceNumber++,h,e),e.samples=[];var Q={data1:d,data2:c,startPTS:f/m,endPTS:(p+l)/m,startDTS:h/m,endDTS:this.nextAvcDts/m,type:"video",hasAudio:!1,hasVideo:!0,nb:b.length,dropped:$};return this.observer.trigger(o.default.FRAG_PARSING_DATA,Q),Q}},e.prototype.remuxAudio=function(e,t,r,u){var l,c,d,f,h,p,g,v=e.inputTimeScale,m=e.timescale,y=v/m,b=(e.isAAC?1024:1152)*y,_=this._PTSNormalize,E=this._initPTS,T=!e.isAAC&&this.typeSupported.mpeg,S=e.samples,w=[],A=this.nextAudioPts;if(r|=S.length&&A&&(u&&Math.abs(t-A/v)<.1||Math.abs(S[0].pts-A-E)<20*b),S.forEach(function(e){e.pts=e.dts=_(e.pts-E,t*v)}),0!==(S=S.filter(function(e){return e.pts>=0})).length){if(r||(A=u?t*v:S[0].pts),e.isAAC)for(var x=this.config.maxAudioFramesDrift,L=0,k=A;L<S.length;){var R,O=S[L];R=(F=O.pts)-k;var D=Math.abs(1e3*R/v);if(R<=-x*b)s.logger.warn("Dropping 1 audio frame @ "+(k/v).toFixed(3)+"s due to "+Math.round(D)+" ms overlap."),S.splice(L,1),e.len-=O.unit.length;else if(R>=x*b&&D<1e4&&k){var P=Math.round(R/b);s.logger.warn("Injecting "+P+" audio frame @ "+(k/v).toFixed(3)+"s due to "+Math.round(1e3*R/v)+" ms gap.");for(var C=0;C<P;C++){var I=Math.max(k,0);(d=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),d=O.unit.subarray()),S.splice(L,0,{unit:d,pts:I,dts:I}),e.len+=d.length,k+=b,L++}O.pts=O.dts=k,k+=b,L++}else Math.abs(R),O.pts=O.dts=k,k+=b,L++}C=0;for(var M=S.length;C<M;C++){var j=S[C],N=j.unit,F=j.pts;if(void 0!==g)c.duration=Math.round((F-g)/y);else{var U=Math.round(1e3*(F-A)/v),B=0;if(r&&e.isAAC&&U){if(U>0&&U<1e4)B=Math.round((F-A)/b),s.logger.log(U+" ms hole between AAC samples detected,filling it"),B>0&&((d=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(d=N.subarray()),e.len+=B*d.length);else if(U<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(A/v).toFixed(3)+"s/"+(F/v).toFixed(3)+"s/"+-U+"ms"),e.len-=N.byteLength;continue}F=A}if(p=F,!(e.len>0))return;var G=T?e.len:e.len+8;l=T?0:8;try{f=new Uint8Array(G)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating audio mdat "+G})}T||(new DataView(f.buffer).setUint32(0,G),f.set(i.default.types.mdat,4));for(L=0;L<B;L++)(d=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),d=N.subarray()),f.set(d,l),l+=d.byteLength,c={size:d.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(c)}f.set(N,l);var H=N.byteLength;l+=H,c={size:H,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(c),g=F}var q=0,K=w.length;if(K>=2&&(q=w[K-2].duration,c.duration=q),K){this.nextAudioPts=A=g+y*q,e.len=0,e.samples=w,h=T?new Uint8Array:i.default.moof(e.sequenceNumber++,p/y,e),e.samples=[];var W=p/v,V=A/v,z={data1:h,data2:f,startPTS:W,endPTS:V,startDTS:W,endDTS:V,type:"audio",hasAudio:!0,hasVideo:!1,nb:K};return this.observer.trigger(o.default.FRAG_PARSING_DATA,z),z}return null}},e.prototype.remuxEmptyAudio=function(e,t,r,i){var o=e.inputTimeScale,a=o/(e.samplerate?e.samplerate:o),u=this.nextAudioPts,l=(void 0!==u?u:i.startDTS*o)+this._initDTS,c=i.endDTS*o+this._initDTS,d=1024*a,f=Math.ceil((c-l)/d),h=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),h){for(var p=[],g=0;g<f;g++){var v=l+g*d;p.push({unit:h,pts:v,dts:v}),e.len+=h.length}e.samples=p,this.remuxAudio(e,t,r)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e){var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS,a=this._initDTS;if(r){for(var s=0;s<r;s++)(t=e.samples[s]).pts=(t.pts-i)/n,t.dts=(t.dts-a)/n;this.observer.trigger(o.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS;if(r){for(var a=0;a<r;a++)(t=e.samples[a]).pts=(t.pts-i)/n;this.observer.trigger(o.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e}();t.default=u},"./src/remux/passthrough-remuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/events.js"),i=function(){function e(e){this.observer=e}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,r,i,o,a,s,u){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(n.default.FRAG_PARSING_DATA,{data1:u,startPTS:o,startDTS:o,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(n.default.FRAG_PARSED)},e}();t.default=i},"./src/task-loop.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e.apply(this,[t].concat(r))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return n(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)},t.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(r("./src/event-handler.js").default);t.default=i},"./src/utils/attr-list.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,i=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var r=parseInt(this[t],10);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var r=parseInt(this[t],16);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.prototype.enumeratedString=function(e){return this[e]},t.prototype.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},t.parseAttrList=function(e){var t,r={};for(n.lastIndex=0;null!==(t=n.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},t}();t.default=i}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={search:function(e,t){for(var r=0,n=e.length-1,i=null,o=null;r<=n;){var a=t(o=e[i=(r+n)/2|0]);if(a>0)r=i+1;else{if(!(a<0))return o;n=i-1}}return null}}},"./src/utils/buffer-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n=e.buffered,i=[],o=void 0;for(o=0;o<n.length;o++)i.push({start:n.start(o),end:n.end(o)});return this.bufferedInfo(i,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){var n,i,o,a,s,u=[];for(e.sort(function(e,t){var r=e.start-t.start;return r||t.end-e.end}),s=0;s<e.length;s++){var l=u.length;if(l){var c=u[l-1].end;e[s].start-c<r?e[s].end>c&&(u[l-1].end=e[s].end):u.push(e[s])}else u.push(e[s])}for(s=0,n=0,i=o=t;s<u.length;s++){var d=u[s].start,f=u[s].end;if(t+r>=d&&t<f)i=d,n=(o=f)-t;else if(t+r<d){a=d;break}}return{len:n,start:i,end:o,nextStart:a}},e}();t.BufferHelper=n},"./src/utils/cea-608-parser.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)},o=15,a=100,s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},l={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},h=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},p=function(){function e(e,t,r,n,i){this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),g=function(){function e(e,t,r,n,i,o){this.uchar=e||" ",this.penState=new p(t,r,n,i,o)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),v=function(){function e(){this.chars=[];for(var e=0;e<a;e++)this.chars.push(new g);this.pos=0,this.currPenState=new p}return e.prototype.equals=function(e){for(var t=!0,r=0;r<a;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<a;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<a;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>a&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=a)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=i(e);this.pos>=a?f.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<a;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,r=0;r<a;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),m=function(){function e(){this.rows=[];for(var e=0;e<o;e++)this.rows.push(new v);this.currRow=o-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<o;e++)this.rows[e].clear();this.currRow=o-1},e.prototype.equals=function(e){for(var t=!0,r=0;r<o;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<o;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<o;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){f.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){f.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<o;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime;if(a&&a<f.time)for(r=0;r<this.nrRollUpRows;r++)this.rows[t-this.nrRollUpRows+r+1].copy(i.rows[n+r])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,l=Math.max(u-1,0);s.setCursor(e.indent),e.color=s.chars[l].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){f.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){f.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),f.log("INFO","Rolling up")}else f.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<o;i++){var a=this.rows[i].getTextString();a&&(n=i+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},e.prototype.getTextAndFormat=function(){return this.rows},e}(),y=function(){function e(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,f.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){f.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){f.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}f.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=f.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),b=function(){function e(e,t,r){this.field=e||1,this.outputs=[t,r],this.channels=[new y(1,t),new y(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var r,n,i,o=!1;this.lastTime=e,f.setTime(e);for(var a=0;a<t.length;a+=2)if(n=127&t[a],i=127&t[a+1],0!==n||0!==i){if(f.log("DATA","["+h([t[a],t[a+1]])+"] -> ("+h([n,i])+")"),(r=this.parseCmd(n,i))||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r)if(o=this.parseChars(n,i))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(o);else f.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+h([n,i])+" orig: "+h([t[a],t[a+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var r=null;if(!((20===e||28===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+h([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var n=this.channels[r-1];return 20===e||28===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.parseMidrow=function(e,t){var r=null;return(17===e||25===e)&&t>=32&&t<=47&&((r=17===e?1:2)!==this.currChNr?(f.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(t),f.log("DEBUG","MIDROW ("+h([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var r,n=null;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,n=t>=64&&t<=95?1===r?s[e]:l[e]:1===r?u[e]:c[e];var i=this.interpretPAC(n,t);return this.channels[r-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.interpretPAC=function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},e.prototype.parseChars=function(e,t){var r=null,n=null,o=null;if(e>=25?(r=2,o=e-8):(r=1,o=e),o>=17&&o<=19){var a=t;a=17===o?t+80:18===o?t+112:t+144,f.log("INFO","Special char '"+i(a)+"' in channel "+r),n=[a]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var s=h(n);f.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},e.prototype.parseBackgroundAttributes=function(e,t){var r,n,i;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=d[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();t.default=b},"./src/utils/codecs.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};t.isCodecType=function(e,t){var r=n[t];return!!r&&!0===r[e.slice(0,4)]},t.isCodecSupportedInMp4=function(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/cues.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/vttparser.js");t.newCue=function(e,t,r,i){for(var o,a,s,u,l,c=window.VTTCue||window.TextTrackCue,d=0;d<i.rows.length;d++)if(s=!0,u=0,l="",!(o=i.rows[d]).isEmpty()){for(var f=0;f<o.chars.length;f++)o.chars[f].uchar.match(/\s/)&&s?u++:(l+=o.chars[f].uchar,s=!1);o.cueStartTime=t,t===r&&(r+=1e-4),a=new c(t,r,n.fixLineBreaks(l.trim())),u>=16?u--:u++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,u/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}},"./src/utils/discontinuities.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/binary-search.js"),i=r("./src/utils/logger.js");function o(e,t){for(var r=null,n=0;n<e.length;n+=1){var i=e[n];if(i&&i.cc===t){r=i;break}}return r}function a(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}function s(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var a=o(r,n[0].cc);if(a&&(!a||a.startPTS))return a;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function u(e,t){t.fragments.forEach(function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}),t.PTSKnown=!0}function l(e,t,r){if(a(e,r,t)){var n=s(r.details,t);n&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level"),u(n.start,t))}}function c(t,r){if(r&&r.fragments.length){if(!t.hasProgramDateTime||!r.hasProgramDateTime)return;var n=r.fragments[0].programDateTime,o=(t.fragments[0].programDateTime-n)/1e3+r.fragments[0].start;e.isFinite(o)&&(i.logger.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),u(o,t))}}t.findFirstFragWithCC=o,t.findFragWithCC=function(e,t){return n.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})},t.shouldAlignOnDiscontinuities=a,t.findDiscontinuousReferenceFrag=s,t.adjustPts=u,t.alignStream=function(e,t,r){l(e,r,t),!r.PTSKnown&&t&&c(r,t.details)},t.alignDiscontinuities=l,t.alignPDT=c}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/ewma.js"),i=function(){function e(e,t,r,i){this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.default(t),this.fast_=new n.default(r)}return e.prototype.sample=function(e,t){var r=8e3*t/(e=Math.max(e,this.minDelayMs_)),n=e/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}();t.default=i},"./src/utils/ewma.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();t.default=n},"./src/utils/get-self-scope.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=function(){return"undefined"==typeof window?self:window}},"./src/utils/logger.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/get-self-scope.js");function i(){}var o={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=o;var s=n.getSelfScope();function u(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];t.forEach(function(t){a[t]=e[t]?e[t].bind(e):function(e){var t=s.console[e];return t?function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r[0]&&(r[0]=function(e,t){return t="["+e+"] > "+t}(e,r[0])),t.apply(s.console,r)}:i}(t)})}t.enableLogs=function(e){if(!0===e||"object"==typeof e){u(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=o}}else a=o},t.logger=a},"./src/utils/mediakeys-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;t.requestMediaKeySystemAccess=n},"./src/utils/mediasource-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaSource=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}},"./src/utils/output-filter.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e}();t.default=n},"./src/utils/texttrack-utils.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddTrackEvent=function(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)},t.clearCurrentCues=function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},"./src/utils/time-ranges.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}}},"./src/utils/vttcue.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},r={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(e){return"string"==typeof e&&(!!r[e.toLowerCase()]&&e.toLowerCase())}function i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function o(r,o,a){var s=this,u=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=r,h=o,p=a,g=null,v="",m=!0,y="auto",b="start",_=50,E="middle",T=50,S="middle";if(Object.defineProperty(s,"id",i({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",i({},l,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},l,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},l,{get:function(){return v},set:function(e){var r=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");v=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},l,{get:function(){return y},set:function(t){if("number"!=typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},l,{get:function(){return b},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},l,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},l,{get:function(){return E},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},l,{get:function(){return S},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),s.displayState=void 0,u)return s}return o.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},o}()},"./src/utils/vttparser.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/vttcue.js"),i=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function o(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[]}function a(){this.values=Object.create(null)}function s(e,t,r,n){var i=n?e.split(n):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(r);if(2===a.length)t(a[0],a[1])}}a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var u=new n.default(0,0,0),l="middle"===u.align?"middle":"center";function c(e,t,r){var n=e;function i(){var t=function(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),o(),t.endTime=i(),o(),function(e,t){var n=new a;s(e,function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];n.integer(e,a),n.percent(e,a)&&n.set("snapToLines",!1),n.alt(e,a,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start",l,"end"]);break;case"position":o=t.split(","),n.percent(e,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start",l,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",l,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===u.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",l);var o=n.get("position","auto");"auto"===o&&50===u.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}(e,t)}function d(e){return e.replace(/<br(?: \/)?>/gi,"\n")}t.fixLineBreaks=d,o.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=d(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}function i(e){s(e,function(e,t){e},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var o=void 0;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(o=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var u=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(u?u=!1:o=r(),t.state){case"HEADER":/:/.test(o)?i(o):o||(t.state="ID");continue;case"NOTE":o||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){t.state="NOTE";break}if(!o)continue;if(t.cue=new n.default(0,0,""),t.state="CUE",-1===o.indexOf("--\x3e")){t.cue.id=o;continue}case"CUE":try{c(o,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var l=-1!==o.indexOf("--\x3e");if(!o||l&&(u=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=o;continue;case"BADCUE":o||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},t.default=o},"./src/utils/webvtt-parser.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/vttparser.js"),i=r("./src/demux/id3.js"),o=function(e,t,r){return e.substr(r||0,t.length)===t},a=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},s={parse:function(t,r,s,u,l,c){var d,f=i.utf8ArrayToStr(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),h="00:00.000",p=0,g=0,v=0,m=[],y=!0,b=new n.default;b.oncue=function(e){var t=s[u],r=s.ccOffset;t&&t.new&&(void 0!==g?r=s.ccOffset=t.start:function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)e.ccOffset+=n.start-i.start,n.new=!1,i=e[(n=i).prevCC];e.presentationOffset=r}(s,u,v)),v&&(r=v-s.presentationOffset),e.startTime+=r-g,e.endTime+=r-g,e.id=a(e.startTime.toString())+a(e.endTime.toString())+a(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&m.push(e)},b.onparsingerror=function(e){d=e},b.onflush=function(){d&&c?c(d):l(m)},f.forEach(function(t){if(y){if(o(t,"X-TIMESTAMP-MAP=")){y=!1,t.substr(16).split(",").forEach(function(e){o(e,"LOCAL:")?h=e.substr(6):o(e,"MPEGTS:")&&(p=parseInt(e.substr(7)))});try{r+(9e4*s[u].start||0)<0&&(r+=8589934592),p-=r,g=function(t){var r=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),o=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return e.isFinite(r)&&e.isFinite(n)&&e.isFinite(i)&&e.isFinite(o)?(r+=1e3*n,r+=6e4*i,r+=36e5*o):-1}(h)/1e3,v=p/9e4,-1===g&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){d=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(y=!1)}b.parse(t+"\n")}),b.flush()}};t.default=s}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=window.performance,o=window.XMLHttpRequest,a=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:i.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new o;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,o=this.stats,a=this.context,s=this.config;if(!o.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===o.tfirst&&(o.tfirst=Math.max(i.now(),o.trequest)),4===r){var u=t.status;if(u>=200&&u<300){o.tload=Math.max(o.tfirst,i.now());var l=void 0,c=void 0;c="arraybuffer"===a.responseType?(l=t.response).byteLength:(l=t.responseText).length,o.loaded=o.total=c;var d={url:t.responseURL,data:l};this.callbacks.onSuccess(d,o,a,t)}else o.retry>=s.maxRetry||u>=400&&u<499?(n.logger.error(u+" while loading "+a.url),this.callbacks.onError({code:u,text:t.statusText},a,t)):(n.logger.warn(u+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),o.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},e.prototype.loadtimeout=function(){n.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}();t.default=a}}).default})},function(e,t,r){var n=r(23),i=r(20),o=r(101),a=r(29),s=r(30),u=r(60),l=r(14),c=r(104),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=s(e),t=u(t),c)try{return d(e,t)}catch(e){}if(l(e,t))return a(!i(o.f,e,t),e[t])}},function(e,t,r){var n=r(158),i=r(76);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},function(e,t,r){var n,i,o=r(0),a=r(52),s=o.process,u=o.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(i=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},function(e,t,r){var n=r(0).String;e.exports=function(e){try{return n(e)}catch(e){return"Object"}}},function(e,t,r){var n=r(79),i=r(81),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t){e.exports={}},function(e,t,r){var n=r(0),i=r(14),o=r(9),a=r(37),s=r(63),u=r(116),l=s("IE_PROTO"),c=n.Object,d=c.prototype;e.exports=u?c.getPrototypeOf:function(e){var t=a(e);if(i(t,l))return t[l];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof c?d:null}},function(e,t,r){var n=r(5),i=r(18),o=r(168);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),o(n),t?e(r,n):r.__proto__=n,r}}():void 0)},function(e,t,r){"use strict";var n=r(169).charAt,i=r(42),o=r(54),a=r(108),s=o.set,u=o.getterFor("String Iterator");a(String,"String",function(e){s(this,{type:"String Iterator",string:i(e),index:0})},function(){var e,t=u(this),r=t.string,i=t.index;return i>=r.length?{value:void 0,done:!0}:(e=n(r,i),t.index+=e.length,{value:e,done:!1})})},function(e,t,r){"use strict";var n=r(60),i=r(27),o=r(29);e.exports=function(e,t,r){var a=n(t);a in e?i.f(e,a,o(0,r)):e[a]=r}},function(e,t,r){var n=r(5),i=r(8),o=r(9),a=r(34),s=r(21),u=r(83),l=function(){},c=[],d=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,h=n(f.exec),p=!f.exec(l),g=function(e){if(!o(e))return!1;try{return d(l,c,e),!0}catch(e){return!1}},v=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!h(f,u(e))}catch(e){return!0}};v.sham=!0,e.exports=!d||i(function(){var e;return g(g.call)||!g(Object)||!g(function(){e=!0})||e})?v:g},function(e,t){},function(e,t,r){var n=r(0),i=r(38),o=r(20),a=r(18),s=r(62),u=r(125),l=r(40),c=r(22),d=r(93),f=r(55),h=r(124),p=n.TypeError,g=function(e,t){this.stopped=e,this.result=t},v=g.prototype;e.exports=function(e,t,r){var n,m,y,b,_,E,T,S=r&&r.that,w=!(!r||!r.AS_ENTRIES),A=!(!r||!r.IS_ITERATOR),x=!(!r||!r.INTERRUPTED),L=i(t,S),k=function(e){return n&&h(n,"normal",e),new g(!0,e)},R=function(e){return w?(a(e),x?L(e[0],e[1],k):L(e[0],e[1])):x?L(e,k):L(e)};if(A)n=e;else{if(!(m=f(e)))throw p(s(e)+" is not iterable");if(u(m)){for(y=0,b=l(e);b>y;y++)if((_=R(e[y]))&&c(v,_))return _;return new g(!1)}n=d(e,m)}for(E=n.next;!(T=o(E,n)).done;){try{_=R(T.value)}catch(e){h(n,"throw",e)}if("object"==typeof _&&_&&c(v,_))return _}return new g(!1)}},function(e,t,r){"use strict";var n=r(31);e.exports.f=function(e){return new function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)}(e)}},function(e,t,r){e.exports=r(155)},function(e,t,r){e.exports=r(117)},function(e,t,r){e.exports=r(277)},function(e,t,r){var n=r(0),i=r(21),o=r(9),a=r(22),s=r(103),u=n.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&a(t.prototype,u(e))}},function(e,t,r){var n=r(61),i=r(8);e.exports=!!Object.getOwnPropertySymbols&&!i(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},function(e,t,r){var n=r(31);e.exports=function(e,t){var r=e[t];return null==r?void 0:n(r)}},function(e,t,r){var n=r(32),i=r(80);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.3",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e,t,r){var n=r(0),i=r(160),o=n["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},function(e,t,r){var n=r(5),i=0,o=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},function(e,t,r){var n=r(0),i=r(13),o=n.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,r){var n=r(5),i=r(9),o=r(80),a=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},function(e,t,r){var n=r(30),i=r(85),o=r(40),a=function(e){return function(t,r,a){var s,u=n(t),l=o(u),c=i(a,l);if(e&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,r){var n=r(86),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){var t=+e;return t!=t||0===t?0:(t>0?n:r)(t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,r){var n={};n[r(6)("toStringTag")]="z",e.exports="[object z]"===String(n)},function(e,t,r){var n=r(8),i=r(6),o=r(61),a=i("species");e.exports=function(e){return o>=51||!n(function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(e,t,r){var n=r(114),i=r(87).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(6);t.f=n},function(e,t,r){var n=r(38),i=r(5),o=r(102),a=r(37),s=r(40),u=r(119),l=i([].push),c=function(e){var t=1==e,r=2==e,i=3==e,c=4==e,d=6==e,f=7==e,h=5==e||d;return function(p,g,v,m){for(var y,b,_=a(p),E=o(_),T=n(g,v),S=s(E),w=0,A=m||u,x=t?A(p,S):r||f?A(p,0):void 0;S>w;w++)if((h||w in E)&&(b=T(y=E[w],w,_),e))if(t)x[w]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return w;case 2:l(x,y)}else switch(e){case 4:return!1;case 7:l(x,y)}return d?-1:i||c?c:x}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},function(e,t,r){var n=r(0),i=r(20),o=r(31),a=r(18),s=r(62),u=r(55),l=n.TypeError;e.exports=function(e,t){var r=arguments.length<2?u(e):t;if(o(r))return a(i(r,e));throw l(s(e)+" is not iterable")}},function(e,t,r){var n=r(45),i=r(0);e.exports="process"==n(i.process)},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,r){var n=r(230),i=r(234);function o(t){"@babel/helpers - typeof";return e.exports=o="function"==typeof i&&"symbol"==typeof n?function(e){return typeof e}:function(e){return e&&"function"==typeof i&&e.constructor===i&&e!==i.prototype?"symbol":typeof e},o(t)}e.exports=o},function(e,t,r){e.exports=r(283)},function(e,t,r){e.exports=r(131)},function(e,t,r){e.exports=r(306)},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},function(e,t,r){var n=r(0),i=r(5),o=r(8),a=r(45),s=n.Object,u=i("".split);e.exports=o(function(){return!s("z").propertyIsEnumerable(0)})?function(e){return"String"==a(e)?u(e,""):s(e)}:s},function(e,t,r){var n=r(77);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,r){var n=r(23),i=r(8),o=r(82);e.exports=!n&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(8),i=r(9),o=/#|\.prototype\./,a=function(e,t){var r=u[s(e)];return r==c||r!=l&&(i(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},function(e,t,r){var n=r(23),i=r(8);e.exports=n&&i(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},function(e,t){e.exports=function(){}},function(e,t,r){"use strict";var n=r(4),i=r(20),o=r(32),a=r(109),s=r(9),u=r(110),l=r(65),c=r(66),d=r(48),f=r(33),h=r(41),p=r(6),g=r(47),v=r(111),m=a.PROPER,y=a.CONFIGURABLE,b=v.IteratorPrototype,_=v.BUGGY_SAFARI_ITERATORS,E=p("iterator"),T=function(){return this};e.exports=function(e,t,r,a,p,v,S){u(r,t,a);var w,A,x,L=function(e){if(e===p&&P)return P;if(!_&&e in O)return O[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},k=t+" Iterator",R=!1,O=e.prototype,D=O[E]||O["@@iterator"]||p&&O[p],P=!_&&D||L(p),C="Array"==t&&O.entries||D;if(C&&(w=l(C.call(new e)))!==Object.prototype&&w.next&&(o||l(w)===b||(c?c(w,b):s(w[E])||h(w,E,T)),d(w,k,!0,!0),o&&(g[k]=T)),m&&"values"==p&&D&&"values"!==D.name&&(!o&&y?f(O,"name","values"):(R=!0,P=function(){return i(D,this)})),p)if(A={values:L("values"),keys:v?P:L("keys"),entries:L("entries")},S)for(x in A)!_&&!R&&x in O||h(O,x,A[x]);else n({target:t,proto:!0,forced:_||R},A);return o&&!S||O[E]===P||h(O,E,P,{name:p}),g[t]=P,A}},function(e,t,r){var n=r(23),i=r(14),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=i(o,"name"),u=s&&"something"===function(){}.name,l=s&&(!n||n&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},function(e,t,r){"use strict";var n=r(111).IteratorPrototype,i=r(39),o=r(29),a=r(48),s=r(47),u=function(){return this};e.exports=function(e,t,r,l){var c=t+" Iterator";return e.prototype=i(n,{next:o(+!l,r)}),a(e,c,!1,!0),s[c]=u,e}},function(e,t,r){"use strict";var n,i,o,a=r(8),s=r(9),u=r(39),l=r(65),c=r(41),d=r(6),f=r(32),h=d("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(n=i):p=!0),void 0==n||a(function(){var e={};return n[h].call(e)!==e})?n={}:f&&(n=u(n)),s(n[h])||c(n,h,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},function(e,t,r){var n=r(23),i=r(106),o=r(27),a=r(18),s=r(30),u=r(113);t.f=n&&!i?Object.defineProperties:function(e,t){a(e);for(var r,n=s(t),i=u(t),l=i.length,c=0;l>c;)o.f(e,r=i[c++],n[r]);return e}},function(e,t,r){var n=r(114),i=r(87);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(5),i=r(14),o=r(30),a=r(84).indexOf,s=r(64),u=n([].push);e.exports=function(e,t){var r,n=o(e),l=0,c=[];for(r in n)!i(s,r)&&i(n,r)&&u(c,r);for(;t.length>l;)i(n,r=t[l++])&&(~a(c,r)||u(c,r));return c}},function(e,t,r){var n=r(21);e.exports=n("document","documentElement")},function(e,t,r){var n=r(8);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,r){var n=r(171);r(43),e.exports=n},function(e,t,r){"use strict";var n=r(4),i=r(0),o=r(8),a=r(53),s=r(13),u=r(37),l=r(40),c=r(68),d=r(119),f=r(89),h=r(6),p=r(61),g=h("isConcatSpreadable"),v=i.TypeError,m=p>=51||!o(function(){var e=[];return e[g]=!1,e.concat()[0]!==e}),y=f("concat"),b=function(e){if(!s(e))return!1;var t=e[g];return void 0!==t?!!t:a(e)};n({target:"Array",proto:!0,forced:!m||!y},{concat:function(e){var t,r,n,i,o,a=u(this),s=d(a,0),f=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?a:arguments[t],b(o)){if(f+(i=l(o))>9007199254740991)throw v("Maximum allowed index exceeded");for(r=0;r<i;r++,f++)r in o&&c(s,f,o[r])}else{if(f>=9007199254740991)throw v("Maximum allowed index exceeded");c(s,f++,o)}return s.length=f,s}})},function(e,t,r){var n=r(172);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},function(e,t,r){var n=r(45),i=r(30),o=r(90).f,a=r(121),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"==n(e)?function(e){try{return o(e)}catch(e){return a(s)}}(e):o(i(e))}},function(e,t,r){var n=r(0),i=r(85),o=r(40),a=r(68),s=n.Array,u=Math.max;e.exports=function(e,t,r){for(var n=o(e),l=i(t,n),c=i(void 0===r?n:r,n),d=s(u(c-l,0)),f=0;l<c;l++,f++)a(d,f,e[l]);return d.length=f,d}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){r(10)("iterator")},function(e,t,r){var n=r(20),i=r(18),o=r(78);e.exports=function(e,t,r){var a,s;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw r;return r}a=n(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw r;if(s)throw a;return i(a),r}},function(e,t,r){var n=r(6),i=r(47),o=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},function(e,t,r){var n=r(6)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},function(e,t,r){var n=r(0),i=r(69),o=r(62),a=n.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a constructor")}},function(e,t,r){var n=r(4),i=r(0),o=r(36),a=r(9),s=r(52),u=r(56),l=/MSIE .\./.test(s),c=i.Function,d=function(e){return function(t,r){var n=arguments.length>2,i=n?u(arguments,2):void 0;return e(n?function(){o(a(t)?t:c(t),this,i)}:t,r)}};n({global:!0,bind:!0,forced:l},{setTimeout:d(i.setTimeout),setInterval:d(i.setInterval)})},function(e,t,r){var n=r(222);e.exports=n},function(e,t,r){e.exports=r(225)},function(e,t,r){var n=r(233);r(43),e.exports=n},function(e,t,r){var n=r(0);e.exports=n.Promise},function(e,t,r){var n=r(41);e.exports=function(e,t,r){for(var i in t)r&&r.unsafe&&e[i]?e[i]=t[i]:n(e,i,t[i],r);return e}},function(e,t,r){var n=r(0),i=r(22),o=n.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw o("Incorrect invocation")}},function(e,t,r){var n=r(18),i=r(127),o=r(6)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[o])?t:i(r)}},function(e,t,r){var n,i,o,a,s=r(0),u=r(36),l=r(38),c=r(9),d=r(14),f=r(8),h=r(115),p=r(56),g=r(82),v=r(137),m=r(94),y=s.setImmediate,b=s.clearImmediate,_=s.process,E=s.Dispatch,T=s.Function,S=s.MessageChannel,w=s.String,A=0,x={};try{n=s.location}catch(e){}var L=function(e){if(d(x,e)){var t=x[e];delete x[e],t()}},k=function(e){return function(){L(e)}},R=function(e){L(e.data)},O=function(e){s.postMessage(w(e),n.protocol+"//"+n.host)};y&&b||(y=function(e){var t=p(arguments,1);return x[++A]=function(){u(c(e)?e:T(e),void 0,t)},i(A),A},b=function(e){delete x[e]},m?i=function(e){_.nextTick(k(e))}:E&&E.now?i=function(e){E.now(k(e))}:S&&!v?(a=(o=new S).port2,o.port1.onmessage=R,i=l(a.postMessage,a)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&n&&"file:"!==n.protocol&&!f(O)?(i=O,s.addEventListener("message",R,!1)):i="onreadystatechange"in g("script")?function(e){h.appendChild(g("script")).onreadystatechange=function(){h.removeChild(this),L(e)}}:function(e){setTimeout(k(e),0)}),e.exports={set:y,clear:b}},function(e,t,r){var n=r(52);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},function(e,t,r){var n=r(18),i=r(13),o=r(72);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,r){"use strict";var n=r(8);e.exports=function(e,t){var r=[][e];return!!r&&n(function(){r.call(null,t||function(){throw 1},1)})}},function(e,t,r){e.exports=r(161)},function(e,t,r){e.exports=r(190)},function(e,t,r){e.exports=r(210)},function(e,t,r){var n;!function(i,o){"use strict";var a="model",s="name",u="type",l="vendor",c="version",d="mobile",f="tablet",h={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var r,n,i,o,a,s,u=0;u<t.length&&!a;){var l=t[u],c=t[u+1];for(r=n=0;r<l.length&&!a;)if(a=l[r++].exec(e))for(i=0;i<c.length;i++)s=a[++n],"object"==typeof(o=c[i])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(h.has(t[r][n],e))return"?"===r?void 0:r}else if(h.has(t[r],e))return"?"===r?void 0:r;return e}},g={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[s,c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge)\/((\d+)?[\w\.]+)/i],[s,c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/(QQ)\/([\d\.]+)/i],[s,c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/(headlesschrome) ([\w\.]+)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],c],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,p.str,g.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",h.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",h.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",h.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[a,l,[u,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[l,"Apple"],[u,f]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,a,[u,f]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[a,[l,"Amazon"],[u,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[a,p.str,g.device.amazon.model],[l,"Amazon"],[u,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,l,[u,d]],[/\((ip[honed|\s\w*]+);/i],[a,[l,"Apple"],[u,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,a,[u,d]],[/\(bb10;\s(\w+)/i],[a,[l,"BlackBerry"],[u,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[a,[l,"Asus"],[u,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[a,"Xperia Tablet"],[u,f]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[a,[l,"Sony"],[u,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,a,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[l,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[l,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[l,p.str,g.device.sprint.vendor],[a,p.str,g.device.sprint.model],[u,d]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,a,[u,f]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[l,[a,/_/g," "],[u,d]],[/(nexus\s9)/i],[a,[l,"HTC"],[u,f]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[a,[l,"Huawei"],[u,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,a,[u,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[l,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[l,"Microsoft"],[u,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[l,"Motorola"],[u,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[l,"Motorola"],[u,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,h.trim],[a,h.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[l,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[a,[l,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],a,[u,f]],[/smart-tv.+(samsung)/i],[l,[u,"smarttv"],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[l,"Samsung"],a,[u,d]],[/sie-(\w+)*/i],[a,[l,"Siemens"],[u,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[l,"Nokia"],a,[u,d]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[a,[l,"Acer"],[u,f]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[l,"LG"],[u,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],a,[u,f]],[/(lg) netcast\.tv/i],[l,a,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[l,"LG"],[u,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[l,"Lenovo"],[u,f]],[/linux;.+((jolla));/i],[l,a,[u,d]],[/((pebble))app\/[\d\.]+\s/i],[l,a,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,a,[u,d]],[/crkey/i],[[a,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[a,[l,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)\s/i],[a,[l,"Google"],[u,f]],[/android.+;\s(pixel xl|pixel)\s/i],[a,[l,"Google"],[u,d]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[u,d]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[l,"Meizu"],[u,f]],[/android.+a000(1)\s+build/i],[a,[l,"OnePlus"],[u,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[l,"RCA"],[u,f]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[a,[l,"Dell"],[u,f]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[l,"Verizon"],[u,f]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],a,[u,f]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[l,"NuVision"],[u,f]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[l,"ZTE"],a,[u,f]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[l,"Swiss"],[u,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[l,"Swiss"],[u,f]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[l,"Zeki"],[u,f]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[l,"Dragon Touch"],a,[u,f]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[a,[l,"Insignia"],[u,f]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[a,[l,"NextBook"],[u,f]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],a,[u,d]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[l,"LvTel"],a,[u,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[l,"Envizen"],[u,f]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[l,a,[u,f]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[l,"MachSpeed"],[u,f]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,a,[u,f]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[l,"Rotor"],[u,f]],[/android.+(KS(.+))\s+build/i],[a,[l,"Amazon"],[u,f]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[l,a,[u,f]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,h.lowerize],l,a],[/(android.+)[;\/].+build/i],[a,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]+).*(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,p.str,g.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,p.str,g.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.]+\d)*/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[s,c]]},m=function(e,t){this.name=e,this.version=t},y=function(e){this.architecture=e},b=function(e,t,r){this.vendor=e,this.model=t,this.type=r},_=m,E=m,T=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof T))return new T(e,t).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?h.extend(v,t):v,o=new m,a=new y,s=new b,u=new _,l=new E;return this.getBrowser=function(){return p.rgx.call(o,r,n.browser),o.major=h.major(o.version),o},this.getCPU=function(){return p.rgx.call(a,r,n.cpu),a},this.getDevice=function(){return p.rgx.call(s,r,n.device),s},this.getEngine=function(){return p.rgx.call(u,r,n.engine),u},this.getOS=function(){return p.rgx.call(l,r,n.os),l},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,o=new m,a=new y,s=new b,u=new _,l=new E,this},this};T.VERSION="0.7.14",T.BROWSER={NAME:s,MAJOR:"major",VERSION:c},T.CPU={ARCHITECTURE:"architecture"},T.DEVICE={MODEL:a,VENDOR:l,TYPE:u,CONSOLE:"console",MOBILE:d,SMARTTV:"smarttv",TABLET:f,WEARABLE:"wearable",EMBEDDED:"embedded"},T.ENGINE={NAME:s,VERSION:c},T.OS={NAME:s,VERSION:c},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=T),t.UAParser=T):r(251)?void 0===(n=function(){return T}.call(t,r,t,e))||(e.exports=n):i&&(i.UAParser=T);var S=i&&(i.jQuery||i.Zepto);if(void 0!==S){var w=new T;S.ua=w.getResult(),S.ua.get=function(){return w.getUA()},S.ua.set=function(e){w.setUA(e);var t=w.getResult();for(var r in t)S.ua[r]=t[r]}}}("object"==typeof window?window:this)},function(e,t,r){e.exports=r(252)},function(e){e.exports=JSON.parse('{"AUDIOCLOUD_WEBPLAYER_CORE_VERSION":"1.1.7.0"}')},function(e,t,r){e.exports=r(129)},function(e,t,r){e.exports=r(289)},function(module,exports){void 0===window.Element&&(window.Element=function(){}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){if(e!==Object(e))throw TypeError("Object.getPrototypeOf called on non-object");return e.__proto__||e.constructor.prototype||Object.prototype}),"function"!=typeof Object.getOwnPropertyNames&&(Object.getOwnPropertyNames=function(e){if(e!==Object(e))throw TypeError("Object.getOwnPropertyNames called on non-object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}),"function"!=typeof Object.create&&(Object.create=function(e,t){function r(){}if("object"!=typeof e)throw TypeError();r.prototype=e;var n=new r;if(e&&(n.constructor=r),void 0!==t){if(t!==Object(t))throw TypeError();Object.defineProperties(n,t)}return n}),function(){if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()){var e=Object.defineProperty;Object.defineProperty=function(t,r,n){if(e)try{return e(t,r,n)}catch(e){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in n&&Object.prototype.__defineGetter__.call(t,r,n.get),Object.prototype.__defineSetter__&&"set"in n&&Object.prototype.__defineSetter__.call(t,r,n.set),"value"in n&&(t[r]=n.value),t}}}(),"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(e,t){if(e!==Object(e))throw TypeError("Object.defineProperties called on non-object");var r;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&Object.defineProperty(e,r,t[r]);return e}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw TypeError("Object.keys called on non-object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw TypeError("Bind must be called on a function");var r=[].slice,n=r.call(arguments,1),i=this,o=function(){return i.apply(this instanceof t?this:e,n.concat(r.call(arguments)))};return t.prototype=i.prototype,o.prototype=new t,o}),Array.isArray=Array.isArray||function(e){return Boolean(e&&"[object Array]"===Object.prototype.toString.call(Object(e)))},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),isNaN(n)?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var i=n>=0?n:Math.max(r-Math.abs(n),0);i<r;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=r;arguments.length>1&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n))));for(var i=n>=0?Math.min(n,r-1):r-Math.abs(n);i>=0;i--)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.every||(Array.prototype.every=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();var n,i=arguments[1];for(n=0;n<r;n++)if(n in t&&!e.call(i,t[n],n,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();var n,i=arguments[1];for(n=0;n<r;n++)if(n in t&&e.call(i,t[n],n,t))return!0;return!1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();var n,i=arguments[1];for(n=0;n<r;n++)n in t&&e.call(i,t[n],n,t)}),Array.prototype.map||(Array.prototype.map=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();var n=[];n.length=r;var i,o=arguments[1];for(i=0;i<r;i++)i in t&&(n[i]=e.call(o,t[i],i,t));return n}),Array.prototype.filter||(Array.prototype.filter=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();var n,i=[],o=arguments[1];for(n=0;n<r;n++)if(n in t){var a=t[n];e.call(o,a,n,t)&&i.push(a)}return i}),Array.prototype.reduce||(Array.prototype.reduce=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();if(0===r&&1===arguments.length)throw TypeError();var n,i=0;if(arguments.length>=2)n=arguments[1];else for(;;){if(i in t){n=t[i++];break}if(++i>=r)throw TypeError()}for(;i<r;)i in t&&(n=e.call(void 0,n,t[i],i,t)),i++;return n}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();if(0===r&&1===arguments.length)throw TypeError();var n,i=r-1;if(arguments.length>=2)n=arguments[1];else for(;;){if(i in this){n=this[i--];break}if(--i<0)throw TypeError()}for(;i>=0;)i in t&&(n=e.call(void 0,n,t[i],i,t)),i--;return n}),String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s+/,"").replace(/\s+$/,"")}),Date.now||(Date.now=function(){return Number(new Date)}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){function e(e){return("00"+e).slice(-2)}return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+function(e){return("000"+e).slice(-3)}(this.getUTCMilliseconds())+"Z"}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,n,i,o,a,s=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,r=0;r<o;r+=1)a[r]=str(r,u)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,r=0;r<o;r+=1)"string"==typeof rep[r]&&((i=str(n=rep[r],u))&&a.push(quote(n)+(gap?": ":":")+i));else for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&((i=str(n,u))&&a.push(quote(n)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}var cx,escapable,gap,indent,meta,rep;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;n<r;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var r,n,i=e[t];if(i&&"object"==typeof i)for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(void 0!==(n=walk(i,r))?i[r]=n:delete i[r]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PlatformLogger=t():(e.window=e.window||{},e.window.nts=e.window.nts||{},e.window.nts.ria=e.window.nts.ria||{},e.window.nts.ria.audio=e.window.nts.ria.audio||{},e.window.nts.ria.audio.PlatformLogger=t())}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(r(1)),o=n(r(10)),a=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._loggerModule=t.toString().indexOf("HTMLAudioElement")>0?new i.default(t):new o.default(t)}return e.prototype.setInitLogInfo=function(e){this._loggerModule.setInitLogInfo(e)},e.prototype.setAudio=function(e){this._loggerModule.setAudio(e)},e.prototype.reset=function(){this._loggerModule.reset()},e.prototype.on=function(e){this._loggerModule.on(e)},e.prototype.off=function(e){this._loggerModule.off(e)},e}();a.version="1.3.0",t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(r(2)),o=n(r(7)),a=n(r(9)),s=function(e){function t(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r));return n.logSender=new o.default,n.pcType=a.default.pcType(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addEvent=function(){var e=this;this.evt=function(t){return e.eventHandler(t)},this.audio.addEventListener("loadstart",this.evt),this.audio.addEventListener("canplay",this.evt),this.audio.addEventListener("play",this.evt),this.audio.addEventListener("playing",this.evt),this.audio.addEventListener("pause",this.evt),this.audio.addEventListener("seeked",this.evt),this.audio.addEventListener("seeking",this.evt),this.audio.addEventListener("waiting",this.evt),this.audio.addEventListener("timeupdate",this.evt),this.audio.addEventListener("ended",this.evt),this.audio.addEventListener("error",this.evt)},t.prototype.removeEvent=function(){this.audio.removeEventListener("loadstart",this.evt),this.audio.removeEventListener("canplay",this.evt),this.audio.removeEventListener("play",this.evt),this.audio.removeEventListener("playing",this.evt),this.audio.removeEventListener("pause",this.evt),this.audio.removeEventListener("seeked",this.evt),this.audio.removeEventListener("seeking",this.evt),this.audio.removeEventListener("waiting",this.evt),this.audio.removeEventListener("timeupdate",this.evt),this.audio.removeEventListener("ended",this.evt),this.audio.removeEventListener("error",this.evt)},t.prototype.setAudio=function(e){this.reset(),this.audio=e,this.addEvent()},t.prototype.onError=function(){this.ptLogInfo.ec=this.audio.error.code},t.prototype.sendLog=function(e,t,r,n,i){this.logSender.sendLog(e,t,r,n,i)},t}(i.default);t.default=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(r(3)),o=n(r(4)),a=n(r(5)),s=n(r(6)),u=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._initLogInfo=null,this._playingTimer=null,this._playingTimerInterval=100,this._waitingTimer=null,this._waitingTimerInterval=100,this._observers={},this.setAudio(t)}return e.prototype.reset=function(){this.audio&&(this.removeEvent(),this._playingTimerStop(),this._waitingTimerStop(),this.audio=null,this.ptLogInfo=null)},e.prototype.on=function(e){this._observers[e]=e},e.prototype.off=function(e){delete this._observers[e]},e.prototype.dispatchEvent=function(e){for(var t in this._observers)this._observers[t](e)},e.prototype.setInitLogInfo=function(e){this._initLogInfo=e,this._initLogInfo.pt=this.pcType,this.ptLogInfo=new o.default(this._initLogInfo),this.ptLogInfo.ql=new a.default,this.ptLogInfo.ql.q=this._initLogInfo.q,this._playingTime=0,this._waitingTime=0,this._isFirstPlayed=!1,this._lock=!1,this._sendPtLog()},e.prototype.eventHandler=function(e){if(null!=this.ptLogInfo)switch(e.type){case"loadstart":break;case"canplay":this._waitingTimerStop();break;case"play":this._lock=!0,0==this._isFirstPlayed&&(this.ptLogInfo.ct=s.default.getTimeStamp(),this.ptLogInfo.ql.qit_start=+new Date);break;case"playing":this._waitingTimerStop(),0==this._isFirstPlayed&&(this._isFirstPlayed=!0,this._sendIpcLog(),this.ptLogInfo.ql.qit_end=+new Date,this._writeLocalStorage()),this._playingTimerStart(),this._lock=!1;break;case"pause":this._playingTimerStop();break;case"seeking":1==this._isFirstPlayed&&(this._lock=!0);break;case"seeked":1==this._isFirstPlayed&&(this.ptLogInfo.ql.addSeekPoint(this.audio.currentTime||parseInt(e.data)),this._writeLocalStorage(),this._lock=!1);break;case"waiting":this._playingTimerStop(),0==this._lock&&(this.ptLogInfo.ql.bc++,this._waitingTimerStart());break;case"timeupdate":e.target?this.ptLogInfo.st=Math.floor(1e3*e.target.currentTime):this.ptLogInfo.st=Math.floor(1e3*e.data),this._writeLocalStorage();break;case"ended":this._playingTimerStop(),this._sendPtLog();break;case"error":this.onError(e)}},e.prototype._sendIpcLog=function(){var e=new i.default(this._initLogInfo);this.sendLog(this._initLogInfo.ipcURL,JSON.stringify(e.toObject()),"ipc",this.dispatchEvent.bind(this),this._initLogInfo.header)},e.prototype._sendPtLog=function(){localStorage.getItem(this._getLogId())&&(this.sendLog(this._initLogInfo.ptURL,localStorage.getItem(this._getLogId()),"pt",this.dispatchEvent.bind(this),this._initLogInfo.header),localStorage.removeItem(this._getLogId()))},e.prototype._writeLocalStorage=function(){try{var e=JSON.stringify(this.ptLogInfo.toObject());localStorage.setItem(this._getLogId(),e)}catch(e){localStorage.clear()}},e.prototype._getLogId=function(){return"log."+this._initLogInfo.sid},e.prototype._playingTimerStart=function(){var e=this;this._playingTimerStop(),this._playingTimer=setInterval(function(){return e._onPlayingTimer()},this._playingTimerInterval)},e.prototype._playingTimerStop=function(){clearInterval(this._playingTimer)},e.prototype._waitingTimerStart=function(){var e=this;this._waitingTimerStop(),this._waitingTimer=setInterval(function(){return e._onWaitingTimer()},this._waitingTimerInterval)},e.prototype._waitingTimerStop=function(){clearInterval(this._waitingTimer)},e.prototype._onPlayingTimer=function(){this._playingTime+=this._playingTimerInterval,this.ptLogInfo.ql.wt=this._playingTime,this._writeLocalStorage()},e.prototype._onWaitingTimer=function(){this._waitingTime+=this._waitingTimerInterval,this.ptLogInfo.ql.bt=this._waitingTime,this._writeLocalStorage()},e}();t.default=u},function(e,t){"use strict";t.__esModule=!0;var r=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._initLogInfo=t}return e.prototype.toObject=function(){return{sid:this._initLogInfo.sid.toString(),pt:this._initLogInfo.pt,pv:this._initLogInfo.pv,cc:this._initLogInfo.cc,aid:this._initLogInfo.aid,d:this._initLogInfo.d,os:this._initLogInfo.os,osv:this._initLogInfo.osv,q:this._initLogInfo.q,extra:this._initLogInfo.extra}},e}();t.default=r},function(e,t){"use strict";t.__esModule=!0;var r=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._initLogInfo=t,this.ct="",this.ec=0,this.ql=null,this.st=0}return e.prototype.toObject=function(){return{sid:this._initLogInfo.sid.toString(),pt:this._initLogInfo.pt,cc:this._initLogInfo.cc,aid:this._initLogInfo.aid,du:this._initLogInfo.du.toString(),os:this._initLogInfo.os,osv:this._initLogInfo.osv,it:this._initLogInfo.it.toString(),ql:[this._getQlObject()],ct:this.ct,lv:this._initLogInfo.lv,prtc:this._initLogInfo.prtc.toString(),ns:this._initLogInfo.ns.toString(),ec:this.ec.toString(),pv:this._initLogInfo.pv,cdn:this._initLogInfo.cdn,st:this.st,extra:this._initLogInfo.extra}},e.prototype._getQlObject=function(){return this.ql?this.ql.toObject():null},e}();t.default=r},function(e,t){"use strict";t.__esModule=!0;var r=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._sp=[],this.bt=0,this.wt=0,this.bc=0,this.q="",this.qit_start=0,this.qit_end=0}return e.prototype.addSeekPoint=function(e){this._sp.push(Math.round(e))},e.prototype.toObject=function(){return{q:this.q,qit:(this.qit_end-this.qit_start).toString(),bt:this.bt.toString(),bc:this.bc.toString(),wt:this.wt.toString(),sp:this._sp}},e}();t.default=r},function(e,t){"use strict";t.__esModule=!0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.getTimeStamp=function(){var e=new Date;return this.leadingZeros(e.getFullYear(),4)+"-"+this.leadingZeros(e.getMonth()+1,2)+"-"+this.leadingZeros(e.getDate(),2)+" "+this.leadingZeros(e.getHours(),2)+":"+this.leadingZeros(e.getMinutes(),2)+":"+this.leadingZeros(e.getSeconds(),2)},e.leadingZeros=function(e,t){var r="";if((e=e.toString()).length<t)for(var n=0;n<t-e.length;n++)r+="0";return r+e},e}();t.default=r},function(e,t,r){"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(8)),i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),n.default.support.cors=!0}return e.prototype.sendLog=function(e,t,r,i,o){n.default.ajax({headers:o,cache:!1,url:e,type:"POST",crossDomain:!0,data:{p:encodeURIComponent(t)},success:function(e){i&&i({type:r+"_success",data:e})},error:function(e,t,n){i&&i({type:r+"_fail",data:{request:e,status:t,error:n}})},xhrFields:{withCredentials:!0}})},e}();t.default=i},function(e,t,r){var n;!function(t,r){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,function(r,i){function o(e){var t=!!e&&"length"in e&&e.length,r=le.type(e);return"function"!==r&&!le.isWindow(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function a(e,t,r){if(le.isFunction(t))return le.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return le.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(be.test(t))return le.filter(t,e,r);t=le.filter(t,e)}return le.grep(e,function(e){return le.inArray(e,t)>-1!==r})}function s(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function u(){ee.addEventListener?(ee.removeEventListener("DOMContentLoaded",l),r.removeEventListener("load",l)):(ee.detachEvent("onreadystatechange",l),r.detachEvent("onload",l))}function l(){(ee.addEventListener||"load"===r.event.type||"complete"===ee.readyState)&&(u(),le.ready())}function c(e,t,r){if(void 0===r&&1===e.nodeType){var n="data-"+t.replace(Re,"-$1").toLowerCase();if("string"==typeof(r=e.getAttribute(n))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:ke.test(r)?le.parseJSON(r):r)}catch(e){}le.data(e,t,r)}else r=void 0}return r}function d(e){var t;for(t in e)if(("data"!==t||!le.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function f(e,t,r,n){if(Le(e)){var i,o,a=le.expando,s=e.nodeType,u=s?le.cache:e,l=s?e[a]:e[a]&&a;if(l&&u[l]&&(n||u[l].data)||void 0!==r||"string"!=typeof t)return l||(l=s?e[a]=Z.pop()||le.guid++:a),u[l]||(u[l]=s?{}:{toJSON:le.noop}),"object"!=typeof t&&"function"!=typeof t||(n?u[l]=le.extend(u[l],t):u[l].data=le.extend(u[l].data,t)),o=u[l],n||(o.data||(o.data={}),o=o.data),void 0!==r&&(o[le.camelCase(t)]=r),"string"==typeof t?null==(i=o[t])&&(i=o[le.camelCase(t)]):i=o,i}}function h(e,t,r){if(Le(e)){var n,i,o=e.nodeType,a=o?le.cache:e,s=o?e[le.expando]:le.expando;if(a[s]){if(t&&(n=r?a[s]:a[s].data)){le.isArray(t)?t=t.concat(le.map(t,le.camelCase)):t in n?t=[t]:t=(t=le.camelCase(t))in n?[t]:t.split(" "),i=t.length;for(;i--;)delete n[t[i]];if(r?!d(n):!le.isEmptyObject(n))return}(r||(delete a[s].data,d(a[s])))&&(o?le.cleanData([e],!0):ue.deleteExpando||a!=a.window?delete a[s]:a[s]=void 0)}}}function p(e,t,r,n){var i,o=1,a=20,s=n?function(){return n.cur()}:function(){return le.css(e,t,"")},u=s(),l=r&&r[3]||(le.cssNumber[t]?"":"px"),c=(le.cssNumber[t]||"px"!==l&&+u)&&De.exec(le.css(e,t));if(c&&c[3]!==l){l=l||c[3],r=r||[],c=+u||1;do{c/=o=o||".5",le.style(e,t,c+l)}while(o!==(o=s()/u)&&1!==o&&--a)}return r&&(c=+c||+u||0,i=r[1]?c+(r[1]+1)*r[2]:+r[2],n&&(n.unit=l,n.start=c,n.end=i)),i}function g(e){var t=Ue.split("|"),r=e.createDocumentFragment();if(r.createElement)for(;t.length;)r.createElement(t.pop());return r}function v(e,t){var r,n,i=0,o=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],r=e.childNodes||e;null!=(n=r[i]);i++)!t||le.nodeName(n,t)?o.push(n):le.merge(o,v(n,t));return void 0===t||t&&le.nodeName(e,t)?le.merge([e],o):o}function m(e,t){for(var r,n=0;null!=(r=e[n]);n++)le._data(r,"globalEval",!t||le._data(t[n],"globalEval"))}function y(e){Me.test(e.type)&&(e.defaultChecked=e.checked)}function b(e,t,r,n,i){for(var o,a,s,u,l,c,d,f=e.length,h=g(t),p=[],b=0;b<f;b++)if((a=e[b])||0===a)if("object"===le.type(a))le.merge(p,a.nodeType?[a]:a);else if(Ge.test(a)){for(u=u||h.appendChild(t.createElement("div")),l=(je.exec(a)||["",""])[1].toLowerCase(),d=Be[l]||Be._default,u.innerHTML=d[1]+le.htmlPrefilter(a)+d[2],o=d[0];o--;)u=u.lastChild;if(!ue.leadingWhitespace&&Fe.test(a)&&p.push(t.createTextNode(Fe.exec(a)[0])),!ue.tbody)for(o=(a="table"!==l||He.test(a)?"<table>"!==d[1]||He.test(a)?0:u:u.firstChild)&&a.childNodes.length;o--;)le.nodeName(c=a.childNodes[o],"tbody")&&!c.childNodes.length&&a.removeChild(c);for(le.merge(p,u.childNodes),u.textContent="";u.firstChild;)u.removeChild(u.firstChild);u=h.lastChild}else p.push(t.createTextNode(a));for(u&&h.removeChild(u),ue.appendChecked||le.grep(v(p,"input"),y),b=0;a=p[b++];)if(n&&le.inArray(a,n)>-1)i&&i.push(a);else if(s=le.contains(a.ownerDocument,a),u=v(h.appendChild(a),"script"),s&&m(u),r)for(o=0;a=u[o++];)Ne.test(a.type||"")&&r.push(a);return u=null,h}function _(){return!0}function E(){return!1}function T(){try{return ee.activeElement}catch(e){}}function S(e,t,r,n,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof r&&(n=n||r,r=void 0),t)S(e,s,r,n,t[s],o);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=E;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return le().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=le.guid++)),e.each(function(){le.event.add(this,t,i,n,r)})}function w(e,t){return le.nodeName(e,"table")&&le.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function A(e){return e.type=(null!==le.find.attr(e,"type"))+"/"+e.type,e}function x(e){var t=Ze.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function L(e,t){if(1===t.nodeType&&le.hasData(e)){var r,n,i,o=le._data(e),a=le._data(t,o),s=o.events;if(s)for(r in delete a.handle,a.events={},s)for(n=0,i=s[r].length;n<i;n++)le.event.add(t,r,s[r][n]);a.data&&(a.data=le.extend({},a.data))}}function k(e,t){var r,n,i;if(1===t.nodeType){if(r=t.nodeName.toLowerCase(),!ue.noCloneEvent&&t[le.expando]){for(n in(i=le._data(t)).events)le.removeEvent(t,n,i.handle);t.removeAttribute(le.expando)}"script"===r&&t.text!==e.text?(A(t).text=e.text,x(t)):"object"===r?(t.parentNode&&(t.outerHTML=e.outerHTML),ue.html5Clone&&e.innerHTML&&!le.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===r&&Me.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===r?t.defaultSelected=t.selected=e.defaultSelected:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}}function R(e,t,r,n){t=re.apply([],t);var i,o,a,s,u,l,c=0,d=e.length,f=d-1,h=t[0],p=le.isFunction(h);if(p||d>1&&"string"==typeof h&&!ue.checkClone&&Qe.test(h))return e.each(function(i){var o=e.eq(i);p&&(t[0]=h.call(this,i,o.html())),R(o,t,r,n)});if(d&&(i=(l=b(t,e[0].ownerDocument,!1,e,n)).firstChild,1===l.childNodes.length&&(l=i),i||n)){for(a=(s=le.map(v(l,"script"),A)).length;c<d;c++)o=l,c!==f&&(o=le.clone(o,!0,!0),a&&le.merge(s,v(o,"script"))),r.call(e[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,le.map(s,x),c=0;c<a;c++)o=s[c],Ne.test(o.type||"")&&!le._data(o,"globalEval")&&le.contains(u,o)&&(o.src?le._evalUrl&&le._evalUrl(o.src):le.globalEval((o.text||o.textContent||o.innerHTML||"").replace(et,"")));l=i=null}return e}function O(e,t,r){for(var n,i=t?le.filter(t,e):e,o=0;null!=(n=i[o]);o++)r||1!==n.nodeType||le.cleanData(v(n)),n.parentNode&&(r&&le.contains(n.ownerDocument,n)&&m(v(n,"script")),n.parentNode.removeChild(n));return e}function D(e,t){var r=le(t.createElement(e)).appendTo(t.body),n=le.css(r[0],"display");return r.detach(),n}function P(e){var t=ee,r=nt[e];return r||("none"!==(r=D(e,t))&&r||((t=((rt=(rt||le("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||rt[0].contentDocument).document).write(),t.close(),r=D(e,t),rt.detach()),nt[e]=r),r}function C(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function I(e){if(e in yt)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),r=mt.length;r--;)if((e=mt[r]+t)in yt)return e}function M(e,t){for(var r,n,i,o=[],a=0,s=e.length;a<s;a++)(n=e[a]).style&&(o[a]=le._data(n,"olddisplay"),r=n.style.display,t?(o[a]||"none"!==r||(n.style.display=""),""===n.style.display&&Ce(n)&&(o[a]=le._data(n,"olddisplay",P(n.nodeName)))):(i=Ce(n),(r&&"none"!==r||!i)&&le._data(n,"olddisplay",i?r:le.css(n,"display"))));for(a=0;a<s;a++)(n=e[a]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[a]||"":"none"));return e}function j(e,t,r){var n=pt.exec(t);return n?Math.max(0,n[1]-(r||0))+(n[2]||"px"):t}function N(e,t,r,n,i){for(var o=r===(n?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===r&&(a+=le.css(e,r+Pe[o],!0,i)),n?("content"===r&&(a-=le.css(e,"padding"+Pe[o],!0,i)),"margin"!==r&&(a-=le.css(e,"border"+Pe[o]+"Width",!0,i))):(a+=le.css(e,"padding"+Pe[o],!0,i),"padding"!==r&&(a+=le.css(e,"border"+Pe[o]+"Width",!0,i)));return a}function F(e,t,r){var n=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=ut(e),a=ue.boxSizing&&"border-box"===le.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=lt(e,t,o))<0||null==i)&&(i=e.style[t]),ot.test(i))return i;n=a&&(ue.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+N(e,t,r||(a?"border":"content"),n,o)+"px"}function U(e,t,r,n,i){return new U.prototype.init(e,t,r,n,i)}function B(){return r.setTimeout(function(){bt=void 0}),bt=le.now()}function G(e,t){var r,n={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)n["margin"+(r=Pe[i])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function H(e,t,r){for(var n,i=(q.tweeners[t]||[]).concat(q.tweeners["*"]),o=0,a=i.length;o<a;o++)if(n=i[o].call(r,t,e))return n}function q(e,t,r){var n,i,o=0,a=q.prefilters.length,s=le.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=bt||B(),r=Math.max(0,l.startTime+l.duration-t),n=1-(r/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(n);return s.notifyWith(e,[l,n,r]),n<1&&a?r:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:le.extend({},t),opts:le.extend(!0,{specialEasing:{},easing:le.easing._default},r),originalProperties:t,originalOptions:r,startTime:bt||B(),duration:r.duration,tweens:[],createTween:function(t,r){var n=le.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var r=0,n=t?l.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)l.tweens[r].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(function(e,t){var r,n,i,o,a;for(r in e)if(i=t[n=le.camelCase(r)],o=e[r],le.isArray(o)&&(i=o[1],o=e[r]=o[0]),r!==n&&(e[n]=o,delete e[r]),(a=le.cssHooks[n])&&"expand"in a)for(r in o=a.expand(o),delete e[n],o)r in e||(e[r]=o[r],t[r]=i);else t[n]=i}(c,l.opts.specialEasing);o<a;o++)if(n=q.prefilters[o].call(l,e,c,l.opts))return le.isFunction(n.stop)&&(le._queueHooks(l.elem,l.opts.queue).stop=le.proxy(n.stop,n)),n;return le.map(c,H,l),le.isFunction(l.opts.start)&&l.opts.start.call(e,l),le.fx.timer(le.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function K(e){return le.attr(e,"class")||""}function W(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,o=t.toLowerCase().match(xe)||[];if(le.isFunction(r))for(;n=o[i++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function V(e,t,r,n){function i(s){var u;return o[s]=!0,le.each(e[s]||[],function(e,s){var l=s(t,r,n);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},a=e===Wt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function z(e,t){var r,n,i=le.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&le.extend(!0,e,r),e}function Y(e){return e.style&&e.style.display||le.css(e,"display")}function X(e,t,r,n){var i;if(le.isArray(t))le.each(t,function(t,i){r||$t.test(e)?n(e,i):X(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,n)});else if(r||"object"!==le.type(t))n(e,t);else for(i in t)X(e+"["+i+"]",t[i],r,n)}function $(){try{return new r.XMLHttpRequest}catch(e){}}function J(){try{return new r.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function Q(e){return le.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var Z=[],ee=r.document,te=Z.slice,re=Z.concat,ne=Z.push,ie=Z.indexOf,oe={},ae=oe.toString,se=oe.hasOwnProperty,ue={},le=function(e,t){return new le.fn.init(e,t)},ce=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,de=/^-ms-/,fe=/-([\da-z])/gi,he=function(e,t){return t.toUpperCase()};le.fn=le.prototype={jquery:"1.12.4",constructor:le,selector:"",length:0,toArray:function(){return te.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:te.call(this)},pushStack:function(e){var t=le.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return le.each(this,e)},map:function(e){return this.pushStack(le.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:ne,sort:Z.sort,splice:Z.splice},le.extend=le.fn.extend=function(){var e,t,r,n,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||le.isFunction(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(i=arguments[s]))for(n in i)e=a[n],a!==(r=i[n])&&(l&&r&&(le.isPlainObject(r)||(t=le.isArray(r)))?(t?(t=!1,o=e&&le.isArray(e)?e:[]):o=e&&le.isPlainObject(e)?e:{},a[n]=le.extend(l,o,r)):void 0!==r&&(a[n]=r));return a},le.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===le.type(e)},isArray:Array.isArray||function(e){return"array"===le.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!le.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==le.type(e)||e.nodeType||le.isWindow(e))return!1;try{if(e.constructor&&!se.call(e,"constructor")&&!se.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(!ue.ownFirst)for(t in e)return se.call(e,t);for(t in e);return void 0===t||se.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?oe[ae.call(e)]||"object":typeof e},globalEval:function(e){e&&le.trim(e)&&(r.execScript||function(e){r.eval.call(r,e)})(e)},camelCase:function(e){return e.replace(de,"ms-").replace(fe,he)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,n=0;if(o(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ce,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(o(Object(e))?le.merge(r,"string"==typeof e?[e]:e):ne.call(r,e)),r},inArray:function(e,t,r){var n;if(t){if(ie)return ie.call(t,e,r);for(n=t.length,r=r?r<0?Math.max(0,n+r):r:0;r<n;r++)if(r in t&&t[r]===e)return r}return-1},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;)e[i++]=t[n++];if(r!=r)for(;void 0!==t[n];)e[i++]=t[n++];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,o=e.length,a=!r;i<o;i++)!t(e[i],i)!==a&&n.push(e[i]);return n},map:function(e,t,r){var n,i,a=0,s=[];if(o(e))for(n=e.length;a<n;a++)null!=(i=t(e[a],a,r))&&s.push(i);else for(a in e)null!=(i=t(e[a],a,r))&&s.push(i);return re.apply([],s)},guid:1,proxy:function(e,t){var r,n,i;if("string"==typeof t&&(i=e[t],t=e,e=i),le.isFunction(e))return r=te.call(arguments,2),(n=function(){return e.apply(t||this,r.concat(te.call(arguments)))}).guid=e.guid=e.guid||le.guid++,n},now:function(){return+new Date},support:ue}),"function"==typeof Symbol&&(le.fn[Symbol.iterator]=Z[Symbol.iterator]),le.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){oe["[object "+t+"]"]=t.toLowerCase()});var pe=function(e){function t(e,t,r,n){var i,o,a,s,u,l,d,h,p=t&&t.ownerDocument,g=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return r;if(!n&&((t?t.ownerDocument||t:B)!==P&&D(t),t=t||P,I)){if(11!==g&&(l=me.exec(e)))if(i=l[1]){if(9===g){if(!(a=t.getElementById(i)))return r;if(a.id===i)return r.push(a),r}else if(p&&(a=p.getElementById(i))&&F(t,a)&&a.id===i)return r.push(a),r}else{if(l[2])return Q.apply(r,t.getElementsByTagName(e)),r;if((i=l[3])&&E.getElementsByClassName&&t.getElementsByClassName)return Q.apply(r,t.getElementsByClassName(i)),r}if(E.qsa&&!W[e+" "]&&(!M||!M.test(e))){if(1!==g)p=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,"\\$&"):t.setAttribute("id",s=U),o=(d=A(e)).length,u=fe.test(s)?"#"+s:"[id='"+s+"']";o--;)d[o]=u+" "+f(d[o]);h=d.join(","),p=ye.test(e)&&c(t.parentNode)||t}if(h)try{return Q.apply(r,p.querySelectorAll(h)),r}catch(e){}finally{s===U&&t.removeAttribute("id")}}}return L(e.replace(se,"$1"),t,r,n)}function r(){var e=[];return function t(r,n){return e.push(r+" ")>T.cacheLength&&delete t[e.shift()],t[r+" "]=n}}function n(e){return e[U]=!0,e}function i(e){var t=P.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var r=e.split("|"),n=r.length;n--;)T.attrHandle[r[n]]=t}function a(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||z)-(~e.sourceIndex||z);if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function s(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function u(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function l(e){return n(function(t){return t=+t,n(function(r,n){for(var i,o=e([],r.length,t),a=o.length;a--;)r[i=o[a]]&&(r[i]=!(n[i]=r[i]))})})}function c(e){return e&&void 0!==e.getElementsByTagName&&e}function d(){}function f(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function h(e,t,r){var n=t.dir,i=r&&"parentNode"===n,o=H++;return t.first?function(t,r,o){for(;t=t[n];)if(1===t.nodeType||i)return e(t,r,o)}:function(t,r,a){var s,u,l,c=[G,o];if(a){for(;t=t[n];)if((1===t.nodeType||i)&&e(t,r,a))return!0}else for(;t=t[n];)if(1===t.nodeType||i){if((s=(u=(l=t[U]||(t[U]={}))[t.uniqueID]||(l[t.uniqueID]={}))[n])&&s[0]===G&&s[1]===o)return c[2]=s[2];if(u[n]=c,c[2]=e(t,r,a))return!0}}}function p(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function g(e,r,n){for(var i=0,o=r.length;i<o;i++)t(e,r[i],n);return n}function v(e,t,r,n,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(r&&!r(o,n,i)||(a.push(o),l&&t.push(s)));return a}function m(e,t,r,i,o,a){return i&&!i[U]&&(i=m(i)),o&&!o[U]&&(o=m(o,a)),n(function(n,a,s,u){var l,c,d,f=[],h=[],p=a.length,m=n||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!n&&t?m:v(m,f,e,s,u),b=r?o||(n?e:p||i)?[]:a:y;if(r&&r(y,b,s,u),i)for(l=v(b,h),i(l,[],s,u),c=l.length;c--;)(d=l[c])&&(b[h[c]]=!(y[h[c]]=d));if(n){if(o||e){if(o){for(l=[],c=b.length;c--;)(d=b[c])&&l.push(y[c]=d);o(null,b=[],l,u)}for(c=b.length;c--;)(d=b[c])&&(l=o?ee(n,d):f[c])>-1&&(n[l]=!(a[l]=d))}}else b=v(b===a?b.splice(p,b.length):b),o?o(null,a,b,u):Q.apply(a,b)})}function y(e){for(var t,r,n,i=e.length,o=T.relative[e[0].type],a=o||T.relative[" "],s=o?1:0,u=h(function(e){return e===t},a,!0),l=h(function(e){return ee(t,e)>-1},a,!0),c=[function(e,r,n){var i=!o&&(n||r!==k)||((t=r).nodeType?u(e,r,n):l(e,r,n));return t=null,i}];s<i;s++)if(r=T.relative[e[s].type])c=[h(p(c),r)];else{if((r=T.filter[e[s].type].apply(null,e[s].matches))[U]){for(n=++s;n<i&&!T.relative[e[n].type];n++);return m(s>1&&p(c),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),r,s<n&&y(e.slice(s,n)),n<i&&y(e=e.slice(n)),n<i&&f(e))}c.push(r)}return p(c)}function b(e,r){var i=r.length>0,o=e.length>0,a=function(n,a,s,u,l){var c,d,f,h=0,p="0",g=n&&[],m=[],y=k,b=n||o&&T.find.TAG("*",l),_=G+=null==y?1:Math.random()||.1,E=b.length;for(l&&(k=a===P||a||l);p!==E&&null!=(c=b[p]);p++){if(o&&c){for(d=0,a||c.ownerDocument===P||(D(c),s=!I);f=e[d++];)if(f(c,a||P,s)){u.push(c);break}l&&(G=_)}i&&((c=!f&&c)&&h--,n&&g.push(c))}if(h+=p,i&&p!==h){for(d=0;f=r[d++];)f(g,m,a,s);if(n){if(h>0)for(;p--;)g[p]||m[p]||(m[p]=$.call(u));m=v(m)}Q.apply(u,m),l&&!n&&m.length>0&&h+r.length>1&&t.uniqueSort(u)}return l&&(G=_,k=y),g};return i?n(a):a}var _,E,T,S,w,A,x,L,k,R,O,D,P,C,I,M,j,N,F,U="sizzle"+1*new Date,B=e.document,G=0,H=0,q=r(),K=r(),W=r(),V=function(e,t){return e===t&&(O=!0),0},z=1<<31,Y={}.hasOwnProperty,X=[],$=X.pop,J=X.push,Q=X.push,Z=X.slice,ee=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie="\\["+re+"*("+ne+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+re+"*\\]",oe=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ae=new RegExp(re+"+","g"),se=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),ue=new RegExp("^"+re+"*,"+re+"*"),le=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),ce=new RegExp("="+re+"*([^\\]'\"]*?)"+re+"*\\]","g"),de=new RegExp(oe),fe=new RegExp("^"+ne+"$"),he={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+re+"?|("+re+")|.)","ig"),Ee=function(e,t,r){var n="0x"+t-65536;return n!=n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Te=function(){D()};try{Q.apply(X=Z.call(B.childNodes),B.childNodes),X[B.childNodes.length].nodeType}catch(e){Q={apply:X.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}for(_ in E=t.support={},w=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},D=t.setDocument=function(e){var t,r,n=e?e.ownerDocument||e:B;return n!==P&&9===n.nodeType&&n.documentElement?(C=(P=n).documentElement,I=!w(P),(r=P.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",Te,!1):r.attachEvent&&r.attachEvent("onunload",Te)),E.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),E.getElementsByTagName=i(function(e){return e.appendChild(P.createComment("")),!e.getElementsByTagName("*").length}),E.getElementsByClassName=ve.test(P.getElementsByClassName),E.getById=i(function(e){return C.appendChild(e).id=U,!P.getElementsByName||!P.getElementsByName(U).length}),E.getById?(T.find.ID=function(e,t){if(void 0!==t.getElementById&&I){var r=t.getElementById(e);return r?[r]:[]}},T.filter.ID=function(e){var t=e.replace(_e,Ee);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(_e,Ee);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}}),T.find.TAG=E.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):E.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;r=o[i++];)1===r.nodeType&&n.push(r);return n}return o},T.find.CLASS=E.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&I)return t.getElementsByClassName(e)},j=[],M=[],(E.qsa=ve.test(P.querySelectorAll))&&(i(function(e){C.appendChild(e).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+re+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+U+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+U+"+*").length||M.push(".#.+[+~]")}),i(function(e){var t=P.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+re+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(E.matchesSelector=ve.test(N=C.matches||C.webkitMatchesSelector||C.mozMatchesSelector||C.oMatchesSelector||C.msMatchesSelector))&&i(function(e){E.disconnectedMatch=N.call(e,"div"),N.call(e,"[s!='']:x"),j.push("!=",oe)}),M=M.length&&new RegExp(M.join("|")),j=j.length&&new RegExp(j.join("|")),t=ve.test(C.compareDocumentPosition),F=t||ve.test(C.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return O=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!E.sortDetached&&t.compareDocumentPosition(e)===r?e===P||e.ownerDocument===B&&F(B,e)?-1:t===P||t.ownerDocument===B&&F(B,t)?1:R?ee(R,e)-ee(R,t):0:4&r?-1:1)}:function(e,t){if(e===t)return O=!0,0;var r,n=0,i=e.parentNode,o=t.parentNode,s=[e],u=[t];if(!i||!o)return e===P?-1:t===P?1:i?-1:o?1:R?ee(R,e)-ee(R,t):0;if(i===o)return a(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)u.unshift(r);for(;s[n]===u[n];)n++;return n?a(s[n],u[n]):s[n]===B?-1:u[n]===B?1:0},P):P},t.matches=function(e,r){return t(e,null,null,r)},t.matchesSelector=function(e,r){if((e.ownerDocument||e)!==P&&D(e),r=r.replace(ce,"='$1']"),E.matchesSelector&&I&&!W[r+" "]&&(!j||!j.test(r))&&(!M||!M.test(r)))try{var n=N.call(e,r);if(n||E.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(r,P,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==P&&D(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==P&&D(e);var r=T.attrHandle[t.toLowerCase()],n=r&&Y.call(T.attrHandle,t.toLowerCase())?r(e,t,!I):void 0;return void 0!==n?n:E.attributes||!I?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,r=[],n=0,i=0;if(O=!E.detectDuplicates,R=!E.sortStable&&e.slice(0),e.sort(V),O){for(;t=e[i++];)t===e[i]&&(n=r.push(i));for(;n--;)e.splice(r[n],1)}return R=null,e},S=t.getText=function(e){var t,r="",n=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=S(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[n++];)r+=S(t);return r},(T=t.selectors={cacheLength:50,createPseudo:n,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,Ee),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,Ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&de.test(r)&&(t=A(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,Ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,r,n){return function(i){var o=t.attr(i,e);return null==o?"!="===r:!r||(o+="","="===r?o===n:"!="===r?o!==n:"^="===r?n&&0===o.indexOf(n):"*="===r?n&&o.indexOf(n)>-1:"$="===r?n&&o.slice(-n.length)===n:"~="===r?(" "+o.replace(ae," ")+" ").indexOf(n)>-1:"|="===r&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,r,n,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,u){var l,c,d,f,h,p,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(v){if(o){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?v.firstChild:v.lastChild],a&&y){for(b=(h=(l=(c=(d=(f=v)[U]||(f[U]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===G&&l[1])&&l[2],f=h&&v.childNodes[h];f=++h&&f&&f[g]||(b=h=0)||p.pop();)if(1===f.nodeType&&++b&&f===t){c[e]=[G,h,b];break}}else if(y&&(b=h=(l=(c=(d=(f=t)[U]||(f[U]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===G&&l[1]),!1===b)for(;(f=++h&&f&&f[g]||(b=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++b||(y&&((c=(d=f[U]||(f[U]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]=[G,b]),f!==t)););return(b-=i)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,r){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[U]?o(r):o.length>1?(i=[e,e,"",r],T.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,i=o(e,r),a=i.length;a--;)e[n=ee(e,i[a])]=!(t[n]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:n(function(e){var t=[],r=[],i=x(e.replace(se,"$1"));return i[U]?n(function(e,t,r,n){for(var o,a=i(e,null,n,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,n,o){return t[0]=e,i(t,null,o,r),t[0]=null,!r.pop()}}),has:n(function(e){return function(r){return t(e,r).length>0}}),contains:n(function(e){return e=e.replace(_e,Ee),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:n(function(e){return fe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_e,Ee).toLowerCase(),function(t){var r;do{if(r=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===C},focus:function(e){return e===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,r){return[r<0?r+t:r]}),even:l(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:l(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:l(function(e,t,r){for(var n=r<0?r+t:r;--n>=0;)e.push(n);return e}),gt:l(function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e})}}).pseudos.nth=T.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[_]=s(_);for(_ in{submit:!0,reset:!0})T.pseudos[_]=u(_);return d.prototype=T.filters=T.pseudos,T.setFilters=new d,A=t.tokenize=function(e,r){var n,i,o,a,s,u,l,c=K[e+" "];if(c)return r?0:c.slice(0);for(s=e,u=[],l=T.preFilter;s;){for(a in n&&!(i=ue.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=le.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(se," ")}),s=s.slice(n.length)),T.filter)!(i=he[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return r?s.length:s?t.error(e):K(e,u).slice(0)},x=t.compile=function(e,t){var r,n=[],i=[],o=W[e+" "];if(!o){for(t||(t=A(e)),r=t.length;r--;)(o=y(t[r]))[U]?n.push(o):i.push(o);(o=W(e,b(i,n))).selector=e}return o},L=t.select=function(e,t,r,n){var i,o,a,s,u,l="function"==typeof e&&e,d=!n&&A(e=l.selector||e);if(r=r||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&E.getById&&9===t.nodeType&&I&&T.relative[o[1].type]){if(!(t=(T.find.ID(a.matches[0].replace(_e,Ee),t)||[])[0]))return r;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(a=o[i],!T.relative[s=a.type]);)if((u=T.find[s])&&(n=u(a.matches[0].replace(_e,Ee),ye.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),!(e=n.length&&f(o)))return Q.apply(r,n),r;break}}return(l||x(e,d))(n,t,!I,r,!t||ye.test(e)&&c(t.parentNode)||t),r},E.sortStable=U.split("").sort(V).join("")===U,E.detectDuplicates=!!O,D(),E.sortDetached=i(function(e){return 1&e.compareDocumentPosition(P.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),E.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(r);le.find=pe,le.expr=pe.selectors,le.expr[":"]=le.expr.pseudos,le.uniqueSort=le.unique=pe.uniqueSort,le.text=pe.getText,le.isXMLDoc=pe.isXML,le.contains=pe.contains;var ge=function(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&le(e).is(r))break;n.push(e)}return n},ve=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},me=le.expr.match.needsContext,ye=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,be=/^.[^:#\[\.,]*$/;le.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?le.find.matchesSelector(n,e)?[n]:[]:le.find.matches(e,le.grep(t,function(e){return 1===e.nodeType}))},le.fn.extend({find:function(e){var t,r=[],n=this,i=n.length;if("string"!=typeof e)return this.pushStack(le(e).filter(function(){for(t=0;t<i;t++)if(le.contains(n[t],this))return!0}));for(t=0;t<i;t++)le.find(e,n[t],r);return(r=this.pushStack(i>1?le.unique(r):r)).selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(a(this,e||[],!1))},not:function(e){return this.pushStack(a(this,e||[],!0))},is:function(e){return!!a(this,"string"==typeof e&&me.test(e)?le(e):e||[],!1).length}});var _e,Ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(le.fn.init=function(e,t,r){var n,i;if(!e)return this;if(r=r||_e,"string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Ee.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof le?t[0]:t,le.merge(this,le.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ee,!0)),ye.test(n[1])&&le.isPlainObject(t))for(n in t)le.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((i=ee.getElementById(n[2]))&&i.parentNode){if(i.id!==n[2])return _e.find(e);this.length=1,this[0]=i}return this.context=ee,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):le.isFunction(e)?void 0!==r.ready?r.ready(e):e(le):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),le.makeArray(e,this))}).prototype=le.fn,_e=le(ee);var Te=/^(?:parents|prev(?:Until|All))/,Se={children:!0,contents:!0,next:!0,prev:!0};le.fn.extend({has:function(e){var t,r=le(e,this),n=r.length;return this.filter(function(){for(t=0;t<n;t++)if(le.contains(this,r[t]))return!0})},closest:function(e,t){for(var r,n=0,i=this.length,o=[],a=me.test(e)||"string"!=typeof e?le(e,t||this.context):0;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&le.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?le.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?le.inArray(this[0],le(e)):le.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(le.uniqueSort(le.merge(this.get(),le(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),le.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ge(e,"parentNode")},parentsUntil:function(e,t,r){return ge(e,"parentNode",r)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return ge(e,"nextSibling")},prevAll:function(e){return ge(e,"previousSibling")},nextUntil:function(e,t,r){return ge(e,"nextSibling",r)},prevUntil:function(e,t,r){return ge(e,"previousSibling",r)},siblings:function(e){return ve((e.parentNode||{}).firstChild,e)},children:function(e){return ve(e.firstChild)},contents:function(e){return le.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:le.merge([],e.childNodes)}},function(e,t){le.fn[e]=function(r,n){var i=le.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=le.filter(n,i)),this.length>1&&(Se[e]||(i=le.uniqueSort(i)),Te.test(e)&&(i=i.reverse())),this.pushStack(i)}});var we,Ae,xe=/\S+/g;for(Ae in le.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return le.each(e.match(xe)||[],function(e,r){t[r]=!0}),t}(e):le.extend({},e);var t,r,n,i,o=[],a=[],s=-1,u=function(){for(i=e.once,n=t=!0;a.length;s=-1)for(r=a.shift();++s<o.length;)!1===o[s].apply(r[0],r[1])&&e.stopOnFalse&&(s=o.length,r=!1);e.memory||(r=!1),t=!1,i&&(o=r?[]:"")},l={add:function(){return o&&(r&&!t&&(s=o.length-1,a.push(r)),function t(r){le.each(r,function(r,n){le.isFunction(n)?e.unique&&l.has(n)||o.push(n):n&&n.length&&"string"!==le.type(n)&&t(n)})}(arguments),r&&!t&&u()),this},remove:function(){return le.each(arguments,function(e,t){for(var r;(r=le.inArray(t,o,r))>-1;)o.splice(r,1),r<=s&&s--}),this},has:function(e){return e?le.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=r="",this},disabled:function(){return!o},lock:function(){return i=!0,r||l.disable(),this},locked:function(){return!!i},fireWith:function(e,r){return i||(r=[e,(r=r||[]).slice?r.slice():r],a.push(r),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},le.extend({Deferred:function(e){var t=[["resolve","done",le.Callbacks("once memory"),"resolved"],["reject","fail",le.Callbacks("once memory"),"rejected"],["notify","progress",le.Callbacks("memory")]],r="pending",n={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return le.Deferred(function(r){le.each(t,function(t,o){var a=le.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&le.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[o[0]+"With"](this===n?r.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?le.extend(e,n):n}},i={};return n.pipe=n.then,le.each(t,function(e,o){var a=o[2],s=o[3];n[o[1]]=a.add,s&&a.add(function(){r=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?n:this,arguments),this},i[o[0]+"With"]=a.fireWith}),n.promise(i),e&&e.call(i,i),i},when:function(e){var t,r,n,i=0,o=te.call(arguments),a=o.length,s=1!==a||e&&le.isFunction(e.promise)?a:0,u=1===s?e:le.Deferred(),l=function(e,r,n){return function(i){r[e]=this,n[e]=arguments.length>1?te.call(arguments):i,n===t?u.notifyWith(r,n):--s||u.resolveWith(r,n)}};if(a>1)for(t=new Array(a),r=new Array(a),n=new Array(a);i<a;i++)o[i]&&le.isFunction(o[i].promise)?o[i].promise().progress(l(i,r,t)).done(l(i,n,o)).fail(u.reject):--s;return s||u.resolveWith(n,o),u.promise()}}),le.fn.ready=function(e){return le.ready.promise().done(e),this},le.extend({isReady:!1,readyWait:1,holdReady:function(e){e?le.readyWait++:le.ready(!0)},ready:function(e){(!0===e?--le.readyWait:le.isReady)||(le.isReady=!0,!0!==e&&--le.readyWait>0||(we.resolveWith(ee,[le]),le.fn.triggerHandler&&(le(ee).triggerHandler("ready"),le(ee).off("ready"))))}}),le.ready.promise=function(e){if(!we)if(we=le.Deferred(),"complete"===ee.readyState||"loading"!==ee.readyState&&!ee.documentElement.doScroll)r.setTimeout(le.ready);else if(ee.addEventListener)ee.addEventListener("DOMContentLoaded",l),r.addEventListener("load",l);else{ee.attachEvent("onreadystatechange",l),r.attachEvent("onload",l);var t=!1;try{t=null==r.frameElement&&ee.documentElement}catch(e){}t&&t.doScroll&&function e(){if(!le.isReady){try{t.doScroll("left")}catch(t){return r.setTimeout(e,50)}u(),le.ready()}}()}return we.promise(e)},le.ready.promise(),le(ue))break;ue.ownFirst="0"===Ae,ue.inlineBlockNeedsLayout=!1,le(function(){var e,t,r,n;(r=ee.getElementsByTagName("body")[0])&&r.style&&(t=ee.createElement("div"),(n=ee.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",r.appendChild(n).appendChild(t),void 0!==t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ue.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(r.style.zoom=1)),r.removeChild(n))}),function(){var e=ee.createElement("div");ue.deleteExpando=!0;try{delete e.test}catch(e){ue.deleteExpando=!1}e=null}();var Le=function(e){var t=le.noData[(e.nodeName+" ").toLowerCase()],r=+e.nodeType||1;return(1===r||9===r)&&(!t||!0!==t&&e.getAttribute("classid")===t)},ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Re=/([A-Z])/g;le.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?le.cache[e[le.expando]]:e[le.expando])&&!d(e)},data:function(e,t,r){return f(e,t,r)},removeData:function(e,t){return h(e,t)},_data:function(e,t,r){return f(e,t,r,!0)},_removeData:function(e,t){return h(e,t,!0)}}),le.fn.extend({data:function(e,t){var r,n,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=le.data(o),1===o.nodeType&&!le._data(o,"parsedAttrs"))){for(r=a.length;r--;)a[r]&&(0===(n=a[r].name).indexOf("data-")&&c(o,n=le.camelCase(n.slice(5)),i[n]));le._data(o,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){le.data(this,e)}):arguments.length>1?this.each(function(){le.data(this,e,t)}):o?c(o,e,le.data(o,e)):void 0},removeData:function(e){return this.each(function(){le.removeData(this,e)})}}),le.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=le._data(e,t),r&&(!n||le.isArray(r)?n=le._data(e,t,le.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=le.queue(e,t),n=r.length,i=r.shift(),o=le._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete o.stop,i.call(e,function(){le.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return le._data(e,r)||le._data(e,r,{empty:le.Callbacks("once memory").add(function(){le._removeData(e,t+"queue"),le._removeData(e,r)})})}}),le.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?le.queue(this[0],e):void 0===t?this:this.each(function(){var r=le.queue(this,e,t);le._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&le.dequeue(this,e)})},dequeue:function(e){return this.each(function(){le.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=le.Deferred(),o=this,a=this.length,s=function(){--n||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(r=le._data(o[a],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(s));return s(),i.promise(t)}}),function(){var e;ue.shrinkWrapBlocks=function(){return null!=e?e:(e=!1,(r=ee.getElementsByTagName("body")[0])&&r.style?(t=ee.createElement("div"),(n=ee.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",r.appendChild(n).appendChild(t),void 0!==t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(ee.createElement("div")).style.width="5px",e=3!==t.offsetWidth),r.removeChild(n),e):void 0);var t,r,n}}();var Oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,De=new RegExp("^(?:([+-])=|)("+Oe+")([a-z%]*)$","i"),Pe=["Top","Right","Bottom","Left"],Ce=function(e,t){return e=t||e,"none"===le.css(e,"display")||!le.contains(e.ownerDocument,e)},Ie=function(e,t,r,n,i,o,a){var s=0,u=e.length,l=null==r;if("object"===le.type(r))for(s in i=!0,r)Ie(e,t,s,r[s],!0,o,a);else if(void 0!==n&&(i=!0,le.isFunction(n)||(a=!0),l&&(a?(t.call(e,n),t=null):(l=t,t=function(e,t,r){return l.call(le(e),r)})),t))for(;s<u;s++)t(e[s],r,a?n:n.call(e[s],s,t(e[s],r)));return i?e:l?t.call(e):u?t(e[0],r):o},Me=/^(?:checkbox|radio)$/i,je=/<([\w:-]+)/,Ne=/^$|\/(?:java|ecma)script/i,Fe=/^\s+/,Ue="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var e=ee.createElement("div"),t=ee.createDocumentFragment(),r=ee.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ue.leadingWhitespace=3===e.firstChild.nodeType,ue.tbody=!e.getElementsByTagName("tbody").length,ue.htmlSerialize=!!e.getElementsByTagName("link").length,ue.html5Clone="<:nav></:nav>"!==ee.createElement("nav").cloneNode(!0).outerHTML,r.type="checkbox",r.checked=!0,t.appendChild(r),ue.appendChecked=r.checked,e.innerHTML="<textarea>x</textarea>",ue.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),(r=ee.createElement("input")).setAttribute("type","radio"),r.setAttribute("checked","checked"),r.setAttribute("name","t"),e.appendChild(r),ue.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ue.noCloneEvent=!!e.addEventListener,e[le.expando]=1,ue.attributes=!e.getAttribute(le.expando)}();var Be={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ue.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Be.optgroup=Be.option,Be.tbody=Be.tfoot=Be.colgroup=Be.caption=Be.thead,Be.th=Be.td;var Ge=/<|&#?\w+;/,He=/<tbody/i;!function(){var e,t,n=ee.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(ue[e]=t in r)||(n.setAttribute(t,"t"),ue[e]=!1===n.attributes[t].expando);n=null}();var qe=/^(?:input|select|textarea)$/i,Ke=/^key/,We=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ve=/^(?:focusinfocus|focusoutblur)$/,ze=/^([^.]*)(?:\.(.+)|)/;le.event={global:{},add:function(e,t,r,n,i){var o,a,s,u,l,c,d,f,h,p,g,v=le._data(e);if(v){for(r.handler&&(r=(u=r).handler,i=u.selector),r.guid||(r.guid=le.guid++),(a=v.events)||(a=v.events={}),(c=v.handle)||((c=v.handle=function(e){return void 0===le||e&&le.event.triggered===e.type?void 0:le.event.dispatch.apply(c.elem,arguments)}).elem=e),s=(t=(t||"").match(xe)||[""]).length;s--;)h=g=(o=ze.exec(t[s])||[])[1],p=(o[2]||"").split(".").sort(),h&&(l=le.event.special[h]||{},h=(i?l.delegateType:l.bindType)||h,l=le.event.special[h]||{},d=le.extend({type:h,origType:g,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&le.expr.match.needsContext.test(i),namespace:p.join(".")},u),(f=a[h])||((f=a[h]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,n,p,c)||(e.addEventListener?e.addEventListener(h,c,!1):e.attachEvent&&e.attachEvent("on"+h,c))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),le.event.global[h]=!0);e=null}},remove:function(e,t,r,n,i){var o,a,s,u,l,c,d,f,h,p,g,v=le.hasData(e)&&le._data(e);if(v&&(c=v.events)){for(l=(t=(t||"").match(xe)||[""]).length;l--;)if(h=g=(s=ze.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),h){for(d=le.event.special[h]||{},f=c[h=(n?d.delegateType:d.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;o--;)a=f[o],!i&&g!==a.origType||r&&r.guid!==a.guid||s&&!s.test(a.namespace)||n&&n!==a.selector&&("**"!==n||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,d.remove&&d.remove.call(e,a));u&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,p,v.handle)||le.removeEvent(e,h,v.handle),delete c[h])}else for(h in c)le.event.remove(e,h+t[l],r,n,!0);le.isEmptyObject(c)&&(delete v.handle,le._removeData(e,"events"))}},trigger:function(e,t,n,i){var o,a,s,u,l,c,d,f=[n||ee],h=se.call(e,"type")?e.type:e,p=se.call(e,"namespace")?e.namespace.split("."):[];if(s=c=n=n||ee,3!==n.nodeType&&8!==n.nodeType&&!Ve.test(h+le.event.triggered)&&(h.indexOf(".")>-1&&(h=(p=h.split(".")).shift(),p.sort()),a=h.indexOf(":")<0&&"on"+h,(e=e[le.expando]?e:new le.Event(h,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:le.makeArray(t,[e]),l=le.event.special[h]||{},i||!l.trigger||!1!==l.trigger.apply(n,t))){if(!i&&!l.noBubble&&!le.isWindow(n)){for(u=l.delegateType||h,Ve.test(u+h)||(s=s.parentNode);s;s=s.parentNode)f.push(s),c=s;c===(n.ownerDocument||ee)&&f.push(c.defaultView||c.parentWindow||r)}for(d=0;(s=f[d++])&&!e.isPropagationStopped();)e.type=d>1?u:l.bindType||h,(o=(le._data(s,"events")||{})[e.type]&&le._data(s,"handle"))&&o.apply(s,t),(o=a&&s[a])&&o.apply&&Le(s)&&(e.result=o.apply(s,t),!1===e.result&&e.preventDefault());if(e.type=h,!i&&!e.isDefaultPrevented()&&(!l._default||!1===l._default.apply(f.pop(),t))&&Le(n)&&a&&n[h]&&!le.isWindow(n)){(c=n[a])&&(n[a]=null),le.event.triggered=h;try{n[h]()}catch(e){}le.event.triggered=void 0,c&&(n[a]=c)}return e.result}},dispatch:function(e){e=le.event.fix(e);var t,r,n,i,o,a=[],s=te.call(arguments),u=(le._data(this,"events")||{})[e.type]||[],l=le.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(a=le.event.handlers.call(this,e,u),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,r=0;(o=i.handlers[r++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(n=((le.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,n,i,o,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(!0!==u.disabled||"click"!==e.type)){for(n=[],r=0;r<s;r++)void 0===n[i=(o=t[r]).selector+" "]&&(n[i]=o.needsContext?le(i,this).index(u)>-1:le.find(i,this,null,[u]).length),n[i]&&n.push(o);n.length&&a.push({elem:u,handlers:n})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[le.expando])return e;var t,r,n,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=We.test(i)?this.mouseHooks:Ke.test(i)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,e=new le.Event(o),t=n.length;t--;)e[r=n[t]]=o[r];return e.target||(e.target=o.srcElement||ee),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,n,i,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=(n=e.target.ownerDocument||ee).documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==T()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===T()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(le.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return le.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r){var n=le.extend(new le.Event,r,{type:e,isSimulated:!0});le.event.trigger(n,null,t),n.isDefaultPrevented()&&r.preventDefault()}},le.removeEvent=ee.removeEventListener?function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)}:function(e,t,r){var n="on"+t;e.detachEvent&&(void 0===e[n]&&(e[n]=null),e.detachEvent(n,r))},le.Event=function(e,t){return this instanceof le.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?_:E):this.type=e,t&&le.extend(this,t),this.timeStamp=e&&e.timeStamp||le.now(),void(this[le.expando]=!0)):new le.Event(e,t)},le.Event.prototype={constructor:le.Event,isDefaultPrevented:E,isPropagationStopped:E,isImmediatePropagationStopped:E,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=_,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=_,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=_,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},le.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){le.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||le.contains(this,n))||(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}}),ue.submit||(le.event.special.submit={setup:function(){return!le.nodeName(this,"form")&&void le.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,r=le.nodeName(t,"input")||le.nodeName(t,"button")?le.prop(t,"form"):void 0;r&&!le._data(r,"submit")&&(le.event.add(r,"submit._submit",function(e){e._submitBubble=!0}),le._data(r,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&le.event.simulate("submit",this.parentNode,e))},teardown:function(){return!le.nodeName(this,"form")&&void le.event.remove(this,"._submit")}}),ue.change||(le.event.special.change={setup:function(){return qe.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(le.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),le.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),le.event.simulate("change",this,e)})),!1):void le.event.add(this,"beforeactivate._change",function(e){var t=e.target;qe.test(t.nodeName)&&!le._data(t,"change")&&(le.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||le.event.simulate("change",this.parentNode,e)}),le._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return le.event.remove(this,"._change"),!qe.test(this.nodeName)}}),ue.focusin||le.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){le.event.simulate(t,e.target,le.event.fix(e))};le.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=le._data(n,t);i||n.addEventListener(e,r,!0),le._data(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=le._data(n,t)-1;i?le._data(n,t,i):(n.removeEventListener(e,r,!0),le._removeData(n,t))}}}),le.fn.extend({on:function(e,t,r,n){return S(this,e,t,r,n)},one:function(e,t,r,n){return S(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,le(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=E),this.each(function(){le.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){le.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return le.event.trigger(e,t,r,!0)}});var Ye=/ jQuery\d+="(?:null|\d+)"/g,Xe=new RegExp("<(?:"+Ue+")[\\s/>]","i"),$e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Je=/<script|<style|<link/i,Qe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ze=/^true\/(.*)/,et=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,tt=g(ee).appendChild(ee.createElement("div"));le.extend({htmlPrefilter:function(e){return e.replace($e,"<$1></$2>")},clone:function(e,t,r){var n,i,o,a,s,u=le.contains(e.ownerDocument,e);if(ue.html5Clone||le.isXMLDoc(e)||!Xe.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(tt.innerHTML=e.outerHTML,tt.removeChild(o=tt.firstChild)),!(ue.noCloneEvent&&ue.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||le.isXMLDoc(e)))for(n=v(o),s=v(e),a=0;null!=(i=s[a]);++a)n[a]&&k(i,n[a]);if(t)if(r)for(s=s||v(e),n=n||v(o),a=0;null!=(i=s[a]);a++)L(i,n[a]);else L(e,o);return(n=v(o,"script")).length>0&&m(n,!u&&v(e,"script")),n=s=i=null,o},cleanData:function(e,t){for(var r,n,i,o,a=0,s=le.expando,u=le.cache,l=ue.attributes,c=le.event.special;null!=(r=e[a]);a++)if((t||Le(r))&&(o=(i=r[s])&&u[i])){if(o.events)for(n in o.events)c[n]?le.event.remove(r,n):le.removeEvent(r,n,o.handle);u[i]&&(delete u[i],l||void 0===r.removeAttribute?r[s]=void 0:r.removeAttribute(s),Z.push(i))}}}),le.fn.extend({domManip:R,detach:function(e){return O(this,e,!0)},remove:function(e){return O(this,e)},text:function(e){return Ie(this,function(e){return void 0===e?le.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ee).createTextNode(e))},null,e,arguments.length)},append:function(){return R(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||w(this,e).appendChild(e)})},prepend:function(){return R(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=w(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return R(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&le.cleanData(v(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&le.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return le.clone(this,e,t)})},html:function(e){return Ie(this,function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Ye,""):void 0;if("string"==typeof e&&!Je.test(e)&&(ue.htmlSerialize||!Xe.test(e))&&(ue.leadingWhitespace||!Fe.test(e))&&!Be[(je.exec(e)||["",""])[1].toLowerCase()]){e=le.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(le.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return R(this,arguments,function(t){var r=this.parentNode;le.inArray(this,e)<0&&(le.cleanData(v(this)),r&&r.replaceChild(t,this))},e)}}),le.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){le.fn[e]=function(e){for(var r,n=0,i=[],o=le(e),a=o.length-1;n<=a;n++)r=n===a?this:this.clone(!0),le(o[n])[t](r),ne.apply(i,r.get());return this.pushStack(i)}});var rt,nt={HTML:"block",BODY:"block"},it=/^margin/,ot=new RegExp("^("+Oe+")(?!px)[a-z%]+$","i"),at=function(e,t,r,n){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=r.apply(e,n||[]),t)e.style[o]=a[o];return i},st=ee.documentElement;!function(){function e(){var e,c,d=ee.documentElement;d.appendChild(u),l.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",t=i=s=!1,n=a=!0,r.getComputedStyle&&(c=r.getComputedStyle(l),t="1%"!==(c||{}).top,s="2px"===(c||{}).marginLeft,i="4px"===(c||{width:"4px"}).width,l.style.marginRight="50%",n="4px"===(c||{marginRight:"4px"}).marginRight,(e=l.appendChild(ee.createElement("div"))).style.cssText=l.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",l.style.width="1px",a=!parseFloat((r.getComputedStyle(e)||{}).marginRight),l.removeChild(e)),l.style.display="none",(o=0===l.getClientRects().length)&&(l.style.display="",l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",l.childNodes[0].style.borderCollapse="separate",(e=l.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(o=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",o=0===e[0].offsetHeight)),d.removeChild(u)}var t,n,i,o,a,s,u=ee.createElement("div"),l=ee.createElement("div");l.style&&(l.style.cssText="float:left;opacity:.5",ue.opacity="0.5"===l.style.opacity,ue.cssFloat=!!l.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",ue.clearCloneStyle="content-box"===l.style.backgroundClip,(u=ee.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",l.innerHTML="",u.appendChild(l),ue.boxSizing=""===l.style.boxSizing||""===l.style.MozBoxSizing||""===l.style.WebkitBoxSizing,le.extend(ue,{reliableHiddenOffsets:function(){return null==t&&e(),o},boxSizingReliable:function(){return null==t&&e(),i},pixelMarginRight:function(){return null==t&&e(),n},pixelPosition:function(){return null==t&&e(),t},reliableMarginRight:function(){return null==t&&e(),a},reliableMarginLeft:function(){return null==t&&e(),s}}))}();var ut,lt,ct=/^(top|right|bottom|left)$/;r.getComputedStyle?(ut=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},lt=function(e,t,r){var n,i,o,a,s=e.style;return""!==(a=(r=r||ut(e))?r.getPropertyValue(t)||r[t]:void 0)&&void 0!==a||le.contains(e.ownerDocument,e)||(a=le.style(e,t)),r&&!ue.pixelMarginRight()&&ot.test(a)&&it.test(t)&&(n=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=r.width,s.width=n,s.minWidth=i,s.maxWidth=o),void 0===a?a:a+""}):st.currentStyle&&(ut=function(e){return e.currentStyle},lt=function(e,t,r){var n,i,o,a,s=e.style;return null==(a=(r=r||ut(e))?r[t]:void 0)&&s&&s[t]&&(a=s[t]),ot.test(a)&&!ct.test(t)&&(n=s.left,(o=(i=e.runtimeStyle)&&i.left)&&(i.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=n,o&&(i.left=o)),void 0===a?a:a+""||"auto"});var dt=/alpha\([^)]*\)/i,ft=/opacity\s*=\s*([^)]*)/i,ht=/^(none|table(?!-c[ea]).+)/,pt=new RegExp("^("+Oe+")(.*)$","i"),gt={position:"absolute",visibility:"hidden",display:"block"},vt={letterSpacing:"0",fontWeight:"400"},mt=["Webkit","O","Moz","ms"],yt=ee.createElement("div").style;le.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=lt(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ue.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=le.camelCase(t),u=e.style;if(t=le.cssProps[s]||(le.cssProps[s]=I(s)||s),a=le.cssHooks[t]||le.cssHooks[s],void 0===r)return a&&"get"in a&&void 0!==(i=a.get(e,!1,n))?i:u[t];if("string"===(o=typeof r)&&(i=De.exec(r))&&i[1]&&(r=p(e,t,i),o="number"),null!=r&&r==r&&("number"===o&&(r+=i&&i[3]||(le.cssNumber[s]?"":"px")),ue.clearCloneStyle||""!==r||0!==t.indexOf("background")||(u[t]="inherit"),!(a&&"set"in a&&void 0===(r=a.set(e,r,n)))))try{u[t]=r}catch(e){}}},css:function(e,t,r,n){var i,o,a,s=le.camelCase(t);return t=le.cssProps[s]||(le.cssProps[s]=I(s)||s),(a=le.cssHooks[t]||le.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,r)),void 0===o&&(o=lt(e,t,n)),"normal"===o&&t in vt&&(o=vt[t]),""===r||r?(i=parseFloat(o),!0===r||isFinite(i)?i||0:o):o}}),le.each(["height","width"],function(e,t){le.cssHooks[t]={get:function(e,r,n){if(r)return ht.test(le.css(e,"display"))&&0===e.offsetWidth?at(e,gt,function(){return F(e,t,n)}):F(e,t,n)},set:function(e,r,n){var i=n&&ut(e);return j(0,r,n?N(e,t,n,ue.boxSizing&&"border-box"===le.css(e,"boxSizing",!1,i),i):0)}}}),ue.opacity||(le.cssHooks.opacity={get:function(e,t){return ft.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var r=e.style,n=e.currentStyle,i=le.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=n&&n.filter||r.filter||"";r.zoom=1,(t>=1||""===t)&&""===le.trim(o.replace(dt,""))&&r.removeAttribute&&(r.removeAttribute("filter"),""===t||n&&!n.filter)||(r.filter=dt.test(o)?o.replace(dt,i):o+" "+i)}}),le.cssHooks.marginRight=C(ue.reliableMarginRight,function(e,t){if(t)return at(e,{display:"inline-block"},lt,[e,"marginRight"])}),le.cssHooks.marginLeft=C(ue.reliableMarginLeft,function(e,t){if(t)return(parseFloat(lt(e,"marginLeft"))||(le.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-at(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),le.each({margin:"",padding:"",border:"Width"},function(e,t){le.cssHooks[e+t]={expand:function(r){for(var n=0,i={},o="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+Pe[n]+t]=o[n]||o[n-2]||o[0];return i}},it.test(e)||(le.cssHooks[e+t].set=j)}),le.fn.extend({css:function(e,t){return Ie(this,function(e,t,r){var n,i,o={},a=0;if(le.isArray(t)){for(n=ut(e),i=t.length;a<i;a++)o[t[a]]=le.css(e,t[a],!1,n);return o}return void 0!==r?le.style(e,t,r):le.css(e,t)},e,t,arguments.length>1)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ce(this)?le(this).show():le(this).hide()})}}),le.Tween=U,U.prototype={constructor:U,init:function(e,t,r,n,i,o){this.elem=e,this.prop=r,this.easing=i||le.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(le.cssNumber[r]?"":"px")},cur:function(){var e=U.propHooks[this.prop];return e&&e.get?e.get(this):U.propHooks._default.get(this)},run:function(e){var t,r=U.propHooks[this.prop];return this.options.duration?this.pos=t=le.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=le.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){le.fx.step[e.prop]?le.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[le.cssProps[e.prop]]&&!le.cssHooks[e.prop]?e.elem[e.prop]=e.now:le.style(e.elem,e.prop,e.now+e.unit)}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},le.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},le.fx=U.prototype.init,le.fx.step={};var bt,_t,Et=/^(?:toggle|show|hide)$/,Tt=/queueHooks$/;le.Animation=le.extend(q,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return p(r.elem,e,De.exec(t),r),r}]},tweener:function(e,t){le.isFunction(e)?(t=e,e=["*"]):e=e.match(xe);for(var r,n=0,i=e.length;n<i;n++)r=e[n],q.tweeners[r]=q.tweeners[r]||[],q.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,i,o,a,s,u,l,c=this,d={},f=e.style,h=e.nodeType&&Ce(e),p=le._data(e,"fxshow");for(n in r.queue||(null==(s=le._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,le.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===("none"===(l=le.css(e,"display"))?le._data(e,"olddisplay")||P(e.nodeName):l)&&"none"===le.css(e,"float")&&(ue.inlineBlockNeedsLayout&&"inline"!==P(e.nodeName)?f.zoom=1:f.display="inline-block")),r.overflow&&(f.overflow="hidden",ue.shrinkWrapBlocks()||c.always(function(){f.overflow=r.overflow[0],f.overflowX=r.overflow[1],f.overflowY=r.overflow[2]})),t)if(i=t[n],Et.exec(i)){if(delete t[n],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!p||void 0===p[n])continue;h=!0}d[n]=p&&p[n]||le.style(e,n)}else l=void 0;if(le.isEmptyObject(d))"inline"===("none"===l?P(e.nodeName):l)&&(f.display=l);else for(n in p?"hidden"in p&&(h=p.hidden):p=le._data(e,"fxshow",{}),o&&(p.hidden=!h),h?le(e).show():c.done(function(){le(e).hide()}),c.done(function(){var t;for(t in le._removeData(e,"fxshow"),d)le.style(e,t,d[t])}),d)a=H(h?p[n]:0,n,c),n in p||(p[n]=a.start,h&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}],prefilter:function(e,t){t?q.prefilters.unshift(e):q.prefilters.push(e)}}),le.speed=function(e,t,r){var n=e&&"object"==typeof e?le.extend({},e):{complete:r||!r&&t||le.isFunction(e)&&e,duration:e,easing:r&&t||t&&!le.isFunction(t)&&t};return n.duration=le.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in le.fx.speeds?le.fx.speeds[n.duration]:le.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){le.isFunction(n.old)&&n.old.call(this),n.queue&&le.dequeue(this,n.queue)},n},le.fn.extend({fadeTo:function(e,t,r,n){return this.filter(Ce).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var i=le.isEmptyObject(e),o=le.speed(t,r,n),a=function(){var t=q(this,le.extend({},e),o);(i||le._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=le.timers,a=le._data(this);if(i)a[i]&&a[i].stop&&n(a[i]);else for(i in a)a[i]&&a[i].stop&&Tt.test(i)&&n(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(r),t=!1,o.splice(i,1));!t&&r||le.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,r=le._data(this),n=r[e+"queue"],i=r[e+"queueHooks"],o=le.timers,a=n?n.length:0;for(r.finish=!0,le.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish})}}),le.each(["toggle","show","hide"],function(e,t){var r=le.fn[t];le.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(G(t,!0),e,n,i)}}),le.each({slideDown:G("show"),slideUp:G("hide"),slideToggle:G("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){le.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}}),le.timers=[],le.fx.tick=function(){var e,t=le.timers,r=0;for(bt=le.now();r<t.length;r++)(e=t[r])()||t[r]!==e||t.splice(r--,1);t.length||le.fx.stop(),bt=void 0},le.fx.timer=function(e){le.timers.push(e),e()?le.fx.start():le.timers.pop()},le.fx.interval=13,le.fx.start=function(){_t||(_t=r.setInterval(le.fx.tick,le.fx.interval))},le.fx.stop=function(){r.clearInterval(_t),_t=null},le.fx.speeds={slow:600,fast:200,_default:400},le.fn.delay=function(e,t){return e=le.fx&&le.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}})},function(){var e,t=ee.createElement("input"),r=ee.createElement("div"),n=ee.createElement("select"),i=n.appendChild(ee.createElement("option"));(r=ee.createElement("div")).setAttribute("className","t"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=r.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),r.appendChild(t),(e=r.getElementsByTagName("a")[0]).style.cssText="top:1px",ue.getSetAttribute="t"!==r.className,ue.style=/top/.test(e.getAttribute("style")),ue.hrefNormalized="/a"===e.getAttribute("href"),ue.checkOn=!!t.value,ue.optSelected=i.selected,ue.enctype=!!ee.createElement("form").enctype,n.disabled=!0,ue.optDisabled=!i.disabled,(t=ee.createElement("input")).setAttribute("value",""),ue.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ue.radioValue="t"===t.value}();var St=/\r/g,wt=/[\x20\t\r\n\f]+/g;le.fn.extend({val:function(e){var t,r,n,i=this[0];return arguments.length?(n=le.isFunction(e),this.each(function(r){var i;1===this.nodeType&&(null==(i=n?e.call(this,r,le(this).val()):e)?i="":"number"==typeof i?i+="":le.isArray(i)&&(i=le.map(i,function(e){return null==e?"":e+""})),(t=le.valHooks[this.type]||le.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=le.valHooks[i.type]||le.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(St,""):null==r?"":r:void 0}}),le.extend({valHooks:{option:{get:function(e){var t=le.find.attr(e,"value");return null!=t?t:le.trim(le.text(e)).replace(wt," ")}},select:{get:function(e){for(var t,r,n=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:n.length,u=i<0?s:o?i:0;u<s;u++)if(((r=n[u]).selected||u===i)&&(ue.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!le.nodeName(r.parentNode,"optgroup"))){if(t=le(r).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var r,n,i=e.options,o=le.makeArray(t),a=i.length;a--;)if(n=i[a],le.inArray(le.valHooks.option.get(n),o)>-1)try{n.selected=r=!0}catch(e){n.scrollHeight}else n.selected=!1;return r||(e.selectedIndex=-1),i}}}}),le.each(["radio","checkbox"],function(){le.valHooks[this]={set:function(e,t){if(le.isArray(t))return e.checked=le.inArray(le(e).val(),t)>-1}},ue.checkOn||(le.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var At,xt,Lt=le.expr.attrHandle,kt=/^(?:checked|selected)$/i,Rt=ue.getSetAttribute,Ot=ue.input;le.fn.extend({attr:function(e,t){return Ie(this,le.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){le.removeAttr(this,e)})}}),le.extend({attr:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?le.prop(e,t,r):(1===o&&le.isXMLDoc(e)||(t=t.toLowerCase(),i=le.attrHooks[t]||(le.expr.match.bool.test(t)?xt:At)),void 0!==r?null===r?void le.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=le.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!ue.radioValue&&"radio"===t&&le.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n,i=0,o=t&&t.match(xe);if(o&&1===e.nodeType)for(;r=o[i++];)n=le.propFix[r]||r,le.expr.match.bool.test(r)?Ot&&Rt||!kt.test(r)?e[n]=!1:e[le.camelCase("default-"+r)]=e[n]=!1:le.attr(e,r,""),e.removeAttribute(Rt?r:n)}}),xt={set:function(e,t,r){return!1===t?le.removeAttr(e,r):Ot&&Rt||!kt.test(r)?e.setAttribute(!Rt&&le.propFix[r]||r,r):e[le.camelCase("default-"+r)]=e[r]=!0,r}},le.each(le.expr.match.bool.source.match(/\w+/g),function(e,t){var r=Lt[t]||le.find.attr;Ot&&Rt||!kt.test(t)?Lt[t]=function(e,t,n){var i,o;return n||(o=Lt[t],Lt[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,Lt[t]=o),i}:Lt[t]=function(e,t,r){if(!r)return e[le.camelCase("default-"+t)]?t.toLowerCase():null}}),Ot&&Rt||(le.attrHooks.value={set:function(e,t,r){return le.nodeName(e,"input")?void(e.defaultValue=t):At&&At.set(e,t,r)}}),Rt||(At={set:function(e,t,r){var n=e.getAttributeNode(r);if(n||e.setAttributeNode(n=e.ownerDocument.createAttribute(r)),n.value=t+="","value"===r||t===e.getAttribute(r))return t}},Lt.id=Lt.name=Lt.coords=function(e,t,r){var n;if(!r)return(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},le.valHooks.button={get:function(e,t){var r=e.getAttributeNode(t);if(r&&r.specified)return r.value},set:At.set},le.attrHooks.contenteditable={set:function(e,t,r){At.set(e,""!==t&&t,r)}},le.each(["width","height"],function(e,t){le.attrHooks[t]={set:function(e,r){if(""===r)return e.setAttribute(t,"auto"),r}}})),ue.style||(le.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Dt=/^(?:input|select|textarea|button|object)$/i,Pt=/^(?:a|area)$/i;le.fn.extend({prop:function(e,t){return Ie(this,le.prop,e,t,arguments.length>1)},removeProp:function(e){return e=le.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),le.extend({prop:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&le.isXMLDoc(e)||(t=le.propFix[t]||t,i=le.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=le.find.attr(e,"tabindex");return t?parseInt(t,10):Dt.test(e.nodeName)||Pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ue.hrefNormalized||le.each(["href","src"],function(e,t){le.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ue.optSelected||(le.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),le.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){le.propFix[this.toLowerCase()]=this}),ue.enctype||(le.propFix.enctype="encoding");var Ct=/[\t\r\n\f]/g;le.fn.extend({addClass:function(e){var t,r,n,i,o,a,s,u=0;if(le.isFunction(e))return this.each(function(t){le(this).addClass(e.call(this,t,K(this)))});if("string"==typeof e&&e)for(t=e.match(xe)||[];r=this[u++];)if(i=K(r),n=1===r.nodeType&&(" "+i+" ").replace(Ct," ")){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");i!==(s=le.trim(n))&&le.attr(r,"class",s)}return this},removeClass:function(e){var t,r,n,i,o,a,s,u=0;if(le.isFunction(e))return this.each(function(t){le(this).removeClass(e.call(this,t,K(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(xe)||[];r=this[u++];)if(i=K(r),n=1===r.nodeType&&(" "+i+" ").replace(Ct," ")){for(a=0;o=t[a++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");i!==(s=le.trim(n))&&le.attr(r,"class",s)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):le.isFunction(e)?this.each(function(r){le(this).toggleClass(e.call(this,r,K(this),t),t)}):this.each(function(){var t,n,i,o;if("string"===r)for(n=0,i=le(this),o=e.match(xe)||[];t=o[n++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==r||((t=K(this))&&le._data(this,"__className__",t),le.attr(this,"class",t||!1===e?"":le._data(this,"__className__")||""))})},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+K(r)+" ").replace(Ct," ").indexOf(t)>-1)return!0;return!1}}),le.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){le.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),le.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var It=r.location,Mt=le.now(),jt=/\?/,Nt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;le.parseJSON=function(e){if(r.JSON&&r.JSON.parse)return r.JSON.parse(e+"");var t,n=null,i=le.trim(e+"");return i&&!le.trim(i.replace(Nt,function(e,r,i,o){return t&&r&&(n=0),0===n?e:(t=i||r,n+=!o-!i,"")}))?Function("return "+i)():le.error("Invalid JSON: "+e)},le.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{r.DOMParser?t=(new r.DOMParser).parseFromString(e,"text/xml"):((t=new r.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||le.error("Invalid XML: "+e),t};var Ft=/#.*$/,Ut=/([?&])_=[^&]*/,Bt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Gt=/^(?:GET|HEAD)$/,Ht=/^\/\//,qt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Kt={},Wt={},Vt="*/".concat("*"),zt=It.href,Yt=qt.exec(zt.toLowerCase())||[];le.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Yt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":le.parseJSON,"text xml":le.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,le.ajaxSettings),t):z(le.ajaxSettings,e)},ajaxPrefilter:W(Kt),ajaxTransport:W(Wt),ajax:function(e,t){function n(e,t,n,i){var o,d,y,b,E,S=t;2!==_&&(_=2,u&&r.clearTimeout(u),c=void 0,s=i||"",T.readyState=e>0?4:0,o=e>=200&&e<300||304===e,n&&(b=function(e,t,r){for(var n,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){u.unshift(a);break}if(u[0]in r)o=u[0];else{for(a in r){if(!u[0]||e.converters[a+" "+u[0]]){o=a;break}n||(n=a)}o=o||n}if(o)return o!==u[0]&&u.unshift(o),r[o]}(f,T,n)),b=function(e,t,r,n){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!u&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(f,b,T,o),o?(f.ifModified&&((E=T.getResponseHeader("Last-Modified"))&&(le.lastModified[a]=E),(E=T.getResponseHeader("etag"))&&(le.etag[a]=E)),204===e||"HEAD"===f.type?S="nocontent":304===e?S="notmodified":(S=b.state,d=b.data,o=!(y=b.error))):(y=S,!e&&S||(S="error",e<0&&(e=0))),T.status=e,T.statusText=(t||S)+"",o?g.resolveWith(h,[d,S,T]):g.rejectWith(h,[T,S,y]),T.statusCode(m),m=void 0,l&&p.trigger(o?"ajaxSuccess":"ajaxError",[T,f,o?d:y]),v.fireWith(h,[T,S]),l&&(p.trigger("ajaxComplete",[T,f]),--le.active||le.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o,a,s,u,l,c,d,f=le.ajaxSetup({},t),h=f.context||f,p=f.context&&(h.nodeType||h.jquery)?le(h):le.event,g=le.Deferred(),v=le.Callbacks("once memory"),m=f.statusCode||{},y={},b={},_=0,E="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!d)for(d={};t=Bt.exec(s);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return _||(e=b[r]=b[r]||e,y[e]=t),this},overrideMimeType:function(e){return _||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)m[t]=[m[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||E;return c&&c.abort(t),n(0,t),this}};if(g.promise(T).complete=v.add,T.success=T.done,T.error=T.fail,f.url=((e||f.url||zt)+"").replace(Ft,"").replace(Ht,Yt[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=le.trim(f.dataType||"*").toLowerCase().match(xe)||[""],null==f.crossDomain&&(i=qt.exec(f.url.toLowerCase()),f.crossDomain=!(!i||i[1]===Yt[1]&&i[2]===Yt[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Yt[3]||("http:"===Yt[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=le.param(f.data,f.traditional)),V(Kt,f,t,T),2===_)return T;for(o in(l=le.event&&f.global)&&0==le.active++&&le.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Gt.test(f.type),a=f.url,f.hasContent||(f.data&&(a=f.url+=(jt.test(a)?"&":"?")+f.data,delete f.data),!1===f.cache&&(f.url=Ut.test(a)?a.replace(Ut,"$1_="+Mt++):a+(jt.test(a)?"&":"?")+"_="+Mt++)),f.ifModified&&(le.lastModified[a]&&T.setRequestHeader("If-Modified-Since",le.lastModified[a]),le.etag[a]&&T.setRequestHeader("If-None-Match",le.etag[a])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Vt+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(o,f.headers[o]);if(f.beforeSend&&(!1===f.beforeSend.call(h,T,f)||2===_))return T.abort();for(o in E="abort",{success:1,error:1,complete:1})T[o](f[o]);if(c=V(Wt,f,t,T)){if(T.readyState=1,l&&p.trigger("ajaxSend",[T,f]),2===_)return T;f.async&&f.timeout>0&&(u=r.setTimeout(function(){T.abort("timeout")},f.timeout));try{_=1,c.send(y,n)}catch(e){if(!(_<2))throw e;n(-1,e)}}else n(-1,"No Transport");return T},getJSON:function(e,t,r){return le.get(e,t,r,"json")},getScript:function(e,t){return le.get(e,void 0,t,"script")}}),le.each(["get","post"],function(e,t){le[t]=function(e,r,n,i){return le.isFunction(r)&&(i=i||n,n=r,r=void 0),le.ajax(le.extend({url:e,type:t,dataType:i,data:r,success:n},le.isPlainObject(e)&&e))}}),le._evalUrl=function(e){return le.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},le.fn.extend({wrapAll:function(e){if(le.isFunction(e))return this.each(function(t){le(this).wrapAll(e.call(this,t))});if(this[0]){var t=le(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return le.isFunction(e)?this.each(function(t){le(this).wrapInner(e.call(this,t))}):this.each(function(){var t=le(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=le.isFunction(e);return this.each(function(r){le(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){le.nodeName(this,"body")||le(this).replaceWith(this.childNodes)}).end()}}),le.expr.filters.hidden=function(e){return ue.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:function(e){if(!le.contains(e.ownerDocument||ee,e))return!0;for(;e&&1===e.nodeType;){if("none"===Y(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}(e)},le.expr.filters.visible=function(e){return!le.expr.filters.hidden(e)};var Xt=/%20/g,$t=/\[\]$/,Jt=/\r?\n/g,Qt=/^(?:submit|button|image|reset|file)$/i,Zt=/^(?:input|select|textarea|keygen)/i;le.param=function(e,t){var r,n=[],i=function(e,t){t=le.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=le.ajaxSettings&&le.ajaxSettings.traditional),le.isArray(e)||e.jquery&&!le.isPlainObject(e))le.each(e,function(){i(this.name,this.value)});else for(r in e)X(r,e[r],t,i);return n.join("&").replace(Xt,"+")},le.fn.extend({serialize:function(){return le.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=le.prop(this,"elements");return e?le.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!le(this).is(":disabled")&&Zt.test(this.nodeName)&&!Qt.test(e)&&(this.checked||!Me.test(e))}).map(function(e,t){var r=le(this).val();return null==r?null:le.isArray(r)?le.map(r,function(e){return{name:t.name,value:e.replace(Jt,"\r\n")}}):{name:t.name,value:r.replace(Jt,"\r\n")}}).get()}}),le.ajaxSettings.xhr=void 0!==r.ActiveXObject?function(){return this.isLocal?J():ee.documentMode>8?$():/^(get|post|head|put|delete|options)$/i.test(this.type)&&$()||J()}:$;var er=0,tr={},rr=le.ajaxSettings.xhr();r.attachEvent&&r.attachEvent("onunload",function(){for(var e in tr)tr[e](void 0,!0)}),ue.cors=!!rr&&"withCredentials"in rr,(rr=ue.ajax=!!rr)&&le.ajaxTransport(function(e){var t;if(!e.crossDomain||ue.cors)return{send:function(n,i){var o,a=e.xhr(),s=++er;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)void 0!==n[o]&&a.setRequestHeader(o,n[o]+"");a.send(e.hasContent&&e.data||null),t=function(r,n){var o,u,l;if(t&&(n||4===a.readyState))if(delete tr[s],t=void 0,a.onreadystatechange=le.noop,n)4!==a.readyState&&a.abort();else{l={},o=a.status,"string"==typeof a.responseText&&(l.text=a.responseText);try{u=a.statusText}catch(e){u=""}o||!e.isLocal||e.crossDomain?1223===o&&(o=204):o=l.text?200:404}l&&i(o,u,l,a.getAllResponseHeaders())},e.async?4===a.readyState?r.setTimeout(t):a.onreadystatechange=tr[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}),le.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return le.globalEval(e),e}}}),le.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),le.ajaxTransport("script",function(e){if(e.crossDomain){var t,r=ee.head||le("head")[0]||ee.documentElement;return{send:function(n,i){(t=ee.createElement("script")).async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,r){(r||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,r||i(200,"success"))},r.insertBefore(t,r.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var nr=[],ir=/(=)\?(?=&|$)|\?\?/;le.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=nr.pop()||le.expando+"_"+Mt++;return this[e]=!0,e}}),le.ajaxPrefilter("json jsonp",function(e,t,n){var i,o,a,s=!1!==e.jsonp&&(ir.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ir.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=le.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ir,"$1"+i):!1!==e.jsonp&&(e.url+=(jt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||le.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always(function(){void 0===o?le(r).removeProp(i):r[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,nr.push(i)),a&&le.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),le.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||ee;var n=ye.exec(e),i=!r&&[];return n?[t.createElement(n[1])]:(n=b([e],t,i),i&&i.length&&le(i).remove(),le.merge([],n.childNodes))};var or=le.fn.load;le.fn.load=function(e,t,r){if("string"!=typeof e&&or)return or.apply(this,arguments);var n,i,o,a=this,s=e.indexOf(" ");return s>-1&&(n=le.trim(e.slice(s,e.length)),e=e.slice(0,s)),le.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&le.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?le("<div>").append(le.parseHTML(e)).find(n):e)}).always(r&&function(e,t){a.each(function(){r.apply(this,o||[e.responseText,t,e])})}),this},le.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){le.fn[t]=function(e){return this.on(t,e)}}),le.expr.filters.animated=function(e){return le.grep(le.timers,function(t){return e===t.elem}).length},le.offset={setOffset:function(e,t,r){var n,i,o,a,s,u,l=le.css(e,"position"),c=le(e),d={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=le.css(e,"top"),u=le.css(e,"left"),("absolute"===l||"fixed"===l)&&le.inArray("auto",[o,u])>-1?(a=(n=c.position()).top,i=n.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),le.isFunction(t)&&(t=t.call(e,r,le.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):c.css(d)}},le.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){le.offset.setOffset(this,e,t)});var t,r,n={top:0,left:0},i=this[0],o=i&&i.ownerDocument;return o?(t=o.documentElement,le.contains(t,i)?(void 0!==i.getBoundingClientRect&&(n=i.getBoundingClientRect()),r=Q(o),{top:n.top+(r.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(r.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var e,t,r={top:0,left:0},n=this[0];return"fixed"===le.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),le.nodeName(e[0],"html")||(r=e.offset()),r.top+=le.css(e[0],"borderTopWidth",!0),r.left+=le.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-le.css(n,"marginTop",!0),left:t.left-r.left-le.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&!le.nodeName(e,"html")&&"static"===le.css(e,"position");)e=e.offsetParent;return e||st})}}),le.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r=/Y/.test(t);le.fn[e]=function(n){return Ie(this,function(e,n,i){var o=Q(e);return void 0===i?o?t in o?o[t]:o.document.documentElement[n]:e[n]:void(o?o.scrollTo(r?le(o).scrollLeft():i,r?i:le(o).scrollTop()):e[n]=i)},e,n,arguments.length,null)}}),le.each(["top","left"],function(e,t){le.cssHooks[t]=C(ue.pixelPosition,function(e,r){if(r)return r=lt(e,t),ot.test(r)?le(e).position()[t]+"px":r})}),le.each({Height:"height",Width:"width"},function(e,t){le.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,n){le.fn[n]=function(n,i){var o=arguments.length&&(r||"boolean"!=typeof n),a=r||(!0===n||!0===i?"margin":"border");return Ie(this,function(t,r,n){var i;return le.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===n?le.css(t,r,a):le.style(t,r,n,a)},t,o?n:void 0,o,null)}})}),le.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}}),le.fn.size=function(){return this.length},le.fn.andSelf=le.fn.addBack,void 0===(n=function(){return le}.apply(t,[]))||(e.exports=n);var ar=r.jQuery,sr=r.$;return le.noConflict=function(e){return r.$===le&&(r.$=sr),e&&r.jQuery===le&&(r.jQuery=ar),le},i||(r.jQuery=r.$=le),le})},function(e,t){"use strict";t.__esModule=!0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.pcType=function(){var e=navigator.userAgent;return-1!=e.indexOf("iPhone")||-1!=e.indexOf("iPad")||-1!=e.indexOf("iPod")||-1!=e.indexOf("Android")?"html5_mo":"html5_pc"},e}();t.default=r},function(e,t,r){"use strict";t.__esModule=!0;var n=function(e){function t(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r));return n.pcType="flash",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addEvent=function(){var e=this;window.__logging_hls_flash_eventListener__=function(t,r){window.__nts_ria_audio__[r].eventHandler(t),"ipc_success"!=t.type&&"ipc_fail"!=t.type&&"pt_success"!=t.type&&"pt_fail"!=t.type||(window.__nts_ria_audio__[r].logStatus(t),"ipc_fail"==t.type&&"securityError"==t.data.type?e.throwError("ipc"):"pt_fail"==t.type&&"securityError"==t.data.type&&e.throwError("pt"))}},t.prototype.removeEvent=function(){window.__logging_hls_flash_eventListener__=function(e,t){}},t.prototype.setAudio=function(e){this.reset(),this.audio=e,null==window.__nts_ria_audio__&&(window.__nts_ria_audio__={}),window.__nts_ria_audio__[e.name||e.id]=this,this.addEvent()},t.prototype.throwError=function(e){setTimeout(function(){throw new Error("flash crossdomain security error - "+e)},1)},t.prototype.onError=function(e){this.ptLogInfo.ec=e.code},t.prototype.logStatus=function(e){this.dispatchEvent(e)},t.prototype.sendLog=function(e,t,r,n,i){this.audio.__send_log(e,t,r,i)},t}(function(e){return e&&e.__esModule?e:{default:e}}(r(2)).default);t.default=n}])})},function(e,t,r){var n;!function(i){"use strict";function o(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function a(e,t,r,n,i,a){return o(function(e,t){return e<<t|e>>>32-t}(o(o(t,e),o(n,a)),i),r)}function s(e,t,r,n,i,o,s){return a(t&r|~t&n,e,t,i,o,s)}function u(e,t,r,n,i,o,s){return a(t&n|r&~n,e,t,i,o,s)}function l(e,t,r,n,i,o,s){return a(t^r^n,e,t,i,o,s)}function c(e,t,r,n,i,o,s){return a(r^(t|~n),e,t,i,o,s)}function d(e,t){var r,n,i,a,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var f=1732584193,h=-271733879,p=-1732584194,g=271733878;for(r=0;r<e.length;r+=16)n=f,i=h,a=p,d=g,h=c(h=c(h=c(h=c(h=l(h=l(h=l(h=l(h=u(h=u(h=u(h=u(h=s(h=s(h=s(h=s(h,p=s(p,g=s(g,f=s(f,h,p,g,e[r],7,-680876936),h,p,e[r+1],12,-389564586),f,h,e[r+2],17,606105819),g,f,e[r+3],22,-1044525330),p=s(p,g=s(g,f=s(f,h,p,g,e[r+4],7,-176418897),h,p,e[r+5],12,1200080426),f,h,e[r+6],17,-1473231341),g,f,e[r+7],22,-45705983),p=s(p,g=s(g,f=s(f,h,p,g,e[r+8],7,1770035416),h,p,e[r+9],12,-1958414417),f,h,e[r+10],17,-42063),g,f,e[r+11],22,-1990404162),p=s(p,g=s(g,f=s(f,h,p,g,e[r+12],7,1804603682),h,p,e[r+13],12,-40341101),f,h,e[r+14],17,-1502002290),g,f,e[r+15],22,1236535329),p=u(p,g=u(g,f=u(f,h,p,g,e[r+1],5,-165796510),h,p,e[r+6],9,-1069501632),f,h,e[r+11],14,643717713),g,f,e[r],20,-373897302),p=u(p,g=u(g,f=u(f,h,p,g,e[r+5],5,-701558691),h,p,e[r+10],9,38016083),f,h,e[r+15],14,-660478335),g,f,e[r+4],20,-405537848),p=u(p,g=u(g,f=u(f,h,p,g,e[r+9],5,568446438),h,p,e[r+14],9,-1019803690),f,h,e[r+3],14,-187363961),g,f,e[r+8],20,1163531501),p=u(p,g=u(g,f=u(f,h,p,g,e[r+13],5,-1444681467),h,p,e[r+2],9,-51403784),f,h,e[r+7],14,1735328473),g,f,e[r+12],20,-1926607734),p=l(p,g=l(g,f=l(f,h,p,g,e[r+5],4,-378558),h,p,e[r+8],11,-2022574463),f,h,e[r+11],16,1839030562),g,f,e[r+14],23,-35309556),p=l(p,g=l(g,f=l(f,h,p,g,e[r+1],4,-1530992060),h,p,e[r+4],11,1272893353),f,h,e[r+7],16,-155497632),g,f,e[r+10],23,-1094730640),p=l(p,g=l(g,f=l(f,h,p,g,e[r+13],4,681279174),h,p,e[r],11,-358537222),f,h,e[r+3],16,-722521979),g,f,e[r+6],23,76029189),p=l(p,g=l(g,f=l(f,h,p,g,e[r+9],4,-640364487),h,p,e[r+12],11,-421815835),f,h,e[r+15],16,530742520),g,f,e[r+2],23,-995338651),p=c(p,g=c(g,f=c(f,h,p,g,e[r],6,-198630844),h,p,e[r+7],10,1126891415),f,h,e[r+14],15,-1416354905),g,f,e[r+5],21,-57434055),p=c(p,g=c(g,f=c(f,h,p,g,e[r+12],6,1700485571),h,p,e[r+3],10,-1894986606),f,h,e[r+10],15,-1051523),g,f,e[r+1],21,-2054922799),p=c(p,g=c(g,f=c(f,h,p,g,e[r+8],6,1873313359),h,p,e[r+15],10,-30611744),f,h,e[r+6],15,-1560198380),g,f,e[r+13],21,1309151649),p=c(p,g=c(g,f=c(f,h,p,g,e[r+4],6,-145523070),h,p,e[r+11],10,-1120210379),f,h,e[r+2],15,718787259),g,f,e[r+9],21,-343485551),f=o(f,n),h=o(h,i),p=o(p,a),g=o(g,d);return[f,h,p,g]}function f(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function h(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function p(e){var t,r,n="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return n}function g(e){return unescape(encodeURIComponent(e))}function v(e){return function(e){return f(d(h(e),8*e.length))}(g(e))}function m(e,t){return function(e,t){var r,n,i=h(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=d(i,8*e.length)),r=0;r<16;r+=1)o[r]=909522486^i[r],a[r]=1549556828^i[r];return n=d(o.concat(h(t)),512+8*t.length),f(d(a.concat(n),640))}(g(e),g(t))}function y(e,t,r){return t?r?m(t,e):function(e,t){return p(m(e,t))}(t,e):r?v(e):function(e){return p(v(e))}(e)}void 0===(n=function(){return y}.call(t,r,t,e))||(e.exports=n)}()},function(e,t,r){e.exports=r(305)},function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(global,factory){module.exports=function(global){"use strict";var _Base64=(global=global||{}).Base64,version="2.5.2",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e.charAt(r)]=r;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),n=[b64chars.charAt(r>>>18),b64chars.charAt(r>>>12&63),t>=2?"=":b64chars.charAt(r>>>6&63),t>=1?"=":b64chars.charAt(63&r)];return n.join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=function(e){var t="[object Uint8Array]"===Object.prototype.toString.call(e);return t?e.toString("base64"):btoa(utob(String(e)))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(e)},encodeURI=function(e){return encode(e,!0)},re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return fromCharCode(55296+(r>>>10))+fromCharCode(56320+(1023&r));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,r=t%4,n=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),i=[fromCharCode(n>>>16),fromCharCode(n>>>8&255),fromCharCode(255&n)];return i.length-=[0,0,2,1][r],i.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}global.Meteor&&(Base64=global.Base64);module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));return{Base64:global.Base64}}(global)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this)}).call(this,__webpack_require__(100))},function(e,t,r){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){var n=r(7),i=r(8);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}},function(e,t,r){var n=r(9);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,r,n){var i,o,a,s;if(l(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):g(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var l=u.length,c=g(u,l);for(r=0;r<l;++r)o(c[r],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,f(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,o,a;if(l(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){"use strict";r.r(t);var n=r(1),i=r.n(n),o=r(2),a=r.n(o),s=r(3),u=r.n(s),l=r(0),c=r.n(l),d=r(4),f=r.n(d),h=r(5),p=function(e){f()(n,e);var t,r=(t=n,function(){var e,r=c()(t);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var n=c()(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return u()(this,e)});function n(){var e;return i()(this,n),(e=r.call(this)).on("error",function(){}),e}return a()(n,[{key:"loadToken",value:function(e,t,r){r("UNIMPLEMENTED")}},{key:"getDeviceId",value:function(){return null}}]),n}(r.n(h).a);t.default=p},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r}])},function(e,t,r){e.exports=r(315)},function(e,t,r){var n=r(156);e.exports=n},function(e,t,r){r(157);var n=r(11);e.exports=n.Array.isArray},function(e,t,r){r(4)({target:"Array",stat:!0},{isArray:r(53)})},function(e,t,r){var n=r(0),i=r(20),o=r(13),a=r(76),s=r(78),u=r(159),l=r(6),c=n.TypeError,d=l("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var r,n=s(e,d);if(n){if(void 0===t&&(t="default"),r=i(n,e,t),!o(r)||a(r))return r;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},function(e,t,r){var n=r(0),i=r(20),o=r(9),a=r(13),s=n.TypeError;e.exports=function(e,t){var r,n;if("string"===t&&o(r=e.toString)&&!a(n=i(r,e)))return n;if(o(r=e.valueOf)&&!a(n=i(r,e)))return n;if("string"!==t&&o(r=e.toString)&&!a(n=i(r,e)))return n;throw s("Can't convert object to primitive value")}},function(e,t,r){var n=r(0),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},function(e,t,r){var n=r(162);e.exports=n},function(e,t,r){var n=r(163);e.exports=n},function(e,t,r){var n=r(164);r(43),e.exports=n},function(e,t,r){r(46),r(67);var n=r(55);e.exports=n},function(e,t,r){var n=r(0),i=r(9),o=r(83),a=n.WeakMap;e.exports=i(a)&&/native code/.test(o(a))},function(e,t,r){var n=r(86),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){"use strict";var n=r(88),i=r(34);e.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,r){var n=r(0),i=r(9),o=n.String,a=n.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},function(e,t,r){var n=r(5),i=r(86),o=r(42),a=r(51),s=n("".charAt),u=n("".charCodeAt),l=n("".slice),c=function(e){return function(t,r){var n,c,d=o(a(t)),f=i(r),h=d.length;return f<0||f>=h?e?"":void 0:(n=u(d,f))<55296||n>56319||f+1===h||(c=u(d,f+1))<56320||c>57343?e?s(d,f):n:e?l(d,f,f+2):c-56320+(n-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,r){r(118),r(70),r(173),r(174),r(175),r(176),r(177),r(123),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189);var n=r(11);e.exports=n.Symbol},function(e,t,r){var n=r(0),i=r(53),o=r(69),a=r(13),s=r(6)("species"),u=n.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,o(t)&&(t===u||i(t.prototype))?t=void 0:a(t)&&null===(t=t[s])&&(t=void 0)),void 0===t?u:t}},function(e,t,r){"use strict";var n=r(4),i=r(0),o=r(21),a=r(36),s=r(20),u=r(5),l=r(32),c=r(23),d=r(77),f=r(8),h=r(14),p=r(53),g=r(9),v=r(13),m=r(22),y=r(76),b=r(18),_=r(37),E=r(30),T=r(60),S=r(42),w=r(29),A=r(39),x=r(113),L=r(90),k=r(120),R=r(122),O=r(59),D=r(27),P=r(112),C=r(101),I=r(56),M=r(41),j=r(79),N=r(63),F=r(64),U=r(81),B=r(6),G=r(91),H=r(10),q=r(48),K=r(54),W=r(92).forEach,V=N("hidden"),z=B("toPrimitive"),Y=K.set,X=K.getterFor("Symbol"),$=Object.prototype,J=i.Symbol,Q=J&&J.prototype,Z=i.TypeError,ee=i.QObject,te=o("JSON","stringify"),re=O.f,ne=D.f,ie=k.f,oe=C.f,ae=u([].push),se=j("symbols"),ue=j("op-symbols"),le=j("string-to-symbol-registry"),ce=j("symbol-to-string-registry"),de=j("wks"),fe=!ee||!ee.prototype||!ee.prototype.findChild,he=c&&f(function(){return 7!=A(ne({},"a",{get:function(){return ne(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=re($,t);n&&delete $[t],ne(e,t,r),n&&e!==$&&ne($,t,n)}:ne,pe=function(e,t){var r=se[e]=A(Q);return Y(r,{type:"Symbol",tag:e,description:t}),c||(r.description=t),r},ge=function(e,t,r){e===$&&ge(ue,t,r),b(e);var n=T(t);return b(r),h(se,n)?(r.enumerable?(h(e,V)&&e[V][n]&&(e[V][n]=!1),r=A(r,{enumerable:w(0,!1)})):(h(e,V)||ne(e,V,w(1,{})),e[V][n]=!0),he(e,n,r)):ne(e,n,r)},ve=function(e,t){b(e);var r=E(t),n=x(r).concat(_e(r));return W(n,function(t){c&&!s(me,r,t)||ge(e,t,r[t])}),e},me=function(e){var t=T(e),r=s(oe,this,t);return!(this===$&&h(se,t)&&!h(ue,t))&&(!(r||!h(this,t)||!h(se,t)||h(this,V)&&this[V][t])||r)},ye=function(e,t){var r=E(e),n=T(t);if(r!==$||!h(se,n)||h(ue,n)){var i=re(r,n);return!i||!h(se,n)||h(r,V)&&r[V][n]||(i.enumerable=!0),i}},be=function(e){var t=ie(E(e)),r=[];return W(t,function(e){h(se,e)||h(F,e)||ae(r,e)}),r},_e=function(e){var t=e===$,r=ie(t?ue:E(e)),n=[];return W(r,function(e){!h(se,e)||t&&!h($,e)||ae(n,se[e])}),n};(d||(M(Q=(J=function(){if(m(Q,this))throw Z("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?S(arguments[0]):void 0,t=U(e),r=function(e){this===$&&s(r,ue,e),h(this,V)&&h(this[V],t)&&(this[V][t]=!1),he(this,t,w(1,e))};return c&&fe&&he($,t,{configurable:!0,set:r}),pe(t,e)}).prototype,"toString",function(){return X(this).tag}),M(J,"withoutSetter",function(e){return pe(U(e),e)}),C.f=me,D.f=ge,P.f=ve,O.f=ye,L.f=k.f=be,R.f=_e,G.f=function(e){return pe(B(e),e)},c&&(ne(Q,"description",{configurable:!0,get:function(){return X(this).description}}),l||M($,"propertyIsEnumerable",me,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:J}),W(x(de),function(e){H(e)}),n({target:"Symbol",stat:!0,forced:!d},{for:function(e){var t=S(e);if(h(le,t))return le[t];var r=J(t);return le[t]=r,ce[r]=t,r},keyFor:function(e){if(!y(e))throw Z(e+" is not a symbol");if(h(ce,e))return ce[e]},useSetter:function(){fe=!0},useSimple:function(){fe=!1}}),n({target:"Object",stat:!0,forced:!d,sham:!c},{create:function(e,t){return void 0===t?A(e):ve(A(e),t)},defineProperty:ge,defineProperties:ve,getOwnPropertyDescriptor:ye}),n({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:be,getOwnPropertySymbols:_e}),n({target:"Object",stat:!0,forced:f(function(){R.f(1)})},{getOwnPropertySymbols:function(e){return R.f(_(e))}}),te)&&n({target:"JSON",stat:!0,forced:!d||f(function(){var e=J();return"[null]"!=te([e])||"{}"!=te({a:e})||"{}"!=te(Object(e))})},{stringify:function(e,t,r){var n=I(arguments),i=t;if((v(t)||void 0!==e)&&!y(e))return p(t)||(t=function(e,t){if(g(i)&&(t=s(i,this,e,t)),!y(t))return t}),n[1]=t,a(te,null,n)}});if(!Q[z]){var Ee=Q.valueOf;M(Q,z,function(e){return s(Ee,this)})}q(J,"Symbol"),F[V]=!0},function(e,t,r){r(10)("asyncIterator")},function(e,t){},function(e,t,r){r(10)("hasInstance")},function(e,t,r){r(10)("isConcatSpreadable")},function(e,t,r){r(10)("match")},function(e,t,r){r(10)("matchAll")},function(e,t,r){r(10)("replace")},function(e,t,r){r(10)("search")},function(e,t,r){r(10)("species")},function(e,t,r){r(10)("split")},function(e,t,r){r(10)("toPrimitive")},function(e,t,r){r(10)("toStringTag")},function(e,t,r){r(10)("unscopables")},function(e,t,r){var n=r(0);r(48)(n.JSON,"JSON",!0)},function(e,t){},function(e,t){},function(e,t,r){var n=r(191);e.exports=n},function(e,t,r){r(67),r(192);var n=r(11);e.exports=n.Array.from},function(e,t,r){var n=r(4),i=r(193);n({target:"Array",stat:!0,forced:!r(126)(function(e){Array.from(e)})},{from:i})},function(e,t,r){"use strict";var n=r(0),i=r(38),o=r(20),a=r(37),s=r(194),u=r(125),l=r(69),c=r(40),d=r(68),f=r(93),h=r(55),p=n.Array;e.exports=function(e){var t=a(e),r=l(this),n=arguments.length,g=n>1?arguments[1]:void 0,v=void 0!==g;v&&(g=i(g,n>2?arguments[2]:void 0));var m,y,b,_,E,T,S=h(t),w=0;if(!S||this==p&&u(S))for(m=c(t),y=r?new this(m):p(m);m>w;w++)T=v?g(t[w],w):t[w],d(y,w,T);else for(E=(_=f(t,S)).next,y=r?new this:[];!(b=o(E,_)).done;w++)T=v?s(_,g,[b.value,w],!0):b.value,d(y,w,T);return y.length=w,y}},function(e,t,r){var n=r(18),i=r(124);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){i(e,"throw",t)}}},function(e,t,r){var n=r(196);e.exports=n},function(e,t,r){var n=r(22),i=r(197),o=Array.prototype;e.exports=function(e){var t=e.slice;return e===o||n(o,e)&&t===o.slice?i:t}},function(e,t,r){r(198);var n=r(28);e.exports=n("Array").slice},function(e,t,r){"use strict";var n=r(4),i=r(0),o=r(53),a=r(69),s=r(13),u=r(85),l=r(40),c=r(30),d=r(68),f=r(6),h=r(89),p=r(56),g=h("slice"),v=f("species"),m=i.Array,y=Math.max;n({target:"Array",proto:!0,forced:!g},{slice:function(e,t){var r,n,i,f=c(this),h=l(f),g=u(e,h),b=u(void 0===t?h:t,h);if(o(f)&&(r=f.constructor,a(r)&&(r===m||o(r.prototype))?r=void 0:s(r)&&null===(r=r[v])&&(r=void 0),r===m||void 0===r))return p(f,g,b);for(n=new(void 0===r?m:r)(y(b-g,0)),i=0;g<b;g++,i++)g in f&&d(n,i,f[g]);return n.length=i,n}})},function(e,t,r){var n=r(200);e.exports=n},function(e,t,r){r(201);var n=r(11);e.exports=n.Reflect.construct},function(e,t,r){var n=r(4),i=r(21),o=r(36),a=r(202),s=r(127),u=r(18),l=r(13),c=r(39),d=r(8),f=i("Reflect","construct"),h=Object.prototype,p=[].push,g=d(function(){function e(){}return!(f(function(){},[],e)instanceof e)}),v=!d(function(){f(function(){})}),m=g||v;n({target:"Reflect",stat:!0,forced:m,sham:m},{construct:function(e,t){s(e),u(t);var r=arguments.length<3?e:s(arguments[2]);if(v&&!g)return f(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return o(p,n,t),new(o(a,e,n))}var i=r.prototype,d=c(l(i)?i:h),m=o(e,d,t);return l(m)?m:d}})},function(e,t,r){"use strict";var n=r(0),i=r(5),o=r(31),a=r(13),s=r(14),u=r(56),l=r(50),c=n.Function,d=i([].concat),f=i([].join),h={};e.exports=l?c.bind:function(e){var t=o(this),r=t.prototype,n=u(arguments,1),i=function(){var r=d(n,u(arguments));return this instanceof i?function(e,t,r){if(!s(h,t)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";h[t]=c("C,a","return new C("+f(n,",")+")")}return h[t](e,r)}(t,r.length,r):t.apply(e,r)};return a(r)&&(i.prototype=r),i}},function(e,t,r){var n=r(204);e.exports=n},function(e,t,r){r(205);var n=r(11).Object;e.exports=function(e){return n.getOwnPropertyNames(e)}},function(e,t,r){var n=r(4),i=r(8),o=r(120).f;n({target:"Object",stat:!0,forced:i(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:o})},function(e,t,r){var n=r(207);e.exports=n},function(e,t,r){r(208);var n=r(11),i=r(36);n.JSON||(n.JSON={stringify:JSON.stringify}),e.exports=function(e,t,r){return i(n.JSON.stringify,null,arguments)}},function(e,t,r){var n=r(4),i=r(0),o=r(21),a=r(36),s=r(5),u=r(8),l=i.Array,c=o("JSON","stringify"),d=s(/./.exec),f=s("".charAt),h=s("".charCodeAt),p=s("".replace),g=s(1..toString),v=/[\uD800-\uDFFF]/g,m=/^[\uD800-\uDBFF]$/,y=/^[\uDC00-\uDFFF]$/,b=function(e,t,r){var n=f(r,t-1),i=f(r,t+1);return d(m,e)&&!d(y,i)||d(y,e)&&!d(m,n)?"\\u"+g(h(e,0),16):e},_=u(function(){return'"\\udf06\\ud834"'!==c("\udf06\ud834")||'"\\udead"'!==c("\udead")});c&&n({target:"JSON",stat:!0,forced:_},{stringify:function(e,t,r){for(var n=0,i=arguments.length,o=l(i);n<i;n++)o[n]=arguments[n];var s=a(c,null,o);return"string"==typeof s?p(s,v,b):s}})},function(e,t,r){r(128);var n=r(11);e.exports=n.setTimeout},function(e,t,r){var n=r(211);e.exports=n},function(e,t,r){var n=r(22),i=r(212),o=Array.prototype;e.exports=function(e){var t=e.concat;return e===o||n(o,e)&&t===o.concat?i:t}},function(e,t,r){r(118);var n=r(28);e.exports=n("Array").concat},function(e,t,r){e.exports=r(214)},function(e,t,r){var n=r(215);e.exports=n},function(e,t,r){var n=r(216);e.exports=n},function(e,t,r){var n=r(217);e.exports=n},function(e,t,r){r(218);var n=r(11).Object,i=e.exports=function(e,t,r){return n.defineProperty(e,t,r)};n.defineProperty.sham&&(i.sham=!0)},function(e,t,r){var n=r(4),i=r(23),o=r(27).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!i},{defineProperty:o})},function(e,t,r){e.exports=r(220)},function(e,t,r){var n=r(221);e.exports=n},function(e,t,r){var n=r(129);e.exports=n},function(e,t,r){r(223);var n=r(11).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){r(4)({target:"Object",stat:!0,sham:!r(23)},{create:r(39)})},function(e,t,r){var n=r(130);function i(t,r){return e.exports=i=n||function(e,t){return e.__proto__=t,e},i(t,r)}e.exports=i},function(e,t,r){var n=r(226);e.exports=n},function(e,t,r){var n=r(227);e.exports=n},function(e,t,r){var n=r(228);e.exports=n},function(e,t,r){r(229);var n=r(11);e.exports=n.Object.setPrototypeOf},function(e,t,r){r(4)({target:"Object",stat:!0},{setPrototypeOf:r(66)})},function(e,t,r){e.exports=r(231)},function(e,t,r){var n=r(232);e.exports=n},function(e,t,r){var n=r(131);e.exports=n},function(e,t,r){r(46),r(70),r(67),r(123);var n=r(91);e.exports=n.f("iterator")},function(e,t,r){e.exports=r(235)},function(e,t,r){var n=r(236);r(237),r(238),r(239),r(240),r(241),r(242),r(243),e.exports=n},function(e,t,r){var n=r(117);e.exports=n},function(e,t,r){r(10)("asyncDispose")},function(e,t,r){r(10)("dispose")},function(e,t,r){r(10)("matcher")},function(e,t,r){r(10)("metadata")},function(e,t,r){r(10)("observable")},function(e,t,r){r(10)("patternMatch")},function(e,t,r){r(10)("replaceAll")},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,r){e.exports=r(246)},function(e,t,r){var n=r(247);e.exports=n},function(e,t,r){var n=r(248);e.exports=n},function(e,t,r){var n=r(249);e.exports=n},function(e,t,r){r(250);var n=r(11);e.exports=n.Object.getPrototypeOf},function(e,t,r){var n=r(4),i=r(8),o=r(37),a=r(65),s=r(116);n({target:"Object",stat:!0,forced:i(function(){a(1)}),sham:!s},{getPrototypeOf:function(e){return a(o(e))}})},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,r){var n=r(253);e.exports=n},function(e,t,r){r(254);var n=r(11);e.exports=n.Date.now},function(e,t,r){var n=r(4),i=r(0),o=r(5),a=i.Date,s=o(a.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return s(new a)}})},function(e,t,r){var n=r(256);r(43),e.exports=n},function(e,t,r){r(257),r(46),r(70),r(264),r(272),r(273),r(274),r(67);var n=r(11);e.exports=n.Promise},function(e,t,r){"use strict";var n=r(4),i=r(0),o=r(22),a=r(65),s=r(66),u=r(258),l=r(39),c=r(33),d=r(29),f=r(260),h=r(261),p=r(71),g=r(262),v=r(6),m=r(263),y=v("toStringTag"),b=i.Error,_=[].push,E=function(e,t){var r,n=arguments.length>2?arguments[2]:void 0,i=o(T,this);s?r=s(new b,i?a(this):T):(r=i?this:l(T),c(r,y,"Error")),void 0!==t&&c(r,"message",g(t)),m&&c(r,"stack",f(r.stack,1)),h(r,n);var u=[];return p(e,_,{that:u}),c(r,"errors",u),r};s?s(E,b):u(E,b,{name:!0});var T=E.prototype=l(b.prototype,{constructor:d(1,E),message:d(1,""),name:d(1,"AggregateError")});n({global:!0},{AggregateError:E})},function(e,t,r){var n=r(14),i=r(259),o=r(59),a=r(27);e.exports=function(e,t,r){for(var s=i(t),u=a.f,l=o.f,c=0;c<s.length;c++){var d=s[c];n(e,d)||r&&n(r,d)||u(e,d,l(t,d))}}},function(e,t,r){var n=r(21),i=r(5),o=r(90),a=r(122),s=r(18),u=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(s(e)),r=a.f;return r?u(t,r(e)):t}},function(e,t,r){var n=r(5)("".replace),i=String(Error("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,a=o.test(i);e.exports=function(e,t){if(a&&"string"==typeof e)for(;t--;)e=n(e,o,"");return e}},function(e,t,r){var n=r(13),i=r(33);e.exports=function(e,t){n(t)&&"cause"in t&&i(e,"cause",t.cause)}},function(e,t,r){var n=r(42);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},function(e,t,r){var n=r(8),i=r(29);e.exports=!n(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)})},function(e,t,r){"use strict";var n,i,o,a,s=r(4),u=r(32),l=r(0),c=r(21),d=r(20),f=r(132),h=r(41),p=r(133),g=r(66),v=r(48),m=r(265),y=r(31),b=r(9),_=r(13),E=r(134),T=r(83),S=r(71),w=r(126),A=r(135),x=r(136).set,L=r(266),k=r(138),R=r(269),O=r(72),D=r(95),P=r(270),C=r(54),I=r(105),M=r(6),j=r(271),N=r(94),F=r(61),U=M("species"),B="Promise",G=C.getterFor(B),H=C.set,q=C.getterFor(B),K=f&&f.prototype,W=f,V=K,z=l.TypeError,Y=l.document,X=l.process,$=O.f,J=$,Q=!!(Y&&Y.createEvent&&l.dispatchEvent),Z=b(l.PromiseRejectionEvent),ee=!1,te=I(B,function(){var e=T(W),t=e!==String(W);if(!t&&66===F)return!0;if(u&&!V.finally)return!0;if(F>=51&&/native code/.test(e))return!1;var r=new W(function(e){e(1)}),n=function(e){e(function(){},function(){})};return(r.constructor={})[U]=n,!(ee=r.then(function(){})instanceof n)||!t&&j&&!Z}),re=te||!w(function(e){W.all(e).catch(function(){})}),ne=function(e){var t;return!(!_(e)||!b(t=e.then))&&t},ie=function(e,t){var r,n,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(a||(2===t.rejection&&le(t),t.rejection=1),!0===s?r=o:(c&&c.enter(),r=s(o),c&&(c.exit(),i=!0)),r===e.promise?l(z("Promise-chain cycle")):(n=ne(r))?d(n,r,u,l):u(r)):l(o)}catch(e){c&&!i&&c.exit(),l(e)}},oe=function(e,t){e.notified||(e.notified=!0,L(function(){for(var r,n=e.reactions;r=n.get();)ie(r,e);e.notified=!1,t&&!e.rejection&&se(e)}))},ae=function(e,t,r){var n,i;Q?((n=Y.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),l.dispatchEvent(n)):n={promise:t,reason:r},!Z&&(i=l["on"+e])?i(n):"unhandledrejection"===e&&R("Unhandled promise rejection",r)},se=function(e){d(x,l,function(){var t,r=e.facade,n=e.value;if(ue(e)&&(t=D(function(){N?X.emit("unhandledRejection",n,r):ae("unhandledrejection",r,n)}),e.rejection=N||ue(e)?2:1,t.error))throw t.value})},ue=function(e){return 1!==e.rejection&&!e.parent},le=function(e){d(x,l,function(){var t=e.facade;N?X.emit("rejectionHandled",t):ae("rejectionhandled",t,e.value)})},ce=function(e,t,r){return function(n){e(t,n,r)}},de=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,oe(e,!0))},fe=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw z("Promise can't be resolved itself");var n=ne(t);n?L(function(){var r={done:!1};try{d(n,t,ce(fe,r,e),ce(de,r,e))}catch(t){de(r,t,e)}}):(e.value=t,e.state=1,oe(e,!1))}catch(t){de({done:!1},t,e)}}};if(te&&(V=(W=function(e){E(this,V),y(e),d(n,this);var t=G(this);try{e(ce(fe,t),ce(de,t))}catch(e){de(t,e)}}).prototype,(n=function(e){H(this,{type:B,done:!1,notified:!1,parent:!1,reactions:new P,rejection:!1,state:0,value:void 0})}).prototype=p(V,{then:function(e,t){var r=q(this),n=$(A(this,W));return r.parent=!0,n.ok=!b(e)||e,n.fail=b(t)&&t,n.domain=N?X.domain:void 0,0==r.state?r.reactions.add(n):L(function(){ie(n,r)}),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n,t=G(e);this.promise=e,this.resolve=ce(fe,t),this.reject=ce(de,t)},O.f=$=function(e){return e===W||e===o?new i(e):J(e)},!u&&b(f)&&K!==Object.prototype)){a=K.then,ee||(h(K,"then",function(e,t){var r=this;return new W(function(e,t){d(a,r,e,t)}).then(e,t)},{unsafe:!0}),h(K,"catch",V.catch,{unsafe:!0}));try{delete K.constructor}catch(e){}g&&g(K,V)}s({global:!0,wrap:!0,forced:te},{Promise:W}),v(W,B,!1,!0),m(B),o=c(B),s({target:B,stat:!0,forced:te},{reject:function(e){var t=$(this);return d(t.reject,void 0,e),t.promise}}),s({target:B,stat:!0,forced:u||te},{resolve:function(e){return k(u&&this===o?W:this,e)}}),s({target:B,stat:!0,forced:re},{all:function(e){var t=this,r=$(t),n=r.resolve,i=r.reject,o=D(function(){var r=y(t.resolve),o=[],a=0,s=1;S(e,function(e){var u=a++,l=!1;s++,d(r,t,e).then(function(e){l||(l=!0,o[u]=e,--s||n(o))},i)}),--s||n(o)});return o.error&&i(o.value),r.promise},race:function(e){var t=this,r=$(t),n=r.reject,i=D(function(){var i=y(t.resolve);S(e,function(e){d(i,t,e).then(r.resolve,n)})});return i.error&&n(i.value),r.promise}})},function(e,t,r){"use strict";var n=r(21),i=r(27),o=r(6),a=r(23),s=o("species");e.exports=function(e){var t=n(e),r=i.f;a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n,i,o,a,s,u,l,c,d=r(0),f=r(38),h=r(59).f,p=r(136).set,g=r(137),v=r(267),m=r(268),y=r(94),b=d.MutationObserver||d.WebKitMutationObserver,_=d.document,E=d.process,T=d.Promise,S=h(d,"queueMicrotask"),w=S&&S.value;w||(n=function(){var e,t;for(y&&(e=E.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},g||y||m||!b||!_?!v&&T&&T.resolve?((l=T.resolve(void 0)).constructor=T,c=f(l.then,l),a=function(){c(n)}):y?a=function(){E.nextTick(n)}:(p=f(p,d),a=function(){p(n)}):(s=!0,u=_.createTextNode(""),new b(n).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),e.exports=w||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},function(e,t,r){var n=r(52),i=r(0);e.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==i.Pebble},function(e,t,r){var n=r(52);e.exports=/web0s(?!.*chrome)/i.test(n)},function(e,t,r){var n=r(0);e.exports=function(e,t){var r=n.console;r&&r.error&&(1==arguments.length?r.error(e):r.error(e,t))}},function(e,t){var r=function(){this.head=null,this.tail=null};r.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=r},function(e,t){e.exports="object"==typeof window},function(e,t,r){"use strict";var n=r(4),i=r(20),o=r(31),a=r(72),s=r(95),u=r(71);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=a.f(t),n=r.resolve,l=r.reject,c=s(function(){var r=o(t.resolve),a=[],s=0,l=1;u(e,function(e){var o=s++,u=!1;l++,i(r,t,e).then(function(e){u||(u=!0,a[o]={status:"fulfilled",value:e},--l||n(a))},function(e){u||(u=!0,a[o]={status:"rejected",reason:e},--l||n(a))})}),--l||n(a)});return c.error&&l(c.value),r.promise}})},function(e,t,r){"use strict";var n=r(4),i=r(31),o=r(21),a=r(20),s=r(72),u=r(95),l=r(71);n({target:"Promise",stat:!0},{any:function(e){var t=this,r=o("AggregateError"),n=s.f(t),c=n.resolve,d=n.reject,f=u(function(){var n=i(t.resolve),o=[],s=0,u=1,f=!1;l(e,function(e){var i=s++,l=!1;u++,a(n,t,e).then(function(e){l||f||(f=!0,c(e))},function(e){l||f||(l=!0,o[i]=e,--u||d(new r(o,"No one promise resolved")))})}),--u||d(new r(o,"No one promise resolved"))});return f.error&&d(f.value),n.promise}})},function(e,t,r){"use strict";var n=r(4),i=r(32),o=r(132),a=r(8),s=r(21),u=r(9),l=r(135),c=r(138),d=r(41);if(n({target:"Promise",proto:!0,real:!0,forced:!!o&&a(function(){o.prototype.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=l(this,s("Promise")),r=u(e);return this.then(r?function(r){return c(t,e()).then(function(){return r})}:e,r?function(r){return c(t,e()).then(function(){throw r})}:e)}}),!i&&u(o)){var f=s("Promise").prototype.finally;o.prototype.finally!==f&&d(o.prototype,"finally",f,{unsafe:!0})}},function(e,t,r){r(276),e.exports=self.fetch.bind(self)},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",function(){return U}),r.d(t,"Request",function(){return V}),r.d(t,"Response",function(){return Y}),r.d(t,"DOMException",function(){return $}),r.d(t,"fetch",function(){return J});var n=r(96),i=r.n(n),o=r(17),a=r.n(o),s=r(147),u=r.n(s),l=r(75),c=r.n(l),d=r(97),f=r.n(d),h=r(49),p=r.n(h),g=r(12),v=r.n(g),m=r(148),y=r.n(m),b=r(25),_=r.n(b),E=r(57),T=r.n(E),S=r(73),w=r.n(S),A=r(26),x=r.n(A),L=r(98),k=r.n(L),R=r(35),O=r.n(R),D=r(74),P="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==P&&P,C={searchParams:"URLSearchParams"in P,iterable:"Symbol"in P&&"iterator"in r.n(D).a,blob:"FileReader"in P&&"Blob"in P&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in P,arrayBuffer:"ArrayBuffer"in P};if(C.arrayBuffer)var I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],M=ArrayBuffer.isView||function(e){return e&&O()(I).call(I,Object.prototype.toString.call(e))>-1};function j(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function N(e){return"string"!=typeof e&&(e=String(e)),e}function F(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return C.iterable&&(t[k.a]=function(){return t}),t}function U(e){if(this.map={},e instanceof U)x()(e).call(e,function(e,t){this.append(t,e)},this);else if(w()(e))x()(e).call(e,function(e){this.append(e[0],e[1])},this);else if(e){var t;x()(t=T()(e)).call(t,function(t){this.append(t,e[t])},this)}}function B(e){if(e.bodyUsed)return v.a.reject(new TypeError("Already read"));e.bodyUsed=!0}function G(e){return new v.a(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function H(e){var t=new FileReader,r=G(t);return t.readAsArrayBuffer(e),r}function q(e){if(p()(e))return p()(e).call(e,0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function K(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:C.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:C.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:C.searchParams&&f.a.prototype.isPrototypeOf(e)?this._bodyText=e.toString():C.arrayBuffer&&C.blob&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=q(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):C.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||M(e))?this._bodyArrayBuffer=q(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):C.searchParams&&f.a.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},C.blob&&(this.blob=function(){var e=B(this);if(e)return e;if(this._bodyBlob)return v.a.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return v.a.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return v.a.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e,t=B(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?v.a.resolve(p()(e=this._bodyArrayBuffer.buffer).call(e,this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):v.a.resolve(this._bodyArrayBuffer))}return this.blob().then(H)}),this.text=function(){var e=B(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=G(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return v.a.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return v.a.resolve(this._bodyText)},C.formData&&(this.formData=function(){return this.text().then(z)}),this.json=function(){return this.text().then(JSON.parse)},this}U.prototype.append=function(e,t){e=j(e),t=N(t);var r=_()(this)[e];_()(this)[e]=r?r+", "+t:t},U.prototype.delete=function(e){delete _()(this)[j(e)]},U.prototype.get=function(e){return e=j(e),this.has(e)?_()(this)[e]:null},U.prototype.has=function(e){return _()(this).hasOwnProperty(j(e))},U.prototype.set=function(e,t){_()(this)[j(e)]=N(t)},U.prototype.forEach=function(e,t){for(var r in _()(this))_()(this).hasOwnProperty(r)&&e.call(t,_()(this)[r],r,this)},U.prototype.keys=function(){var e,t=[];return x()(e=this).call(e,function(e,r){t.push(r)}),F(t)},U.prototype.values=function(){var e,t=[];return x()(e=this).call(e,function(e){t.push(e)}),F(t)},U.prototype.entries=function(){var e,t=[];return x()(e=this).call(e,function(e,r){t.push([r,e])}),F(t)},C.iterable&&(U.prototype[k.a]=y()(U.prototype));var W=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function V(e,t){if(!(this instanceof V))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r=(t=t||{}).body;if(e instanceof V){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new U(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new U(t.headers)),this.method=function(e){var t=e.toUpperCase();return O()(W).call(W,t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function z(e){var t,r=new FormData;return x()(t=c()(e).call(e).split("&")).call(t,function(e){if(e){var t=e.split("="),n=t.shift().replace(/\+/g," "),i=t.join("=").replace(/\+/g," ");r.append(decodeURIComponent(n),decodeURIComponent(i))}}),r}function Y(e,t){if(!(this instanceof Y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new U(t.headers),this.url=t.url||"",this._initBody(e)}V.prototype.clone=function(){return new V(this,{body:this._bodyInit})},K.call(V.prototype),K.call(Y.prototype),Y.prototype.clone=function(){return new Y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new U(this.headers),url:this.url})},Y.error=function(){var e=new Y(null,{status:0,statusText:""});return e.type="error",e};var X=[301,302,303,307,308];Y.redirect=function(e,t){if(-1===O()(X).call(X,t))throw new RangeError("Invalid status code");return new Y(null,{status:t,headers:{location:e}})};var $=P.DOMException;try{new $}catch(e){($=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=u()(Error.prototype),$.prototype.constructor=$}function J(e,t){return new v.a(function(r,n){var o=new V(e,t);if(o.signal&&o.signal.aborted)return n(new $("Aborted","AbortError"));var s,u,l,d=new XMLHttpRequest;function f(){d.abort()}(d.onload=function(){var e={status:d.status,statusText:d.statusText,headers:function(e){var t,r,n=new U,i=e.replace(/\r?\n[\t ]+/g," ");return x()(t=_()(r=i.split("\r")).call(r,function(e){return 0===O()(e).call(e,"\n")?e.substr(1,e.length):e})).call(t,function(e){var t,r=e.split(":"),i=c()(t=r.shift()).call(t);if(i){var o,a=c()(o=r.join(":")).call(o);n.append(i,a)}}),n}(d.getAllResponseHeaders()||"")};e.url="responseURL"in d?d.responseURL:e.headers.get("X-Request-URL");var t="response"in d?d.response:d.responseText;a()(function(){r(new Y(t,e))},0)},d.onerror=function(){a()(function(){n(new TypeError("Network request failed"))},0)},d.ontimeout=function(){a()(function(){n(new TypeError("Network request failed"))},0)},d.onabort=function(){a()(function(){n(new $("Aborted","AbortError"))},0)},d.open(o.method,function(e){try{return""===e&&P.location.href?P.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?d.withCredentials=!0:"omit"===o.credentials&&(d.withCredentials=!1),"responseType"in d)&&(C.blob?d.responseType="blob":C.arrayBuffer&&o.headers.get("Content-Type")&&-1!==O()(s=o.headers.get("Content-Type")).call(s,"application/octet-stream")&&(d.responseType="arraybuffer"));!t||"object"!==i()(t.headers)||t.headers instanceof U?x()(u=o.headers).call(u,function(e,t){d.setRequestHeader(t,e)}):x()(l=T()(t.headers)).call(l,function(e){d.setRequestHeader(e,N(t.headers[e]))});o.signal&&(o.signal.addEventListener("abort",f),d.onreadystatechange=function(){4===d.readyState&&o.signal.removeEventListener("abort",f)}),d.send(void 0===o._bodyInit?null:o._bodyInit)})}J.polyfill=!0,P.fetch||(P.fetch=J,P.Headers=U,P.Request=V,P.Response=Y)},function(e,t,r){var n=r(278);e.exports=n},function(e,t,r){var n=r(22),i=r(279),o=String.prototype;e.exports=function(e){var t=e.trim;return"string"==typeof e||e===o||n(o,e)&&t===o.trim?i:t}},function(e,t,r){r(280);var n=r(28);e.exports=n("String").trim},function(e,t,r){"use strict";var n=r(4),i=r(281).trim;n({target:"String",proto:!0,forced:r(282)("trim")},{trim:function(){return i(this)}})},function(e,t,r){var n=r(5),i=r(51),o=r(42),a=r(139),s=n("".replace),u="["+a+"]",l=RegExp("^"+u+u+"*"),c=RegExp(u+u+"*$"),d=function(e){return function(t){var r=o(i(t));return 1&e&&(r=s(r,l,"")),2&e&&(r=s(r,c,"")),r}};e.exports={start:d(1),end:d(2),trim:d(3)}},function(e,t,r){var n=r(109).PROPER,i=r(8),o=r(139);e.exports=function(e){return i(function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||n&&o[e].name!==e})}},function(e,t,r){var n=r(284);r(43),e.exports=n},function(e,t,r){r(285);var n=r(11);e.exports=n.URLSearchParams},function(e,t,r){"use strict";r(46);var n=r(4),i=r(0),o=r(21),a=r(20),s=r(5),u=r(286),l=r(41),c=r(133),d=r(48),f=r(110),h=r(54),p=r(134),g=r(9),v=r(14),m=r(38),y=r(34),b=r(18),_=r(13),E=r(42),T=r(39),S=r(29),w=r(93),A=r(55),x=r(287),L=r(6),k=r(288),R=L("iterator"),O=h.set,D=h.getterFor("URLSearchParams"),P=h.getterFor("URLSearchParamsIterator"),C=o("fetch"),I=o("Request"),M=o("Headers"),j=I&&I.prototype,N=M&&M.prototype,F=i.RegExp,U=i.TypeError,B=i.decodeURIComponent,G=i.encodeURIComponent,H=s("".charAt),q=s([].join),K=s([].push),W=s("".replace),V=s([].shift),z=s([].splice),Y=s("".split),X=s("".slice),$=/\+/g,J=Array(4),Q=function(e){return J[e-1]||(J[e-1]=F("((?:%[\\da-f]{2}){"+e+"})","gi"))},Z=function(e){try{return B(e)}catch(t){return e}},ee=function(e){var t=W(e,$," "),r=4;try{return B(t)}catch(e){for(;r;)t=W(t,Q(r--),Z);return t}},te=/[!'()~]|%20/g,re={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ne=function(e){return re[e]},ie=function(e){return W(G(e),te,ne)},oe=f(function(e,t){O(this,{type:"URLSearchParamsIterator",iterator:w(D(e).entries),kind:t})},"Iterator",function(){var e=P(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r},!0),ae=function(e){this.entries=[],this.url=null,void 0!==e&&(_(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===H(e,0)?X(e,1):e:E(e)))};ae.prototype={type:"URLSearchParams",bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,i,o,s,u,l=A(e);if(l)for(r=(t=w(e,l)).next;!(n=a(r,t)).done;){if(o=(i=w(b(n.value))).next,(s=a(o,i)).done||(u=a(o,i)).done||!a(o,i).done)throw U("Expected sequence with length 2");K(this.entries,{key:E(s.value),value:E(u.value)})}else for(var c in e)v(e,c)&&K(this.entries,{key:c,value:E(e[c])})},parseQuery:function(e){if(e)for(var t,r,n=Y(e,"&"),i=0;i<n.length;)(t=n[i++]).length&&(r=Y(t,"="),K(this.entries,{key:ee(V(r)),value:ee(q(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],K(r,ie(e.key)+"="+ie(e.value));return q(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var se=function(){p(this,ue);var e=arguments.length>0?arguments[0]:void 0;O(this,new ae(e))},ue=se.prototype;if(c(ue,{append:function(e,t){x(arguments.length,2);var r=D(this);K(r.entries,{key:E(e),value:E(t)}),r.updateURL()},delete:function(e){x(arguments.length,1);for(var t=D(this),r=t.entries,n=E(e),i=0;i<r.length;)r[i].key===n?z(r,i,1):i++;t.updateURL()},get:function(e){x(arguments.length,1);for(var t=D(this).entries,r=E(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){x(arguments.length,1);for(var t=D(this).entries,r=E(e),n=[],i=0;i<t.length;i++)t[i].key===r&&K(n,t[i].value);return n},has:function(e){x(arguments.length,1);for(var t=D(this).entries,r=E(e),n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){x(arguments.length,1);for(var r,n=D(this),i=n.entries,o=!1,a=E(e),s=E(t),u=0;u<i.length;u++)(r=i[u]).key===a&&(o?z(i,u--,1):(o=!0,r.value=s));o||K(i,{key:a,value:s}),n.updateURL()},sort:function(){var e=D(this);k(e.entries,function(e,t){return e.key>t.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,r=D(this).entries,n=m(e,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new oe(this,"keys")},values:function(){return new oe(this,"values")},entries:function(){return new oe(this,"entries")}},{enumerable:!0}),l(ue,R,ue.entries,{name:"entries"}),l(ue,"toString",function(){return D(this).serialize()},{enumerable:!0}),d(se,"URLSearchParams"),n({global:!0,forced:!u},{URLSearchParams:se}),!u&&g(M)){var le=s(N.has),ce=s(N.set),de=function(e){if(_(e)){var t,r=e.body;if("URLSearchParams"===y(r))return t=e.headers?new M(e.headers):new M,le(t,"content-type")||ce(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),T(e,{body:S(0,E(r)),headers:S(0,t)})}return e};if(g(C)&&n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return C(e,arguments.length>1?de(arguments[1]):{})}}),g(I)){var fe=function(e){return p(this,j),new I(e,arguments.length>1?de(arguments[1]):{})};j.constructor=fe,fe.prototype=j,n({global:!0,forced:!0},{Request:fe})}}e.exports={URLSearchParams:se,getState:D}},function(e,t,r){var n=r(8),i=r(6),o=r(32),a=i("iterator");e.exports=!n(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach(function(e,n){t.delete("b"),r+=n+e}),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})},function(e,t,r){var n=r(0).TypeError;e.exports=function(e,t){if(e<t)throw n("Not enough arguments");return e}},function(e,t,r){var n=r(121),i=Math.floor,o=function(e,t){var r=e.length,u=i(r/2);return r<8?a(e,t):s(e,o(n(e,0,u),t),o(n(e,u),t),t)},a=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},s=function(e,t,r,n){for(var i=t.length,o=r.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?n(t[a],r[s])<=0?t[a++]:r[s++]:a<i?t[a++]:r[s++];return e};e.exports=o},function(e,t,r){r(43);var n=r(34),i=r(14),o=r(22),a=r(290),s=Array.prototype,u={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.entries;return e===s||o(s,e)&&t===s.entries||i(u,n(e))?a:t}},function(e,t,r){var n=r(291);e.exports=n},function(e,t,r){r(46),r(70);var n=r(28);e.exports=n("Array").entries},function(e,t,r){var n=r(293);e.exports=n},function(e,t,r){var n=r(22),i=r(294),o=Array.prototype;e.exports=function(e){var t=e.map;return e===o||n(o,e)&&t===o.map?i:t}},function(e,t,r){r(295);var n=r(28);e.exports=n("Array").map},function(e,t,r){"use strict";var n=r(4),i=r(92).map;n({target:"Array",proto:!0,forced:!r(89)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){r(43);var n=r(34),i=r(14),o=r(22),a=r(297),s=Array.prototype,u={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.forEach;return e===s||o(s,e)&&t===s.forEach||i(u,n(e))?a:t}},function(e,t,r){var n=r(298);e.exports=n},function(e,t,r){r(299);var n=r(28);e.exports=n("Array").forEach},function(e,t,r){"use strict";var n=r(4),i=r(300);n({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(e,t,r){"use strict";var n=r(92).forEach,i=r(140)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,r){var n=r(302);e.exports=n},function(e,t,r){var n=r(22),i=r(303),o=Array.prototype;e.exports=function(e){var t=e.indexOf;return e===o||n(o,e)&&t===o.indexOf?i:t}},function(e,t,r){r(304);var n=r(28);e.exports=n("Array").indexOf},function(e,t,r){"use strict";var n=r(4),i=r(5),o=r(84).indexOf,a=r(140),s=i([].indexOf),u=!!s&&1/s([1],1,-0)<0,l=a("indexOf");n({target:"Array",proto:!0,forced:u||!l},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return u?s(this,e,t)||0:o(this,e,t)}})},function(e,t,r){r(128);var n=r(11);e.exports=n.setInterval},function(e,t,r){var n=r(307);e.exports=n},function(e,t,r){var n=r(22),i=r(308),o=r(310),a=Array.prototype,s=String.prototype;e.exports=function(e){var t=e.includes;return e===a||n(a,e)&&t===a.includes?i:"string"==typeof e||e===s||n(s,e)&&t===s.includes?o:t}},function(e,t,r){r(309);var n=r(28);e.exports=n("Array").includes},function(e,t,r){"use strict";var n=r(4),i=r(84).includes,o=r(107);n({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(e,t,r){r(311);var n=r(28);e.exports=n("String").includes},function(e,t,r){"use strict";var n=r(4),i=r(5),o=r(312),a=r(51),s=r(42),u=r(314),l=i("".indexOf);n({target:"String",proto:!0,forced:!u("includes")},{includes:function(e){return!!~l(s(a(this)),s(o(e)),arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(0),i=r(313),o=n.TypeError;e.exports=function(e){if(i(e))throw o("The method doesn't accept regular expressions");return e}},function(e,t,r){var n=r(13),i=r(45),o=r(6)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,r){var n=r(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,r){"use strict";r.r(t);var n,i,o=r(73),a=r.n(o),s=r(141),u=r.n(s),l=r(74),c=r.n(l),d=r(142),f=r.n(d),h=r(49),p=r.n(h),g=r(1),v=r.n(g),m=r(57),y=r.n(m),b=r(24),_=r.n(b),E=r(17),T=r.n(E),S=r(143),w=r.n(S),A=r(2),x=r.n(A),L=r(3),k=r.n(L),R=r(15),O=r.n(R),D=r(16),P=r.n(D),C=r(7),I=r.n(C),M=r(19),j=r.n(M),N=r(144),F=new(r.n(N).a),U=function(){function e(){x()(this,e)}return k()(e,null,[{key:"getParser",value:function(){return F}}]),e}(),B=function(){function e(){x()(this,e)}return k()(e,null,[{key:"isSupportedUserAgent",value:function(){return"UNSUPPORTED_USERAGENT"!==this.choosePlayerCore()}},{key:"choosePlayerCore",value:function(){return void 0===n&&(n=this._getPlayerCore()),n}},{key:"_getPlayerCore",value:function(){var e=U.getParser(),t=e.getUA(),r=e.getOS(),n=r.name.toLowerCase(),i=e.getBrowser();if(!i.name)return"UNSUPPORTED_USERAGENT";var o=i.name.toLowerCase(),a=this._isMSESupported();if(t.match(/Crosswalk\/20\.50\.533\.3[0-9]{1}\s/gi))return"UNSUPPORTED_USERAGENT";if(n.match(/iOS/gi)&&!a)return"AUDIO_TAG";if(n.match(/Android/gi)){if(r.version.match(/^[0-4]\..*/))return"UNSUPPORTED_USERAGENT";if(!a)return"AUDIO_TAG"}if("ie"==o){if(i.version.match(/^(8).*/))return"UNSUPPORTED_USERAGENT";if(i.version.match(/^(9).*/))return"UNSUPPORTED_USERAGENT";if(i.version.match(/^(10).*/))return"UNSUPPORTED_USERAGENT";if(i.version.match(/^(11).*/))return r.version.match(/^7(\..*)?$/)||"8"===r.version?"UNSUPPORTED_USERAGENT":"MSE"}return o.match(/edge/gi)?"MSE":o.match(/chrome/gi)||o.match(/chromium/gi)?"MSE":o.match(/firefox/gi)?"MSE":o.match(/safari/gi)?n.match(/iOS/gi)?"AUDIO_TAG":"MSE":navigator.userAgent.match(/Whale/)?"MSE":a?"MSE":"AUDIO_TAG"}},{key:"_isMSESupported",value:function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,r=!!e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return r&&n}}]),e}(),G=r(145),H=r.n(G),q=r(12),K=r.n(q),W=r(146),V=(r(275),function(){function e(){x()(this,e)}return k()(e,[{key:"getJSON",value:function(e,t,r){return this._fetchJSON(e,"GET",t,null,r)}},{key:"postJSON",value:function(e,t,r,n){return this._fetchJSON(e,"POST",t,r,n)}},{key:"get",value:function(e,t,r){return this._fetch(e,"GET",t,null,r)}},{key:"post",value:function(e,t,r,n){return this._fetch(e,"POST",t,r,n)}},{key:"_fetchJSON",value:function(e,t,r,n,i){return(r=r||{}).Accept="application/json",r["Content-Type"]="application/json",this._fetch(e,t,r,n,i).then(function(e){return 204==e.status?{}:new K.a(function(t,r){e.json().then(function(e){t(e)}).catch(function(e){r("api succeeded but, invalid json format")})})}).catch(function(e){if(!e.response)throw e;return new K.a(function(t,r){e.response.json().then(function(t){r({statusCode:e.statusCode,response:t})}).catch(function(e){r("api failed but, invalid json format")})})})}},{key:"_fetch",value:function(e,t,r,n,i){n=n||null;var o={headers:r,credentials:void 0===i||!0===i?"include":"omit",method:t};return n&&(o.body=n),new K.a(function(t,r){fetch(e,o).then(function(e){e.status>=400?r({statusCode:e.status,response:e}):t(e)}).catch(function(e){r(e)})})}}]),e}()),z=function(){function e(){x()(this,e),this._ajaxClient=new V}return k()(e,[{key:"getJSON",value:function(e,t,r){return this._ajaxClient.getJSON(e,t,r)}},{key:"postJSON",value:function(e,t,r,n){return this._ajaxClient.postJSON(e,t,r,n)}},{key:"get",value:function(e,t,r){return this._ajaxClient.get(e,t,r)}},{key:"post",value:function(e,t,r,n){return this._ajaxClient.post(e,t,r,n)}}],[{key:"getInstance",value:function(){return Y}}]),e}(),Y=new z,X=z,$=r(44),J={openGatewayPdUrl:$.HTTPS__AUDIOC_OPEN_GW_PD_URL,openGatewayHlsUrl:$.HTTPS__AUDIOC_OPEN_GW_HLS_URL,playLogUrl:$.HTTPS__AUDIOP_PLAY_LOG_URL,qualityLogUrl:$.HTTPS__AUDIOP_QUALITY_LOG_URL,neloUrl:$.HTTPS__AUDIOP_NELO_URL,playEventLogUrl:$.HTTPS__AUDIOP_PLAY_EVENT_LOG_URL},Q=function(){function e(){x()(this,e),this.neloUrl=J.neloUrl,this.ajaxClient=X.getInstance();var t=U.getParser();this.userAgent=t.getUA()}return k()(e,[{key:"info",value:function(e,t){this._sendMessage("INFO",e,t)}},{key:"warn",value:function(e,t){this._sendMessage("WARN",e,t)}},{key:"error",value:function(e,t){this._sendMessage("ERROR",e,t)}},{key:"_sendMessage",value:function(e,t,r){var n={message:t};void 0!==r&&null!==r&&(n.cause=r instanceof Error?r.toString():r),this._send(e,n)}},{key:"_send",value:function(e,t){this.ajaxClient.postJSON(this.neloUrl,null,this._format(e,t),!1).then(function(e){}).catch(function(e){})}},{key:"_format",value:function(e,t){return _()({projectName:"AUDIOCLOUD_WEBPLAYER_CORE",projectVersion:W.AUDIOCLOUD_WEBPLAYER_CORE_VERSION,body:t,host:location.host,logSource:"http",logType:"nelo2-log",logLevel:e,location:location.href,userAgent:this.userAgent})}}],[{key:"getInstance",value:function(){return Z}}]),e}(),Z=new Q,ee=Q,te=r(149),re=r.n(te),ne=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x()(this,e),this.version="0.0.1",this._api=t.api,this._audiopNeloLogger=ee.getInstance(),this.loggerCore=this._createLoggerCore(t.audiopMediaElement),this.loggerTimestamp={requestPlayAPI:0,responsePlayAPI:0}}return k()(e,[{key:"destroy",value:function(){this.loggerCore&&(this.loggerCore.reset(),this.loggerCore=null)}},{key:"_createLoggerCore",value:function(e){var t=this;if(!e||!e.getMediaElement())throw new Error("swf or mediaElement not created");var r=new re.a(e.getMediaElement());if(r.on(function(e){"ipc_fail"!=e.type&&"pt_fail"!=e.type||t._audiopNeloLogger.error("Failed to send pc/quality log",e)}),!r)throw new Error("logger creation error");return r}},{key:"setMediaElement",value:function(e){e&&this.loggerCore.setAudio(e)}},{key:"setupPlayLogInfo",value:function(e){if(!this.loggerTimestamp.requestPlayAPI||!this.loggerTimestamp.responsePlayAPI)throw new Error("invalid logger setup");var t=U.getParser().getOS();this.loggerCore.setInitLogInfo({header:{},ipcURL:J.playLogUrl,ptURL:J.qualityLogUrl,sid:e.sid,pv:"2.0.3.2",cc:e.cc,aid:e.aid,d:"",q:e.q,du:e.du,it:this.loggerTimestamp.responsePlayAPI-this.loggerTimestamp.requestPlayAPI,lv:"1",prtc:"3",ns:"0",cdn:e.cdn,extra:"",os:t.name,osv:t.version})}},{key:"timestamp_requestPlayAPI",value:function(){this._resetPlayAPITimestamp(),this.loggerTimestamp.requestPlayAPI=(new Date).getTime()}},{key:"timestamp_responsePlayAPI",value:function(){this.loggerTimestamp.responsePlayAPI=(new Date).getTime()}},{key:"_resetPlayAPITimestamp",value:function(){this.loggerTimestamp.requestPlayAPI=0,this.loggerTimestamp.responsePlayAPI=0}}]),e}(),ie=new Uint8Array(16);var oe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var ae=function(e){return"string"==typeof e&&oe.test(e)},se=[],ue=0;ue<256;++ue)se.push((ue+256).toString(16).substr(1));var le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(se[e[t+0]]+se[e[t+1]]+se[e[t+2]]+se[e[t+3]]+"-"+se[e[t+4]]+se[e[t+5]]+"-"+se[e[t+6]]+se[e[t+7]]+"-"+se[e[t+8]]+se[e[t+9]]+"-"+se[e[t+10]]+se[e[t+11]]+se[e[t+12]]+se[e[t+13]]+se[e[t+14]]+se[e[t+15]]).toLowerCase();if(!ae(r))throw TypeError("Stringified UUID is invalid");return r};var ce=function(e,t,r){var n=(e=e||{}).random||(e.rng||function(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(ie)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return le(n)},de=r(150),fe=r.n(de),he=k()(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{transactionId:null,pv:null,cu:[],cuSeq:0};x()(this,e),this._transactionId=t.transactionId,this._pv=t.pv,this._cu=t.cu,this._cuSeq=t.cuSeq}),pe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x()(this,e),this.options=t,this._audiopNeloLogger=ee.getInstance(),this._mediaElement=void 0,this._ajaxClient=X.getInstance(),this._audioId=void 0,this._cpContentId=void 0,this._totalPlayTime=void 0,this._transactionIdRequestCount=0,this._playEventLogTransactionUrl=void 0,this._playEventLogUrl=void 0,this._eventLogData=void 0,this._isDeactivated=!1,this._stg=void 0,this._did=void 0,this._init(this.options.audiopMediaElement)}return k()(e,[{key:"destroy",value:function(){this._sendTerminationEventIfNecessary("STOP"),this._isDeactivated=!0}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=e.audioId,o=(e.type,e.url,e.duration),a=(e.expireTime,e.codec,e.kbps,e.cpNo),s=e.cpContentId,u=e.region;this._sendTerminationEventIfNecessary("SKIP"),this._audioId===i&&0===this._eventLogData._cuSeq||(this._audioInfo=e,this._audioId=i||"",this._cpContentId=s||"",this._totalPlayTime=o,this._stg=t,this._did=r,this._extra=n||{},this._cpNo=a||null,this._region=u||null,this._transactionIdRequestCount=0,this._playEventLogUrl=this._makePlayEventLogUrl(this._cpContentId,this._audioId),this._eventLogData=this._makeNewEventLogData(),(this._audioId||this._cpContentId)&&(this._isDeactivated=!1))}},{key:"sendEndEvent",value:function(){this._addLogDataAndSendMandatoryLog("END")}},{key:"_init",value:function(e){if(!e)throw new Error("swf or mediaElement not created");this._mediaElement=e,this._eventLogData=new he,this._initEventListener()}},{key:"_initEventListener",value:function(){var e=this;this._mediaElement.on("loadstart",function(){e.reset(e._audioInfo,e._stg,e._did,e._extra),e._addLogDataAndSendMandatoryLog("PLAY")}),this._mediaElement.on("playing",function(){e._addLogDataAndSendMandatoryLog("PLAYING")}),this._mediaElement.on("pause",function(){e._addLogDataAndSendMandatoryLog("PAUSE")}),this._mediaElement.on("seeking",function(){e._addLogDataAndSendMandatoryLog("SEEKING")}),this._mediaElement.on("seeked",function(){e._addLogDataAndSendMandatoryLog("SEEKED")}),this._mediaElement.on("ended",function(){e._addLogDataAndSendMandatoryLog("END")}),this._mediaElement.on("error",function(){e._addLogDataAndSendMandatoryLog("ERROR")})}},{key:"_addLogDataAndSendMandatoryLog",value:function(e){this._addCuData(this._eventLogData,e),this._isMandatoryEventLog(e)&&this._sendEventLog()}},{key:"_isMandatoryEventLog",value:function(e){if("PLAYING"===e||this._isTerminationEventType(e))return!0;if("PAUSE"!==e&&"SEEKING"!==e)return!1;var t=this._eventLogData._cu.length;return t>1&&"PLAYING"==this._eventLogData._cu[t-2].e||!(1!=t||!this._eventLogData._pv||"PLAYING"!=this._eventLogData._pv.e)}},{key:"_generateTransactionId",value:function(){try{return ce().toUpperCase().replace(/-/g,"")}catch(t){var e=this._generateFallbackTransactionId();return this._audiopNeloLogger.warn("Failed to generate uuid for play event log, fallback to "+e),e}}},{key:"_generateFallbackTransactionId",value:function(){var e=Math.random()+_()(this._audioInfo);return"FALLBACK"+fe()(e).substring(0,24).toUpperCase()}},{key:"_makePlayEventLogUrl",value:function(e,t){var r=J.playEventLogUrl;return r=r.replace("{cpContentIds}",e).replace("{audioIds}",t)}},{key:"_sendEventLog",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(!this._isDeactivated){var n=this._eventLogData;if(!this._isNotAvailableSendEventLog(n))return null==n._transactionId&&(n._transactionId=this._generateTransactionId()),this._eventLogData=this._makeNewEventLogData({transactionId:n._transactionId,pv:this._makePvData(),cu:[],cuSeq:n._cuSeq}),new K.a(function(i,o){e._ajaxClient.postJSON(e._playEventLogUrl,{},_()(e._makeEventLogData(n)),!0).then(function(e){i(e)}).catch(function(n){T()(function(){if(t<=0)return e._audiopNeloLogger.error("Failed to send play event log",n),void o(n);var a=e._sendEventLog(t-1,r);a&&a.then(i,o)},r)})})}}},{key:"_isNotAvailableSendEventLog",value:function(e){return e._cu.length<=0}},{key:"_makePvData",value:function(){var e=this._eventLogData;return e._cu[e._cu.length-1]}},{key:"_makeEventLogData",value:function(e){return{logver:"1.3",logs:[{tid:e._transactionId,cid:this._cpContentId,aid:this._audioId,pt:this._totalPlayTime,extra:this._extra,stg:this._stg,did:this._did,cno:this._cpNo,reg:this._region,evt:this._makeEventData(e)}]}}},{key:"_makeEventData",value:function(e){var t=e._pv,r=e._cu,n={};return t&&(n.pv=t),n.cu=r,n}},{key:"_addCuData",value:function(e,t){if(!this._isDeactivated){var r=(new Date).toISOString(),n={sq:++e._cuSeq,t:r,e:t,ct:this._mediaElement.currentTime()};e._cu.push(n)}}},{key:"_makeNewEventLogData",value:function(e){return new he(e||void 0)}},{key:"_processNotSentLogs",value:function(){return this._eventLogData._cu.length>0&&(this._sendEventLog(),!0)}},{key:"_sendTerminationEventIfNecessary",value:function(e){var t=!!this._eventLogData._transactionId,r=!(this._eventLogData._pv&&this._isTerminationEventType(this._eventLogData._pv.e));t&&r&&this._addLogDataAndSendMandatoryLog(e),this._processNotSentLogs()}},{key:"_isTerminationEventType",value:function(e){return"END"===e||"ERROR"===e||"STOP"===e||"SKIP"===e}},{key:"deactivate",value:function(){this._isDeactivated=!0}}]),e}(),ge=function(){function e(){x()(this,e)}return k()(e,[{key:"fetchJSON",value:function(e){var t=this.fetch(e);return t?JSON.parse(t):null}},{key:"fetch",value:function(e){var t=localStorage.getItem(e);return t?decodeURIComponent(t):""}},{key:"syncJSON",value:function(e,t){this.sync(e,_()(t))}},{key:"sync",value:function(e,t){localStorage.setItem(e,t)}}]),e}(),ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x()(this,e),this.options=t,this.configKey="AudiopConfigStorage",this.storage=t.storage}return k()(e,[{key:"fetchVolume",value:function(){var e=this.storage.fetchJSON(this.configKey);return e||(e={volume:.5},this.storage.syncJSON(this.configKey,e)),e.volume}},{key:"syncVolume",value:function(e){var t=this.storage.fetchJSON(this.configKey);t||(t={volume:.5}),t.volume=e,this.storage.syncJSON(this.configKey,t)}}]),e}(),me=r(35),ye=r.n(me),be=r(151),_e=r.n(be);function Ee(e){var t=function(){if("undefined"==typeof Reflect||!v.a)return!1;if(v.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(v()(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=v()(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var Te=function(e){O()(r,e);var t=Ee(r);function r(){var e;return x()(this,r),(e=t.call(this)).mediaElement=document.createElement("audio"),e._initEventListener(),e._neloLogger=ee.getInstance(),e.playStarted=!1,e.seeking=!1,e.paused=!1,e.triggeredEvents={},e}return k()(r,[{key:"destroy",value:function(){this.removeAllListeners(),this.playStarted=!1,this.mediaElement&&(this.mediaElement.pause(),this.mediaElement.src="",this.mediaElement.remove?this.mediaElement.remove():this.mediaElement.parentNode&&this.mediaElement.parentNode.removeChild(this.mediaElement),this.mediaElement=null)}},{key:"getMediaElement",value:function(){return this.mediaElement}},{key:"_initEventListener",value:function(){var e=this;this.__isIOS13()&&window.addEventListener("pagehide",function(){e.pause()}),this.mediaElement.addEventListener("loadstart",function(t){e.playStarted&&(e.emit(t.type),e.triggeredEvents[t.type]=!0)}),this.mediaElement.addEventListener("canplay",function(e){}),this.mediaElement.addEventListener("playing",function(t){e.playStarted&&(e.triggeredEvents.loadstart||(e.emit("loadstart"),e.triggeredEvents.loadstart=!0),e.triggeredEvents.canplay||(e.emit("canplay"),e.triggeredEvents.canplay=!0),e.emit(t.type),e.triggeredEvents[t.type]=!0)}),this.mediaElement.addEventListener("pause",function(t){e.playStarted&&(e.emit(t.type),e.triggeredEvents[t.type]=!0)}),this.mediaElement.addEventListener("ended",function(t){e.playStarted&&(e.playStarted=!1,e.emit(t.type),e.triggeredEvents[t.type]=!0)}),this.mediaElement.addEventListener("timeupdate",function(t){e.playStarted&&(e.seeking||e.paused||(e.triggeredEvents.loadstart||(e.emit("loadstart"),e.triggeredEvents.loadstart=!0),e.triggeredEvents.canplay||(e.emit("canplay"),e.triggeredEvents.canplay=!0),e.triggeredEvents.playing||(e.emit("playing"),e.triggeredEvents.playing=!0)),e.emit(t.type,e.mediaElement.currentTime),e.triggeredEvents[t.type]=!0)}),this.mediaElement.addEventListener("seeking",function(t){e.playStarted&&(e.seeking=!0,e.triggeredEvents.canplay=!1,e.triggeredEvents.playing=!1,e.emit(t.type),e.triggeredEvents[t.type]=!0)}),this.mediaElement.addEventListener("seeked",function(t){e.playStarted&&(e.seeking=!1,e.emit(t.type,e.mediaElement.currentTime),e.triggeredEvents[t.type]=!0)}),this.mediaElement.addEventListener("volumechange",function(t){e.playStarted&&(e.emit(t.type,e.mediaElement.volume),e.triggeredEvents[t.type]=!0)}),this.mediaElement.addEventListener("waiting",function(t){e.playStarted&&(e.emit(t.type),e.triggeredEvents[t.type]=!0)}),this.mediaElement.addEventListener("error",function(t){e.playStarted&&(t&&t.error?e._neloLogger.error("HtmlMediaElement ErrorEvent: "+t.message,t.error):e.mediaElement.error&&e.mediaElement.error.code?e._neloLogger.error("HtmlMediaElement MediaError",{event:t,code:e.mediaElement.error.code,message:e.mediaElement.error.message,src:e.mediaElement.src}):e._neloLogger.error("HtmlMediaElement ErrorEvent",t),e.emit("error","UNKNOWN_ERROR"),e.triggeredEvents[t.type]=!0)}),this.mediaElement.addEventListener("durationchange",function(t){e.emit(t.type,e.mediaElement.duration)})}},{key:"reset",value:function(e){this._initMediaElement(e),this._resetMediaElement()}},{key:"_initMediaElement",value:function(e){this.playStarted=!1;var t=this.mediaElement;t.style.display="none;",t.autoplay=e,(void 0===t.currentTime||t.currentTime&&t.currentTime>0)&&(t.currentTime=0),this.triggeredEvents={}}},{key:"_resetMediaElement",value:function(){var e=this.mediaElement;e.pause(),e.src="";var t=e.play();window.Promise&&void 0!==t&&t.then(function(){}).catch(function(e){}),e.volume=0}},{key:"source",value:function(e){this.mediaElement.src=e}},{key:"play",value:function(){var e=this;if(this.__isIOS11()){this.playStarted=!1,this.mediaElement.muted=!0,this.mediaElement.playbackRate=10;var t=this.mediaElement.play();window.Promise&&void 0!==t&&t.catch(function(t){e._handlePlayError(t)});var r=0,n=_e()(function(){e.mediaElement.currentTime=r,(++r>8||e.mediaElement.duration<r)&&(clearInterval(n),e.mediaElement.playbackRate=1,e.mediaElement.currentTime=0,T()(function(){e.mediaElement.muted=!1,e.playStarted=!0,e.paused=!1},200))},200)}else{this.playStarted=!0,this.paused=!1;var i=this.mediaElement.play();window.Promise&&void 0!==i&&i.catch(function(t){e._handlePlayError(t)})}}},{key:"_handlePlayError",value:function(e){if(e instanceof Error){if("AbortError"===e.name)return void this._neloLogger.warn("AbortError on HtmlMediaElement.play()",e);if("NotSupportedError"===e.name)return this._neloLogger.error("NotSupportedError on HtmlMediaElement.play(), src = "+this.mediaElement.src,e),void this.emit("error","UNKNOWN_ERROR");if("NotAllowedError"===e.name)return this._neloLogger.error("NotAllowedError on HtmlMediaElement.play()",e),void this.emit("error","AUTO_PLAY_IS_PREVENTED")}this._neloLogger.error("Unknown error on HtmlMediaElement.play()",e),this.emit("error","AUTO_PLAY_IS_PREVENTED")}},{key:"pause",value:function(){this.paused=!0,this.mediaElement.pause()}},{key:"resume",value:function(){this.paused=!1,this.mediaElement.play()}},{key:"volume",value:function(e){return void 0!==e&&(this.mediaElement.volume=e),this.mediaElement.volume}},{key:"seek",value:function(e){this.mediaElement.currentTime=e}},{key:"stop",value:function(){this.mediaElement.pause()}},{key:"currentTime",value:function(){return this.mediaElement.currentTime?this.mediaElement.currentTime:0}},{key:"mute",value:function(e){return this.mediaElement.muted=e,this.mediaElement.muted}},{key:"title",value:function(e){return this.mediaElement.title=e,this.mediaElement.title}},{key:"playbackRate",value:function(e){return void 0==e||isNaN(e)||(this.mediaElement.playbackRate=e),this.mediaElement.playbackRate}},{key:"__isIOS11",value:function(){var e=U.getParser().getOS();return!(!e.name.toLowerCase().match(/iOS/gi)||!e.version.match(/^(11).*/))}},{key:"__isIOS13",value:function(){var e,t=U.getParser().getOS(),r=t.name.toLowerCase().match(/iOS/gi)&&t.version.match(/^(13).*/),n=navigator.userAgent,i=ye()(e=n.toLowerCase()).call(e,"version/"),o=n.substr(i+8,4),a=t.name.toLowerCase().match(/Mac OS/gi)&&"ontouchend"in document&&o.match(/^(13).*/);return!(!r&&!a)}}]),r}(j.a);function Se(e){var t=function(){if("undefined"==typeof Reflect||!v.a)return!1;if(v.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(v()(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=v()(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var we=function(e){O()(r,e);var t=Se(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x()(this,r),(e=t.call(this)).version="0.0.1",e.options=n,e.audiopConfigStorage=new ve({storage:new ge}),e.htmlMediaElement=new Te,e._initEventListener(),e._neloLogger=ee.getInstance(),e}return k()(r,[{key:"destroy",value:function(){this.removeAllListeners(),this.htmlMediaElement&&(this.htmlMediaElement.destroy(),this.htmlMediaElement=null)}},{key:"_initEventListener",value:function(){var e=this;this.htmlMediaElement.on("loadstart",function(){e.emit("loadstart")}),this.htmlMediaElement.on("canplay",function(){e.emit("canplay")}),this.htmlMediaElement.on("playing",function(){e.emit("playing")}),this.htmlMediaElement.on("pause",function(){e.emit("pause")}),this.htmlMediaElement.on("ended",function(){e.emit("ended")}),this.htmlMediaElement.on("timeupdate",function(t){e.emit("timeupdate",t)}),this.htmlMediaElement.on("seeking",function(){e.emit("seeking")}),this.htmlMediaElement.on("seeked",function(t){e.emit("seeked",t)}),this.htmlMediaElement.on("volumechange",function(t){e.emit("volumechange",t)}),this.htmlMediaElement.on("waiting",function(){e.emit("waiting")}),this.htmlMediaElement.on("error",function(t){e.emit("error",t)}),this.htmlMediaElement.on("durationchange",function(t){e.emit("durationchange",t)})}},{key:"_reset",value:function(){this.htmlMediaElement.reset(!1)}},{key:"reset",value:function(){this._reset()}},{key:"play",value:function(e){var t=this;if(!e)return this._neloLogger.error("AudiopAudioTag.play(): No URL found"),void this.emit("error","UNKNOWN_ERROR");this.htmlMediaElement.source(e),this._isIE()?(this.htmlMediaElement.volume(this.audiopConfigStorage.fetchVolume()),this.htmlMediaElement.play()):null==this.playStartDelayTimer&&(this.playStartDelayTimer=T()(function(){t.htmlMediaElement.volume(t.audiopConfigStorage.fetchVolume()),t.htmlMediaElement.play(),t.playStartDelayTimer=null},800))}},{key:"_isIE",value:function(){return"IE"===U.getParser().getBrowser().name}},{key:"pause",value:function(){this.htmlMediaElement.pause()}},{key:"resume",value:function(){this.htmlMediaElement.resume()}},{key:"volume",value:function(e){return this.audiopConfigStorage.syncVolume(e),this.htmlMediaElement.volume(e)}},{key:"seek",value:function(e){this.htmlMediaElement.seek(e)}},{key:"stop",value:function(){this.htmlMediaElement.stop(),this._reset()}},{key:"currentTime",value:function(){return this.htmlMediaElement.currentTime()}},{key:"mute",value:function(e){return this.htmlMediaElement.mute(e)}},{key:"title",value:function(e){return this.htmlMediaElement.title(e)}},{key:"getAudio",value:function(){return this.htmlMediaElement.getMediaElement()}},{key:"playbackRate",value:function(e){return this.htmlMediaElement.playbackRate(e)}},{key:"getMediaElement",value:function(){return this.getAudio()}}]),r}(j.a),Ae=r(99),xe=r.n(Ae),Le=r(58),ke=r.n(Le);function Re(e){var t=function(){if("undefined"==typeof Reflect||!v.a)return!1;if(v.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(v()(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=v()(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var Oe=function(e){O()(r,e);var t=Re(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x()(this,r),(e=t.call(this)).version="0.0.1",e.options=n,e.hls=null,e.audiopConfigStorage=new ve({storage:new ge}),e.htmlMediaElement=new Te,e._initEventListener(),e._neloLogger=ee.getInstance(),e}return k()(r,[{key:"destroy",value:function(){this.removeAllListeners(),this.hls&&(this.hls.stopLoad(),this.hls.destroy(),this.hls=null),this.htmlMediaElement&&(this.htmlMediaElement.destroy(),this.htmlMediaElement=null)}},{key:"_initEventListener",value:function(){var e=this;this.htmlMediaElement.on("loadstart",function(){e.emit("loadstart")}),this.htmlMediaElement.on("canplay",function(){e.emit("canplay")}),this.htmlMediaElement.on("playing",function(){e.emit("playing")}),this.htmlMediaElement.on("pause",function(){e.emit("pause")}),this.htmlMediaElement.on("ended",function(){e.emit("ended")}),this.htmlMediaElement.on("timeupdate",function(t){e.emit("timeupdate",t)}),this.htmlMediaElement.on("seeking",function(){e.emit("seeking")}),this.htmlMediaElement.on("seeked",function(t){e.emit("seeked",t)}),this.htmlMediaElement.on("volumechange",function(t){e.emit("volumechange",t)}),this.htmlMediaElement.on("waiting",function(){e.emit("waiting")}),this.htmlMediaElement.on("error",function(t){e.emit("error",t)}),this.htmlMediaElement.on("durationchange",function(t){e.emit("durationchange",t)})}},{key:"_reset",value:function(){this.htmlMediaElement.reset(!1),this._resetHls()}},{key:"_createHls",value:function(){var e=this;if(!ke.a.isSupported())throw new Error("Hls.js cannot be used.");var t={maxMaxBufferLength:30,xhrSetup:function(e,t){xe()(t).call(t,"naver.net")||xe()(t).call(t,"naver.com")?e.withCredentials=!0:e.withCredentials=!1}},r=U.getParser().getBrowser().name;(r.match(/edge/gi)||"IE"===r)&&(t.maxFragLookUpTolerance=0);var n=new ke.a(t);return n.attachMedia(this.htmlMediaElement.getMediaElement()),void 0===this.errorCount&&(this.errorCount=0),void 0===this.errorCountResetTimer&&(this.errorCountResetTimer=null),n.on(ke.a.Events.ERROR,function(t,r){switch(r.details){case ke.a.ErrorDetails.FRAG_LOAD_ERROR:e.stop(),e.emit("ended"),e._incrementErrorCount()}}),this.emit("hlsjsinit",n),n}},{key:"_incrementErrorCount",value:function(){var e=this;this.errorCountResetTimer&&(clearTimeout(self.errorCountResetTimer),this.errorCountResetTimer=null),this.errorCount++,this.errorCount>5?this.stop():this.errorCountResetTimer=T()(function(){e.errorCount=0,e.errorCountResetTimer=null},2e3)}},{key:"_resetHls",value:function(){this.hls&&(this.hls.stopLoad(),this.hls.destroy()),this.hls=this._createHls()}},{key:"reset",value:function(){this._reset()}},{key:"play",value:function(e){var t=this;if(!e)return this._neloLogger.error("AudiopMseHls.play(): No URL found"),void this.emit("error","UNKNOWN_ERROR");this.hls.loadSource(e),this._isIE()?(this.htmlMediaElement.volume(this.audiopConfigStorage.fetchVolume()),this.htmlMediaElement.play()):null==this.playStartDelayTimer&&(this.playStartDelayTimer=T()(function(){t.htmlMediaElement.volume(t.audiopConfigStorage.fetchVolume()),t.htmlMediaElement.play(),t.playStartDelayTimer=null},800))}},{key:"_isIE",value:function(){return"IE"===U.getParser().getBrowser().name}},{key:"pause",value:function(){this.htmlMediaElement.pause()}},{key:"resume",value:function(){this.htmlMediaElement.resume()}},{key:"volume",value:function(e){return this.audiopConfigStorage.syncVolume(e),this.htmlMediaElement.volume(e)}},{key:"seek",value:function(e){this.htmlMediaElement.seek(e)}},{key:"stop",value:function(){this.htmlMediaElement.stop()}},{key:"currentTime",value:function(){return this.htmlMediaElement.currentTime()}},{key:"mute",value:function(e){return this.htmlMediaElement.mute(e)}},{key:"title",value:function(e){return this.htmlMediaElement.title(e)}},{key:"getAudio",value:function(){return this.htmlMediaElement.getMediaElement()}},{key:"playbackRate",value:function(e){return this.htmlMediaElement.playbackRate(e)}},{key:"getMediaElement",value:function(){return this.getAudio()}}]),r}(j.a);function De(e){var t=function(){if("undefined"==typeof Reflect||!v.a)return!1;if(v.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(v()(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=v()(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var Pe=function(e){O()(r,e);var t=De(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x()(this,r),(e=t.call(this))._audioProgressiveElement=e._initEventListener(new we),e._audioHlsElement=e._initEventListener(new Oe({api:n.api})),e._activeAudioElement=e._audioProgressiveElement,e}return k()(r,[{key:"destroy",value:function(){this.removeAllListeners(),this._audioProgressiveElement&&(this._audioProgressiveElement.destroy(),this._audioProgressiveElement=null),this._audioHlsElement&&(this._audioHlsElement.destroy(),this._audioHlsElement=null),this._activeAudioElement=null}},{key:"_initEventListener",value:function(e){var t=this;return e.on("loadstart",function(){t.emit("loadstart")}),e.on("canplay",function(){t.emit("canplay")}),e.on("playing",function(){t.emit("playing")}),e.on("pause",function(){t.emit("pause")}),e.on("ended",function(){t.emit("ended")}),e.on("timeupdate",function(e){t.emit("timeupdate",e)}),e.on("seeking",function(){t.emit("seeking")}),e.on("seeked",function(e){t.emit("seeked",e)}),e.on("volumechange",function(e){t.emit("volumechange",e)}),e.on("waiting",function(){t.emit("waiting")}),e.on("error",function(e){t.emit("error",e)}),e.on("hlsjsinit",function(e){t.emit("hlsjsinit",e)}),e.on("durationchange",function(e){t.emit("durationchange",e)}),e}},{key:"_isHlsAudio",value:function(e){return/.+\.m3u8[?]?.*$/.test(e)}},{key:"reset",value:function(){this._audioHlsElement.reset(),this._audioProgressiveElement.reset()}},{key:"play",value:function(e){this._activeAudioElement=this._isHlsAudio(e)?this._audioHlsElement:this._audioProgressiveElement,this._activeAudioElement.play(e)}},{key:"pause",value:function(){this._activeAudioElement.pause()}},{key:"resume",value:function(){this._activeAudioElement.resume()}},{key:"volume",value:function(e){return this._activeAudioElement.volume(e)}},{key:"seek",value:function(e){this._activeAudioElement.seek(e)}},{key:"stop",value:function(){this._activeAudioElement.stop()}},{key:"currentTime",value:function(){return this._activeAudioElement.currentTime()}},{key:"mute",value:function(e){return this._activeAudioElement.mute(e)}},{key:"title",value:function(e){return this._activeAudioElement.title(e)}},{key:"getAudio",value:function(e){return e?this._isHlsAudio(e)?this._audioHlsElement.getAudio():this._audioProgressiveElement.getAudio():this._activeAudioElement.getAudio()}},{key:"getMediaElement",value:function(e){return this.getAudio(e)}},{key:"playbackRate",value:function(e){return this._activeAudioElement.playbackRate(e)}}]),r}(j.a);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!v.a)return!1;if(v.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(v()(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=v()(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var Ie=function(e){O()(r,e);var t=Ce(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(x()(this,r),e=t.call(this),B.choosePlayerCore()){case"MSE":e._audioElement=e._initEventListener(new Pe(n));break;case"AUDIO_TAG":e._audioElement=e._initEventListener(new we(n))}return e}return k()(r,[{key:"destroy",value:function(){this.removeAllListeners(),this._audioElement&&(this._audioElement.destroy(),this._audioElement=null)}},{key:"_initEventListener",value:function(e){var t=this;return e.on("loadstart",function(){t.emit("loadstart")}),e.on("canplay",function(){t.emit("canplay")}),e.on("playing",function(){t.emit("playing")}),e.on("pause",function(){t.emit("pause")}),e.on("ended",function(){t.emit("ended")}),e.on("timeupdate",function(e){t.emit("timeupdate",e)}),e.on("seeking",function(){t.emit("seeking")}),e.on("seeked",function(e){t.emit("seeked",e)}),e.on("volumechange",function(e){t.emit("volumechange",e)}),e.on("waiting",function(){t.emit("waiting")}),e.on("error",function(e){t.emit("error",e)}),e.on("hlsjsinit",function(e){t.emit("hlsjsinit",e)}),e.on("durationchange",function(e){t.emit("durationchange",e)}),e}},{key:"reset",value:function(){this._audioElement.reset()}},{key:"play",value:function(e){this._audioElement.play(e)}},{key:"pause",value:function(){this._audioElement.pause()}},{key:"resume",value:function(){this._audioElement.resume()}},{key:"volume",value:function(e){return this._audioElement.volume(e)}},{key:"seek",value:function(e){this._audioElement.seek(e)}},{key:"stop",value:function(){this._audioElement.stop()}},{key:"currentTime",value:function(){return this._audioElement.currentTime()}},{key:"mute",value:function(e){return this._audioElement.mute(e)}},{key:"title",value:function(e){return this._audioElement.title(e)}},{key:"getAudio",value:function(e){return this._audioElement.getAudio(e)}},{key:"getMediaElement",value:function(e){return this._audioElement.getMediaElement(e)}},{key:"playbackRate",value:function(e){return this._audioElement.playbackRate(e)}}]),r}(j.a),Me=r(152),je=function(){function e(){x()(this,e)}return k()(e,null,[{key:"getResultFromPlayToken",value:function(e){return JSON.parse(Me.Base64.decode(e))}}]),e}();function Ne(e){var t=function(){if("undefined"==typeof Reflect||!v.a)return!1;if(v.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(v()(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=v()(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var Fe=function(e){O()(r,e);var t=Ne(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x()(this,r),(e=t.call(this)).options=n,e.audiopMediaElement=new Ie({api:n.api}),e._neloLogger=ee.getInstance(),e.audiopLogger=new ne({api:e.options.api,audiopMediaElement:e.audiopMediaElement}),e.audiopEventLogger=new pe({api:e.options.api,audiopMediaElement:e.audiopMediaElement}),e.resetBeforePlay=!1,e.blockEvent=!1,e.seekAndStart={enabled:!1,startSeconds:0},e.limitedPlay={enabled:!1,limitEndSeconds:0},e.currentAudio={plugin:null,pluginPlayInfo:null,logInfo:null,playControl:{},currentTime:0,playStarted:!1,playEnded:!1,isPlaying:!1,cpContent:{},duration:null,expireTime:null,url:null,isExternal:!1},e._initEventListener(),e}return k()(r,[{key:"destroy",value:function(){this.removeAllListeners(),this.audiopLogger&&(this.audiopLogger.destroy(),this.audiopLogger=null),this.audiopEventLogger&&(this.audiopEventLogger.destroy(),this.audiopEventLogger=null),this.audiopMediaElement&&(this.audiopMediaElement.destroy(),this.audiopMediaElement=null)}},{key:"_initEventListener",value:function(){var e=this;this.audiopMediaElement.on("loadstart",function(){e.emit("loadstart")}),this.audiopMediaElement.on("canplay",function(){e.blockEvent||e.emit("canplay")}),this.audiopMediaElement.on("playing",function(){e.blockEvent||(e.emit("playing"),e.currentAudio.playStarted=!0,e.currentAudio.isPlaying=!0)}),this.audiopMediaElement.on("pause",function(){e.blockEvent||(e.emit("pause"),e.currentAudio.isPlaying=!1)}),this.audiopMediaElement.on("ended",function(){e.blockEvent||(e.currentAudio.playEnded=!0,e.currentAudio.isPlaying=!1,e.limitedPlay.enabled&&(e.emit("playlimit"),e.audiopEventLogger.sendEndEvent()),e.emit("ended"))}),this.audiopMediaElement.on("timeupdate",function(t){e.currentAudio.currentTime=t,e.blockEvent?e.seekAndStart.enabled&&e.seek(e.seekAndStart.startSeconds):(e.emit("timeupdate",t),e.limitedPlay.enabled&&e.limitedPlay.limitEndSeconds<t&&(e.emit("playlimit"),e.audiopEventLogger.sendEndEvent(),e.stop()))}),this.audiopMediaElement.on("seeking",function(){e.blockEvent||e.emit("seeking")}),this.audiopMediaElement.on("seeked",function(t){e.currentAudio.currentTime=t,e.blockEvent?e.seekAndStart.enabled&&(e._mute(!1),e.resume(),e.seekAndStart.enabled=!1,e.blockEvent=!1):e.emit("seeked",t)}),this.audiopMediaElement.on("volumechange",function(t){e.blockEvent||e.emit("volumechange",t)}),this.audiopMediaElement.on("waiting",function(){e.blockEvent||e.emit("waiting")}),this.audiopMediaElement.on("error",function(t){e.blockEvent||e.emit("error",t)}),this.audiopMediaElement.on("hlsjsinit",function(t){e.emit("hlsjsinit",t)}),this.audiopMediaElement.on("durationchange",function(t){e.currentAudio.duration=t,e.emit("durationchange",t)})}},{key:"_setupSeekAndStart",value:function(e){this.seekAndStart.enabled=!1,this.seekAndStart.startSeconds=0,e.startSeconds&&e.startSeconds>0&&(this.seekAndStart.enabled=!0,this.seekAndStart.startSeconds=e.startSeconds,this.blockEvent=!0,this._isUncapableOfMuteBeforePlay()||this._mute(!0)),this.currentAudio.currentTime=this.seekAndStart.startSeconds}},{key:"_isUncapableOfMuteBeforePlay",value:function(){return this._isiOS14_2OrNewer()}},{key:"_isiOS14_2OrNewer",value:function(){var e=U.getParser().getOS();return/iOS/gi.test(e.name.toLowerCase())&&/^(14\.([2-9]|\d{2,}).*)|((1[5-9]|[2-9]\d).*)/.test(e.version)}},{key:"_setupLimitedPlay",value:function(e){this.limitedPlay.enabled=!1,this.limitedPlay.limitEndSeconds=0,e.limitEndSeconds&&e.limitEndSeconds>0&&(this.limitedPlay.enabled=!0,this.limitedPlay.limitEndSeconds=e.limitEndSeconds)}},{key:"_setupCurrentAudio",value:function(e,t,r,n,i){this.currentAudio.plugin=e,this.currentAudio.pluginPlayInfo=t,this.currentAudio.playControl=r||{},this.currentAudio.logInfo=n,this.currentAudio.currentTime=0,this.currentAudio.playStarted=!1,this.currentAudio.playEnded=!1,this.currentAudio.isPlaying=!1,this.currentAudio.duration=i.duration,this.currentAudio.expireTime=i.expireTime,this.currentAudio.url=i.url,this.currentAudio.isExternal=!1}},{key:"_setupCurrentAudioFromExternalUrl",value:function(e,t){this.currentAudio.plugin=null,this.currentAudio.pluginPlayInfo=null,this.currentAudio.playControl=t||{},this.currentAudio.logInfo={},this.currentAudio.currentTime=0,this.currentAudio.playStarted=!1,this.currentAudio.playEnded=!1,this.currentAudio.isPlaying=!1,this.currentAudio.duration=null,this.currentAudio.expireTime=null,this.currentAudio.url=e,this.currentAudio.isExternal=!0}},{key:"reset",value:function(){this.resetBeforePlay||(this.audiopMediaElement.reset(),this.resetBeforePlay=!0)}},{key:"play",value:function(e,t,r,n){var i=this;return this.load(e,t,r,n).then(function(e){i.audiopMediaElement.play(e.url),i.resetBeforePlay=!1})}},{key:"playLoadedAudio",value:function(){this.currentAudio.isExternal?this.playUrl(this.currentAudio.url,this.currentAudio.playControl):this._shouldRefresh()?this._refreshAudioAndPlay():this.currentAudio.url?(this.reset(),this.audiopMediaElement.play(this.currentAudio.url),this.resetBeforePlay=!1):this.emit("error","AUDIO_NOT_LOADED")}},{key:"load",value:function(e,t,r,n){var i=this;return this.reset(),this.audiopLogger.timestamp_requestPlayAPI(),this._getTokenFromPlugin(e,t).then(function(o){var a=je.getResultFromPlayToken(o),s=a.audioInfo,u=s.audioId,l=(s.type,s.url),c=s.duration,d=(s.expireTime,s.codec,s.kbps);s.cpNo,s.cpContentId,s.region;return i.audiopLogger.setMediaElement(i.audiopMediaElement.getMediaElement(l)),i.audiopLogger.timestamp_responsePlayAPI(),a.ail&&i.audiopLogger.setupPlayLogInfo(a.ail),i.audiopEventLogger.reset(a.audioInfo,n.stg,i._getDeviceIdFromPlugin(e),i._getExtraFromPlugin(e)),i._setupCurrentAudio(e,t,r,n,a.audioInfo),i._setupLimitedPlay(r),i._setupSeekAndStart(r),i.emit("loadinfo",{audioId:u,kbps:d,playTime:c}),i.emit("durationchange",c),a.audioInfo})}},{key:"_getTokenFromPlugin",value:function(e,t){return new K.a(function(r,n){try{e.loadToken(t,function(e){r(e)},function(e){n(e)})}catch(e){"UNIMPLEMENTED"===e&&console.error("Plugin loadToken() is not implemented"),n(e)}})}},{key:"_getDeviceIdFromPlugin",value:function(e){try{return e.getDeviceId?e.getDeviceId():null}catch(e){return this._neloLogger.warn("Failed to get deviceId",e),null}}},{key:"_getExtraFromPlugin",value:function(e){try{return e.getExtra?e.getExtra():null}catch(e){return this._neloLogger.warn("Failed to get extra",e),null}}},{key:"playUrl",value:function(e,t){t=t||{},this.reset(),this.audiopEventLogger.reset(),this.audiopEventLogger.deactivate(),this._setupCurrentAudioFromExternalUrl(e,t),this._setupLimitedPlay(t),this._setupSeekAndStart(t),this.audiopMediaElement.play(e),this.resetBeforePlay=!1}},{key:"pause",value:function(){this.audiopMediaElement.pause()}},{key:"resume",value:function(){this.currentAudio.playStarted&&this._shouldRefresh()?this._refreshAudioAndPlay():this.audiopMediaElement.resume()}},{key:"_refreshAudioAndPlay",value:function(){this.currentAudio.playEnded||(this.currentAudio.playControl.startSeconds=this.currentAudio.currentTime),this.play(this.currentAudio.plugin,this.currentAudio.pluginPlayInfo,this.currentAudio.playControl,this.currentAudio.logInfo)}},{key:"_shouldRefresh",value:function(){if(this.currentAudio.playEnded)return!0;if(this.currentAudio.expireTime&&this.currentAudio.duration){var e=H()()/1e3,t=this.currentAudio.duration-this.currentAudio.currentTime;if(e+t>this.currentAudio.expireTime)return this._neloLogger.info("Audio should refresh",{currentTime:e,expireTime:this.currentAudio.expireTime,audioRemainingTime:t}),!0}return!1}},{key:"volume",value:function(e){return 0<(e=(e=e<0?0:e)>1?1:e)&&(e=Math.round(10*e)/10),this.audiopMediaElement.volume(e)}},{key:"seek",value:function(e){e=e<=0?0:e,null!==this.currentAudio.duration&&(e=this.currentAudio.duration<e?this.currentAudio.duration:e),this.limitedPlay.enabled&&(e=Math.min(this.limitedPlay.limitEndSeconds,e)),this.currentAudio.currentTime=e,this.emit("timeupdate",e),this.currentAudio.isPlaying&&this._shouldRefresh()?this._refreshAudioAndPlay():this.currentAudio.playEnded||this.audiopMediaElement.seek(e)}},{key:"stop",value:function(){this.audiopMediaElement.stop(),this.currentAudio.playEnded=!0}},{key:"currentTime",value:function(){return this.currentAudio.currentTime}},{key:"_mute",value:function(e){return this.audiopMediaElement.mute(e)}},{key:"title",value:function(e){return this.audiopMediaElement.title(e)}},{key:"getAudio",value:function(){return this.audiopMediaElement.getAudio()}},{key:"playbackRate",value:function(e){return this.audiopMediaElement.playbackRate(e)}}]),r}(j.a),Ue=r(153);function Be(e){var t=function(){if("undefined"==typeof Reflect||!v.a)return!1;if(v.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(v()(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=v()(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var Ge=function(e){O()(r,e);var t=Be(r);function r(){var e;return x()(this,r),(e=t.call(this))._neloLogger=ee.getInstance(),e._ajaxClient=X.getInstance(),e}return k()(r,[{key:"loadToken",value:function(e,t,r){var n=this;if(e){var i,o=e.audioId,a=e.quality,s=e.acceptCodecs,u=e.type;switch(a||(a="MIDDLE"),s||(s="AAC,MP3"),u||(u="HLS"),u){case"HLS":i=this._fetchHls(o,a,s);break;case"PD":i=this._fetchPd(o,a,s);break;default:return this._neloLogger.error("Unknown play type "+u),void r("UNKNOWN_ERROR")}i.then(function(e){if(!e.result||!e.result.playToken)throw Error("Invalid response: "+_()(e));t(e.result.playToken)}).catch(function(e){n._neloLogger.error("Failed to fetch opengw play api",e),r("UNKNOWN_ERROR")})}else r("NOT_FOUND_AUDIO")}},{key:"_fetchHls",value:function(e,t,r){return this._ajaxClient.getJSON(J.openGatewayHlsUrl.replace("{audioId}",e).replace("{quality}",t).replace("{acceptCodecs}",r))}},{key:"_fetchPd",value:function(e,t,r){return this._ajaxClient.getJSON(J.openGatewayPdUrl.replace("{audioId}",e).replace("{quality}",t).replace("{acceptCodecs}",r))}}]),r}(r.n(Ue).a);function He(e,t){var r=void 0!==c.a&&u()(e)||e["@@iterator"];if(!r){if(a()(e)||(r=function(e,t){var r;if(!e)return;if("string"==typeof e)return qe(e,t);var n=p()(r=Object.prototype.toString.call(e)).call(r,8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return f()(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qe(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw o}}}}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!v.a)return!1;if(v.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(v()(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=I()(e);if(t){var i=I()(this).constructor;r=v()(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var We=function(e){O()(r,e);var t=Ke(r);function r(e){var n;if(x()(this,r),(n=t.call(this)).options={api:{},plugins:{},callbacks:{}},e){if(e.plugins&&(n.options.plugins=e.plugins),e.callbacks&&(n.options.callbacks=e.callbacks),e.api)for(var i in n.options.api)e.api[i]&&(n.options.api[i]=e.api[i]);for(var o in e)n.options[o]||(n.options[o]=e[o])}if(!r.isSupportedUserAgent())throw new Error("UNSUPPORTED_USERAGENT");return n._neloLogger=ee.getInstance(),n.currentAudioInfo=null,n.activePlugin=null,n.modInitialized=!1,n._defaultPlugin=new Ge,n.playerCore=new Fe({api:n.options.api}),n._initEventListener(n.playerCore),n._modInit(),n}return k()(r,[{key:"destroy",value:function(){this.removeAllListeners(),this.modInitialized=!1,this.playerCore&&(this.playerCore.destroy(),this.playerCore=null),this.options=null,this.activePlugin=null}},{key:"_initEventListener",value:function(e){var t=this;e.on("loadinfo",function(e){t.currentAudioInfo=e,t.emit("loadinfo",e)}),e.on("loadstart",function(){t.emit("loadstart")}),e.on("canplay",function(){t.emit("canplay")}),e.on("playing",function(){t.emit("playing")}),e.on("pause",function(){t.emit("pause")}),e.on("ended",function(){t.emit("ended")}),e.on("timeupdate",function(e){t.emit("timeupdate",e)}),e.on("seeking",function(){t.emit("seeking")}),e.on("seeked",function(e){t.emit("seeked",e)}),e.on("volumechange",function(e){t.emit("volumechange",e)}),e.on("waiting",function(){t.emit("waiting")}),e.on("error",function(e){t.emit("error",e)}),e.on("playlimit",function(){t.emit("playlimit")}),e.on("serviceinfo",function(e){t.emit("serviceinfo",e)}),e.on("hlsjsinit",function(e){t.emit("hlsjsinit",e)}),e.on("durationchange",function(e){t.emit("durationchange",e)}),this.on("modinit",this._optionAndPluginCallback("modinit")),this.on("loadinfo",this._optionAndPluginCallback("loadinfo")),this.on("loadstart",this._optionAndPluginCallback("loadstart")),this.on("canplay",this._optionAndPluginCallback("canplay")),this.on("playing",this._optionAndPluginCallback("playing")),this.on("pause",this._optionAndPluginCallback("pause")),this.on("ended",this._optionAndPluginCallback("ended")),this.on("timeupdate",this._optionAndPluginCallback("timeupdate")),this.on("seeking",this._optionAndPluginCallback("seeking")),this.on("seeked",this._optionAndPluginCallback("seeked")),this.on("volumechange",this._optionAndPluginCallback("volumechange")),this.on("waiting",this._optionAndPluginCallback("waiting")),this.on("error",this._optionAndPluginCallback("error")),this.on("playlimit",this._optionAndPluginCallback("playlimit")),this.on("serviceinfo",this._optionAndPluginCallback("serviceinfo")),this.on("hlsjsinit",this._optionAndPluginCallback("hlsjsinit")),this.on("durationchange",this._optionAndPluginCallback("durationchange")),this.on("error",function(e){t._neloLogger.error("Error event emitted",e)})}},{key:"_optionAndPluginCallback",value:function(e){var t=this,r=this.options.callbacks[e];return r||(r=function(){}),function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a,s;(r.apply(void 0,i),t.activePlugin)&&(a=t.activePlugin).emit.apply(a,w()(s=[e]).call(s,i))}}},{key:"_modInit",value:function(){var e=this;T()(function(){e.modInitialized=!0,e.emit("modinit")},200)}},{key:"play",value:function(e,t,r,n){var i=this;if(r||(r={}),n||(n={}),this.modInitialized){if(0===arguments.length)return void this.playerCore.playLoadedAudio();this._activatePlugin(e),this.playerCore.play(this.activePlugin,t,r,n).catch(function(r){i.emit("error",r),i._neloLogger.error("Failed to play, cpId: "+e+", pluginPlayInfo: "+_()(t),r)})}}},{key:"load",value:function(e,t,r,n){var i=this;r||(r={}),n||(n={}),this.modInitialized&&(this._activatePlugin(e),this.playerCore.load(this.activePlugin,t,r,n).catch(function(r){i.emit("error",r),i._neloLogger.error("Failed to load, cpId: "+e+", pluginPlayInfo: "+_()(t),r)}))}},{key:"_activatePlugin",value:function(e){var t=this,r=this.options.plugins[e]?this.options.plugins[e]:this._defaultPlugin;this.activePlugin!==r&&(this.activePlugin&&(this.activePlugin.emit("deactivated"),this.activePlugin.removeAllListeners("plugin_data"),this.activePlugin.removeAllListeners("plugin_abort")),r.on("plugin_data",function(e){var n=t._getCpId(r);t.emit("plugin_data",{cpId:n,data:e})}),r.on("plugin_abort",function(){t.playerCore.pause()}),this.activePlugin=r,r.emit("activated"))}},{key:"_getCpId",value:function(e){var t,r=He(y()(this.options.plugins));try{for(r.s();!(t=r.n()).done;){var n=t.value;if(this.options.plugins[n]===e)return n}}catch(e){r.e(e)}finally{r.f()}return null}},{key:"playUrl",value:function(e){this.modInitialized&&this.playerCore.playUrl(e)}},{key:"pause",value:function(){this.modInitialized&&this.playerCore.pause()}},{key:"resume",value:function(){this.modInitialized&&this.playerCore.resume()}},{key:"volume",value:function(e){return this.modInitialized?this.playerCore.volume(e):0}},{key:"seek",value:function(e){this.modInitialized&&this.playerCore.seek(e)}},{key:"currentTime",value:function(){if(this.modInitialized)return this.playerCore.currentTime()}},{key:"title",value:function(e){if(this.modInitialized)return this.playerCore.title(e)}},{key:"playbackRate",value:function(e){if(this.modInitialized)return this.playerCore.playbackRate(e)}},{key:"getAudio",value:function(){if(this.modInitialized)return this.playerCore.getAudio()}}],[{key:"isSupportedUserAgent",value:function(){return B.isSupportedUserAgent()}}]),r}(j.a);t.default=We}]).default});